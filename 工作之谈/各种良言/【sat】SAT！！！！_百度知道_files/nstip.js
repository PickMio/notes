define("ecom/common/api/nstip0905/control",function(require){var t=require("./main"),e=t,n=t.event;t.dom.getAncestorByClass=t.dom.getAncestorByClass||function(t,n){for(t=e.dom.g(t),n=new RegExp("(^|\\s)"+e.string.trim(n)+"(\\s|$)");(t=t.parentNode)&&1===t.nodeType;)if(n.test(t.className))return t;return null};var i=n._eventFilter=n._eventFilter||{};i._crossElementBoundary=i._crossElementBoundary||function(t,n){var i=n.relatedTarget,r=n.currentTarget;if(i!==!1&&r!==i&&(!i||"xul"!==i.prefix&&!e.dom.contains(r,i)))return t.call(r,n)},t.fn.bind=t.fn.bind||function(t,n){var i=arguments.length>2?[].slice.call(arguments,2):null;return function(){var r=e.lang.isString(t)?n[t]:t,o=i?i.concat([].slice.call(arguments,0)):arguments;return r.apply(n||r,o)}},i.mouseenter=window.attachEvent?null:i.mouseenter||function(t,n,r){return{type:"mouseover",listener:e.fn.bind(i._crossElementBoundary,this,r)}},i.mouseleave=window.attachEvent?null:i.mouseleave||function(t,i,r){return{type:"mouseout",listener:e.fn.bind(n._eventFilter._crossElementBoundary,this,r)}},t.page.getScrollLeft=t.page.getScrollLeft||function(){var t=document;return window.pageXOffset||t.documentElement.scrollLeft||t.body.scrollLeft};var r=function(t,e){for(var n=-1,i=0,r=t.length;r>i;i++)if(t[i]===e){n=i;break}return n};t.array.indexOf||(t.array.indexOf=r);var o=function(){this.children=[],this._listners={},this.fire("beforeinit"),this.bindEvents(this.binds),this.init.apply(this,arguments),this.fire("afterinit")};return o.prototype={constructor:o,type:"Control",disabled:!1,setOptions:function(e){if(!e)return this.options;var n=t.object,i=this.options=n.clone(this.options),r=/^on[A-Z]/,o=this,s=n.extend;return this.srcOptions=e,n.each(e,function(t,a){if(r.test(a)&&"function"==typeof t){var l=a.charAt(2).toLowerCase()+a.substr(3);o.on(l,t),delete e[a]}else a in i&&(i[a]=n.isPlain(t)?s(i[a]||{},t):t)}),i},bindEvents:function(e){var n=this;e&&e.length&&("string"==typeof e&&(e=e.split(/\s*,\s*/)),t.each(e,function(t,e){e=t&&n[t],e&&(n[t]=function(){return e.apply(n,arguments)})}))},init:function(){throw new Error("not implement init")},render:function(){throw new Error("not implement render")},appendTo:function(t){this.main=t||this.main,this.render()},disable:function(){this.disabled=!0,this.fireEvent("disable")},enable:function(){this.disabled=!1,this.fireEvent("enable")},isDisabled:function(){return this.disabled},addChild:function(t,e){var n=this.children;e=e||t.childName,e&&(n[nane]=t),n.push(t)},removeChild:function(e){t.object.each(this.children,function(t,n){t===e&&delete this[n]})},getChild:function(t){return this.children[t]},initChildren:function(){throw new Error("not implement initChildren")},on:function(e,n){t.isString(e)||(n=e,e="*");var i=this._listners[e]||[];return r(i,n)<0&&(n.$type=e,i.push(n)),this._listners[e]=i,this},un:function(e,n){t.isString(e)||(n=e,e="*");var i=this._listners[e];if(i)if(n){var o=r(i,n);~o&&delete i[o]}else i.length=0,delete this._listners[e];return this},fire:function(e,n){var i=this._listners[e];return i&&t.array.each(i,function(t){n=n||{},n.type=e,t.call(this,n)},this),"*"!==e&&this.fire("*",n),this},dispose:function(){this.fire("dispose");for(var t;t=this.children.pop();)t.dispose();for(var e in this._listners)this.un(e)}},o}),define("ecom/common/api/nstip0905/tip",function(require){var t=require("./main"),e=t.dom,n=t.page,i=require("./control"),r=function(n,i){var r=t.event.getTarget(n);return e.hasClass(r,i)||(r=e.getAncestorByClass(r,i))?r:null},o=function(){this.constructor.superClass.constructor.apply(this,arguments)};return o.HIDE_DELAY=500,o.prototype={type:"Tip",options:{disabled:!1,main:"",arrow:!1,hideDelay:0,mode:"over",title:null,content:"",prefix:"ecl-ui-tip",triggers:"tooltips",flag:"_ecui_tips",offset:{x:0,y:0},tpl:'<div class="{prefix}-arrow {prefix}-arrow-top"><em></em><ins></ins></div><div class="{prefix}-title"></div><div class="{prefix}-body"></div>'},binds:"onResize, onDocClick, onShow, onHide, hide",init:function(t){t=this.setOptions(t),t.hideDelay=t.hideDelay<0?o.HIDE_DELAY:t.hideDelay,this.disabled=t.disabled,this.title=t.title,this.content=t.content;var e=t.prefix,n=this.main=document.createElement("div");n.className=e,n.innerHTML=t.tpl.replace(/{prefix}/g,e),n.style.left="-2000px",this.events={over:{on:"mouseenter",un:"mouseleave"},click:{on:"click",un:"click"}}[t.mode]},render:function(){var e=this,n=this.main,i=this.options,r=this.events;if(!this.rendered){this.rendered=!0,document.body.appendChild(n),t.on(n,"click",function(t){e.fire("click",{event:t})}),"over"===this.options.mode&&(t.on(n,"mouseenter",function(){e.clear()}),t.on(n,"mouseleave",function(){e.clear(),e.timer=setTimeout(e.hide,i.hideDelay)}));var o=this.elements={},s=i.prefix+"-";t.each("arrow,title,body".split(","),function(e){o[e]=t.q(s+e,n)[0]}),this.addTriggers(i.triggers)}return!r&&this.triggers&&this.show(this.triggers[0]),this},addTriggers:function(e){var n=this,i=this.options,r=this.events,o=i.flag;this.triggers="string"==typeof e?t.q(i.triggers):e.length?e:[e],r&&t.each(this.triggers,function(e){t.addClass(e,o),t.on(e,r.on,n.onShow)})},refresh:function(){},clear:function(){clearTimeout(this.timer),clearTimeout(this.resizeTimer)},onResize:function(){clearTimeout(this.resizeTimer);var t=this;this.resizeTimer=setTimeout(function(){t.show(t.current)},100)},onDocClick:function(n){var i=this.main,r=t.event.getTarget(n);i===r||~t.array.indexOf(this.triggers,r)||e.contains(i,r)||this.hide()},onShow:function(e){var n=r(e,this.options.flag);if(this.clear(),n&&this.current!==n){var i=this.events;i&&(t.on(n,i.un,this.onHide),t.un(n,i.on,this.onShow),this.current&&(t.on(this.current,i.on,this.onShow),t.un(this.current,i.un,this.onHide)),"click"===this.options.mode&&t.on(document,"click",this.onDocClick)),this.current=n,this.fire("beforeShow",{target:n,event:e}),this.show(n)}},onHide:function(){var t=this.options;this.clear(),t.hideDelay?this.timer=setTimeout(this.hide,t.hideDelay):this.hide()},show:function(e){var n=this.options;this.events;var i=this.elements;this.clear(),this.current=e,t.on(window,"resize",this.onResize),i.title.innerHTML=this.title||"",i.body.innerHTML=this.content,t[this.title?"show":"hide"](i.title),n.arrow||t.hide(i.arrow),this.computePosition(),this.fire("show",{target:e})},hide:function(){var n=this.main,i=this.events,r=this.current;i&&r&&(t.on(r,i.on,this.onShow),t.un(r,i.un,this.onHide),"click"===this.options.mode&&t.un(document,"click",this.onDocClick)),this.clear();var o=this.elements.arrow;e.setStyle(n,"left",-n.offsetWidth-o.offsetWidth-2e3),this.current=null,t.un(window,"resize",this.onResize),this.fire("hide")},isVisible:function(){return!!this.current},setTitle:function(e){this.title=e||"";var n=this.elements;n.title.innerHTML=this.title,t[this.title?"show":"hide"](n.title)},setContent:function(t){this.content=t||"",this.elements.body.innerHTML=this.content},computePosition:function(){var t=this.options,i=this.current,r=this.main,o=this.elements.arrow,s=t.arrow,a=e.getPosition(i),l=t.prefix+"-arrow",c=a.top,u=a.left,f=i.offsetWidth,d=i.offsetHeight,m=u+f,p=c+d,h=u+f/2,g=c+d/2,v=r.offsetWidth,y=r.offsetHeight,b=o.firstChild.offsetWidth,w=o.firstChild.offsetHeight,x=n.getScrollTop(),C=n.getScrollLeft(),E=C+n.getViewWidth(),S=x+n.getViewHeight(),_=i.getAttribute("data-tooltips");_&&(s=/[trblc]{2}/.test(_)?_:"1");var T,L;if(s&&"1"!==s)L=s.charAt(0),T=s.charAt(1);else{var O=f>v||u-(v-f)/2>0&&E>=m+(v-f)/2?"c":u+v>E?"r":"l",j=d>y||c-(y-d)/2>0&&S>=p+(y-d)/2?"c":c+y>S?"b":"t";S>=p+w+y?(L="b",T=O):E>=m+v+b?(L="r",T=j):c-y-w>=x?(L="t",T=O):u-v-b>=C&&(L="l",T=j),s=L+T}var k={l:"left",r:"right",t:"top",b:"bottom"},D=t.offset;o.className=l+" "+l+"-"+k[L],b=o.firstChild.offsetWidth,w=o.firstChild.offsetHeight;var A=(v-b)/2,F=(y-w)/2;({t:1,b:1})[L]?(u={l:u,c:h-v/2,r:m-v}[T],c={t:c-w-y-D.y,b:p+w+D.y}[L],e.setStyle(o,"left",{c:A,l:(f-b)/2,r:v-Math.max((f-b)/2,b)}[f>v?"c":T]),e.setStyle(o,"top","")):{l:1,r:1}[L]&&(c={t:c,c:g-y/2,b:p-y}[T],u={l:u-b-v-D.x,r:m+b+D.x}[L],e.setStyle(o,"top",{c:F,t:(d-w)/2,b:y-(d-w)/2}[d>y?"c":T]),e.setStyle(o,"left","")),e.setStyles(r,{left:u,top:c})}},t.inherits(o,i),o}),define("ecom/common/api/nstip0905/url",function(require){var t=require("./object"),e=require("./lang"),exports={};return exports.escapeSymbol=function(t){return String(t).replace(/[#%&+=\/\\\ \\u3000\f\r\n\t]/g,function(t){return"%"+(256+t.charCodeAt()).toString(16).substring(1).toUpperCase()})},exports.jsonToQuery=function(n,i){var r,o=[],s=i||function(t){return exports.escapeSymbol(t)};return t.each(n,function(t,n){if(e.isArray(t))for(r=t.length;r--;)o.push(n+"="+s(t[r],n));else o.push(n+"="+s(t,n))}),o.join("&")},exports}),define("ecom/common/api/nstip0905/json",function(){var exports={};return exports.parse=function(t){return new Function("return ("+t+")")()},exports}),define("ecom/common/api/nstip0905/page",function(){var exports={},t=document.documentElement,e=document.body,n="BackCompat"==document.compatMode?e:t;return exports.getScrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft},exports.getScrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},exports.getViewWidth=function(){return n.clientWidth},exports.getViewHeight=function(){return n.clientHeight},exports}),define("ecom/common/api/nstip0905/object",function(require){var t=require("./lang"),exports={};return exports.extend=function(t,e){for(var n=1,i=arguments.length;i>n;n++)if(e=arguments[n])for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},exports.clone=function(e){if(!e||"object"!=typeof e)return e;var n=e;if(t.isArray(e)){n=[];for(var i=0;i<e.length;i++)n.push(e[i])}else if("[object Object]"===Object.prototype.toString.call(e)&&"isPrototypeOf"in e){n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=exports.clone(e[r]))}return n},exports.each=function(t,e){var n,i,r;if("function"==typeof e)for(i in t)if(t.hasOwnProperty(i)&&(r=t[i],n=e.call(t,r,i),n===!1))break;return t},exports.isPlain=function(t){var e,n=Object.prototype.hasOwnProperty;if(!(t&&"[object Object]"===Object.prototype.toString.call(t)&&"isPrototypeOf"in t))return!1;if(t.constructor&&!n.call(t,"constructor")&&!n.call(t.constructor.prototype,"isPrototypeOf"))return!1;for(e in t);return void 0===e||n.call(t,e)},exports}),define("ecom/common/api/nstip0905/lang",function(){var exports={};return exports.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},exports.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},exports.inherits=function(t,e,n){var i,r,o=t.prototype,s=new Function;s.prototype=e.prototype,r=t.prototype=new s;for(i in o)r[i]=o[i];return t.prototype.constructor=t,t.superClass=e.prototype,"string"==typeof n&&(r.__type=n),t.extend=function(e){for(var n in e)r[n]=e[n];return t},t},exports}),define("ecom/common/api/nstip0905/fn",function(){var exports={};return exports.bind=function(t,e){var n=arguments.length>2?[].slice.call(arguments,2):null;return function(){var i=n?n.concat([].slice.call(arguments)):arguments;return t.apply(e,i)}},exports}),define("ecom/common/api/nstip0905/event",function(require){var t=require("./dom"),e=require("./fn"),exports={};return exports._listeners=exports._listeners||[],exports._eventFilter=exports._eventFilter||{},exports._eventFilter._crossElementBoundary=function(e,n){var i=n.relatedTarget,r=n.currentTarget;if(i!==!1&&r!=i&&(!i||"xul"!=i.prefix&&!t.contains(r,i)))return e.call(r,n)},exports._eventFilter.mouseenter=window.attachEvent?null:function(t,n,i){return{type:"mouseover",listener:e.bind(exports._eventFilter._crossElementBoundary,this,i)}},exports._eventFilter.mouseleave=window.attachEvent?null:function(t,n,i){return{type:"mouseout",listener:e.bind(exports._eventFilter._crossElementBoundary,this,i)}},exports.on=function(e,n,i){n=n.replace(/^on/i,""),e=t.g(e);var r,o=function(t){i.call(e,t)},s=exports._listeners,a=exports._eventFilter,l=n;return n=n.toLowerCase(),a&&a[n]&&(r=a[n](e,n,o),l=r.type,o=r.listener),e.addEventListener?e.addEventListener(l,o,!1):e.attachEvent&&e.attachEvent("on"+l,o),s[s.length]=[e,n,i,o,l],e},exports.un=function(e,n,i){e=t.g(e),n=n.replace(/^on/i,"").toLowerCase();for(var r,o,s,a=exports._listeners,l=a.length,c=!i;l--;)r=a[l],r[1]!==n||r[0]!==e||!c&&r[2]!==i||(o=r[4],s=r[3],e.removeEventListener?e.removeEventListener(o,s,!1):e.detachEvent&&e.detachEvent("on"+o,s),a.splice(l,1));return e},exports.getTarget=function(t){return t=t||window.event,t.target||t.srcElement},exports}),define("ecom/common/api/nstip0905/string",function(){var exports={},t=/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g;return exports.trim=function(e){return e?String(e).replace(t,""):""},exports.toCamelCase=function(t){return t.indexOf("-")<0&&t.indexOf("_")<0?t:t.replace(/[-_][^-_]/g,function(t){return t.charAt(1).toUpperCase()})},exports.format=function(t,e){t=String(t);var n=Array.prototype.slice.call(arguments,1),i=Object.prototype.toString;return n.length?(n=1==n.length?null!==e&&/\[object Array\]|\[object Object\]/.test(i.call(e))?e:n:n,t.replace(/#\{(.+?)\}/g,function(t,e){var r=n[e];return"[object Function]"==i.call(r)&&(r=r(e)),"undefined"==typeof r?"":r})):t},exports.escapeReg=function(t){return String(t).replace(new RegExp("([.*+?^=!:${}()|[\\]/\\\\])","g"),"\\$1")},exports}),define("ecom/common/api/nstip0905/browser",function(){var exports={};return exports.isGecko=/gecko/i.test(navigator.userAgent)&&!/like gecko/i.test(navigator.userAgent),exports.ie=/msie (\d+\.\d+)/i.test(navigator.userAgent)?document.documentMode||+RegExp.$1:void 0,exports.isStrict="CSS1Compat"==document.compatMode,exports.isWebkit=/webkit/i.test(navigator.userAgent),exports.opera=/opera(\/| )(\d+(\.\d+)?)(.+?(version\/(\d+(\.\d+)?)))?/i.test(navigator.userAgent)?+(RegExp.$6||RegExp.$2):void 0,exports}),define("ecom/common/api/nstip0905/dom",function(require){var t=require("./browser"),e=require("./string"),exports={};exports.g=function(t){return t?"string"==typeof t?document.getElementById(t):t:null},exports.contains=function(t,e){var n=exports.g;return t=n(t),e=n(e),t.contains?t!=e&&t.contains(e):!!(16&t.compareDocumentPosition(e))},exports.addClass=function(t,e){t=exports.g(t);for(var n=e.split(/\s+/),i=t.className,r=" "+i+" ",o=0,s=n.length;s>o;o++)r.indexOf(" "+n[o]+" ")<0&&(i+=(i?" ":"")+n[o]);return t.className=i,t},exports.removeClass=function(t,e){t=exports.g(t);for(var n,i,r=t.className.split(/\s+/),o=e.split(/\s+/),s=o.length,a=0;s>a;++a)for(i=0,n=r.length;n>i;++i)if(r[i]==o[a]){r.splice(i,1);break}return t.className=r.join(" "),t},exports.getAncestorByClass=function(t,n){for(t=exports.g(t),n=new RegExp("(^|\\s)"+e.trim(n)+"(\\s|$)");(t=t.parentNode)&&1===t.nodeType;)if(n.test(t.className))return t;return null},exports.q=function(t,n,i){var r,o,s,a,l=[],c=e.trim;if(!(t=c(t)))return l;if("undefined"==typeof n)n=document;else if(n=exports.g(n),!n)return l;if(i&&(i=c(i).toUpperCase()),n.getElementsByClassName)for(s=n.getElementsByClassName(t),r=s.length,o=0;r>o;o++)a=s[o],i&&a.tagName!=i||(l[l.length]=a);else for(t=new RegExp("(^|\\s)"+e.escapeReg(t)+"(\\s|$)"),s=i?n.getElementsByTagName(i):n.all||n.getElementsByTagName("*"),r=s.length,o=0;r>o;o++)a=s[o],t.test(a.className)&&(l[l.length]=a);return l},exports.hasClass=function(t,e){if(!t)return!1;if(!e)return!0;for(var n=t.className.split(/\s+/),i=0;i<n.length;i++)if(n[i]===e)return!0;return!1},exports.show=function(t){return t=exports.g(t),t.style.display="",t},exports.hide=function(t){return t=exports.g(t),t.style.display="none",t},exports.getDocument=function(t){return t=exports.g(t),9==t.nodeType?t:t.ownerDocument||t.document},exports.getComputedStyle=function(t,e){t=exports.g(t);var n,i=exports.getDocument(t);return i.defaultView&&i.defaultView.getComputedStyle&&(n=i.defaultView.getComputedStyle(t,null))?n[e]||n.getPropertyValue(e):""},exports._styleFixer=exports._styleFixer||{},exports._styleFilter=exports._styleFilter||[],exports._styleFilter.filter=function(t,e,n){for(var i,r=0,o=exports._styleFilter;i=o[r];r++)(i=i[n])&&(e=i(t,e));return e},exports._styleFilter[exports._styleFilter.length]={set:function(t,e){return e.constructor!=Number||/zIndex|fontWeight|opacity|zoom|lineHeight/i.test(t)||(e+="px"),e}},exports.getStyle=function(t,n){t=exports.g(t),n=e.toCamelCase(n);var i=t.style[n]||(t.currentStyle?t.currentStyle[n]:"")||exports.getComputedStyle(t,n);if(!i||"auto"==i){var r=exports._styleFixer[n];r&&(i=r.get?r.get(t,n,i):exports.getStyle(t,r))}return(r=exports._styleFilter)&&(i=r.filter(n,i,"get")),i},exports.getPosition=function(e){e=exports.g(e);var n,i,r=exports.getDocument(e),o=exports.getStyle,s=(t.isGecko>0&&r.getBoxObjectFor&&"absolute"==o(e,"position")&&(""===e.style.top||""===e.style.left),{left:0,top:0}),a=t.ie&&!t.isStrict?r.body:r.documentElement;if(e==a)return s;if(e.getBoundingClientRect){i=e.getBoundingClientRect(),s.left=Math.floor(i.left)+Math.max(r.documentElement.scrollLeft,r.body.scrollLeft),s.top=Math.floor(i.top)+Math.max(r.documentElement.scrollTop,r.body.scrollTop),s.left-=r.documentElement.clientLeft,s.top-=r.documentElement.clientTop;var l=r.body,c=parseInt(o(l,"borderLeftWidth")),u=parseInt(o(l,"borderTopWidth"));t.ie&&!t.isStrict&&(s.left-=isNaN(c)?2:c,s.top-=isNaN(u)?2:u)}else{n=e;do{if(s.left+=n.offsetLeft,s.top+=n.offsetTop,t.isWebkit>0&&"fixed"==o(n,"position")){s.left+=r.body.scrollLeft,s.top+=r.body.scrollTop;break}n=n.offsetParent}while(n&&n!=e);for((t.opera>0||t.isWebkit>0&&"absolute"==o(e,"position"))&&(s.top-=r.body.offsetTop),n=e.offsetParent;n&&n!=r.body;)s.left-=n.scrollLeft,t.opera&&"TR"==n.tagName||(s.top-=n.scrollTop),n=n.offsetParent}return s},exports.setStyle=function(t,n,i){var r;return t=exports.g(t),n=e.toCamelCase(n),(r=exports._styleFilter)&&(i=r.filter(n,i,"set")),r=exports._styleFixer[n],r&&r.set?r.set(t,i,n):t.style[r||n]=i,t},exports.setStyles=function(t,e){t=exports.g(t);for(var n in e)exports.setStyle(t,n,e[n]);return t};var n=exports.ready=function(){function t(){if(!t.isReady){t.isReady=!0;for(var e=0,n=o.length;n>e;e++)o[e]()}}function e(){try{document.documentElement.doScroll("left")}catch(n){return setTimeout(e,1),void 0}t()}function n(){if(!r)if(r=!0,"complete"===document.readyState)t.isReady=!0;else if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",t,!1);else if(document.attachEvent){document.attachEvent("onreadystatechange",i),window.attachEvent("onload",t);var n=!1;try{n=null==window.frameElement}catch(o){}document.documentElement.doScroll&&n&&e()}}var i,r=!1,o=[];return document.addEventListener?i=function(){document.removeEventListener("DOMContentLoaded",i,!1),t()}:document.attachEvent&&(i=function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",i),t())}),n(),function(e){t.isReady?e():o.push(e)}}();return n.isReady=!1,exports}),define("ecom/common/api/nstip0905/array",function(){var exports={};return exports.each=function(t,e,n){var i,r,o,s=t.length;if("function"==typeof e)for(o=0;s>o&&(r=t[o],i=e.call(n||t,r,o),i!==!1);o++);return t},exports.indexOf=function(t,e,n){var i=t.length;for(n=0|n,0>n&&(n=Math.max(0,i+n));i>n;n++)if(n in t&&t[n]===e)return n;return-1},exports}),define("ecom/common/api/nstip0905/main",function(require){var exports={};return exports.array=require("./array"),exports.dom=require("./dom"),exports.event=require("./event"),exports.fn=require("./fn"),exports.lang=require("./lang"),exports.string=require("./string"),exports.object=require("./object"),exports.page=require("./page"),exports.json=require("./json"),exports.url=require("./url"),exports.inherits=exports.lang.inherits,exports.g=exports.dom.g,exports.each=exports.array.each,exports.isString=exports.lang.isString,exports.on=exports.event.on,exports.un=exports.event.un,exports.q=exports.dom.q,exports.addClass=exports.dom.addClass,exports.removeClass=exports.dom.removeClass,exports.format=exports.string.format,exports.show=exports.dom.show,exports.hide=exports.lang.hide,exports.ready=exports.dom.ready,exports}),define("ecom/common/api/nstip0905/nstip",function(require){function t(t,e){var n=parseInt(e.main.style.left,10),i=parseInt(e.elements.arrow.style.left,10),r=h.g(S.leftLimiteDomId),o=h.dom.getAncestorByClass(t.target,S.leftLimiteDomClass),s=h.dom.getAncestorByClass(t.target,S.rightLimiteDomClass),a=n;if(r&&(a=parseInt(h.dom.getPosition(r).left,10)),o&&(a=parseInt(h.dom.getPosition(o).left,10)),s){var l=s.offsetWidth,c=e.main.offsetWidth;a=parseInt(h.dom.getPosition(s).left+l-c,10)}if(e.main.style.left=a+"px",e.elements.arrow.style.left=n+i-a+"px",r||o){var u=parseInt(h.dom.getPosition(e.main).left,10),c=parseInt(e.main.offsetWidth,10),i=parseInt(h.dom.getPosition(t.target).left,10);if(i>u+c-20){var f=i+20-c-u;e.main.style.left=a+f+5+"px",e.elements.arrow.style.left=c-25+"px"}}if(s){var u=parseInt(h.dom.getPosition(e.main).left,10),i=parseInt(h.dom.getPosition(t.target).left,10);if(u>i){var f=u-i;e.main.style.left=a-f-S.layerOffsetLeft+"px",e.elements.arrow.style.left=S.layerOffsetLeft+"px"}parseInt(e.main.style.left)<5&&(e.main.style.left="5px",e.elements.arrow.style.left=i-5+"px")}}function e(t,e){var n=parseInt(e.main.style.left,10),i=S.layerOffsetLeft||0;e.main.style.left=n-i+"px",e.elements.arrow.style.left=i+"px"}function n(t,e){var n=parseInt(e.main.style.left,10),i=S.layerOffsetLeft||0,r=parseInt(e.elements.arrow.style.left,10);e.main.style.left=n+i+"px",e.elements.arrow.style.left=r-i+"px"}function i(t){var e=S.statistics;if(e&&e[t]&&e[t].url){var n=window.bds||{},i="";n&&n.comm&&n.comm.qid&&(i=n.comm.qid);var r={qid:i,url:window.document.location.href,timestamp:+new Date};_=e[t].url,h.object.extend(r,e[t].query||{}),T(r)}}function r(r,o){var s="bl",a=r.target.getAttribute("data-tooltips");a&&(s=/[trblc]{2}/.test(a)?a:"1"),"bc"===s&&t(r,o),"bl"===s&&e(r,o),"br"===s&&n(r,o),(h.dom.hasClass(r.target,"icon-certify")||h.dom.hasClass(r.target,"icon-personal"))&&i("identity")}function o(t,e){var n="",i="",r=t.target;h.dom.addClass(e.main,"ecl-ui-tip-ps"),h.dom["true"===t.target.getAttribute("data-tip-limite")?"addClass":"removeClass"](e.main,"ecl-ui-tip-ps-limite-width");var o=f(r,"data-renzheng");o&&(n=c(o),i=u(o)),e.title=n,e.content=i}function s(t,e){var n={},i="";if(t){var r=[];for(var o in t)"billing"!==o&&"url"!==o&&"text"!==o&&r.push("'"+o+"'"+":"+"'"+t[o]+"'");n={billing:t.billing&&' class="EC_PP"',url:t.url,text:t.text||e,options:r.join(",")},i=a("a",n)}return i}function a(t,e){return e=e||{},h.format(E[t],e)}function l(t,e){var n="";if(e){var i=s(e.a,b),r=a("creditblock",{credit:e.credit});n=a(t,{text:e.text,a:i,creditblock:r,img:e.img})}return n}function c(t){var e=a("title",{title:t.title}),n=s(t.favorite,w),i=s(t.appraise,x),r=a("rightTop",{favorite:n,appraise:i,and:n&&i&&"&nbsp|&nbsp"}),o=""+e+r;return o}function u(t){var e=l("medical",t.medical),n=l("identity",t.identity),i=l("personal",t.personal),r=l("airline",t.airline),o=l("dfa",t.dfa),c=a("list",{medical:e,identity:n,airline:r,dfa:o,personal:i}),u=s(t.report,C),f=a("rightBottom",{report:u}),d=""+c+f;return d}function f(t,e){var n=t.getAttribute(e);return n&&h.json.parse(n)}function d(t){var e=document.createElement("link");e.setAttribute("rel","stylesheet"),e.setAttribute("type","text/css"),e.setAttribute("href",t);var n=document.getElementsByTagName("head")[0]||document.body;n.appendChild(e),n=null,e=null}function m(t){h.ready(function(){if(!p){var e="http://s1.bdstatic.com/r/www/cache/biz/ecom/common/api/nstip0905/nstip.css";d(e),h.object.extend(S,t||{});var n=require("./tip");p=new n({mode:"over",triggers:S.triggers,arrow:"bl",hideDelay:S.hideDelay,offset:{x:S.layerOffsetLeft,y:S.layerOffsetTop},onShow:function(t){r(t,this)},onBeforeShow:function(t){o(t,this)}}).render()}})}var p,h=require("./main"),g="\u5df2\u7ecf\u901a\u8fc7",v="\u767e\u5ea6\u4fe1\u8a89\u661f\u7ea7",y="\u5177\u6709",b="\u767e\u5ea6\u8eab\u4efd\u8ba4\u8bc1",w="\u6536\u85cf",x="\u8bc4\u8bba",C="\u4e3e\u62a5",E={a:'<span#{billing}><a target="_blank"  href="#{url}">#{text}</a></span>',title:'<strong class="ecl-ui-tip-ps-title">#{title}</strong>',rightTop:'<div class="ecl-ui-tip-ps-right ecl-ui-tip-ps-right-top">#{favorite}#{and}#{appraise}</div>',list:"<ul>#{medical}#{airline}#{dfa}#{identity}#{personal}</ul>",medical:'<li class="icon-medical"><span>#{text}</span></li>',identity:'<li class="icon-identity">'+g+"#{text}#{a}"+"</li>"+"#{creditblock}",personal:'<li class="icon-empty"><img height=16 width=16 src="#{img}">'+g+"#{text}#{a}"+"</li>#{creditblock}",creditblock:'<li class="icon-empty"><div class="ecl-ui-tip-ps-level ecl-ui-tip-ps-level#{credit}">'+v+"</div>"+"</li>",airline:'<li class="icon-empty"><img height=16 width=16 src="#{img}">'+y+"#{a}\u7684#{text}</li>",dfa:'<li class="icon-empty"><img height=16 width=16 src="#{img}">#{text}</li>',rightBottom:'<div class="ecl-ui-tip-ps-right ecl-ui-tip-ps-right-bottom">#{report}</div>'},S={triggers:"ec-ui-tip",leftLimiteDomId:"ec_im_container",leftLimiteDomClass:"ec_im_container_left",rightLimiteDomClass:"ec_im_container_right",layerOffsetLeft:5,layerOffsetTop:5,hideDelay:500},_="",T=function(){var t=[],e=function(t){return encodeURIComponent(t)};return function(n){var i=t.push(new Image)-1;t[i].onload=t[i].onerror=function(){t[i]=t[i].onload=t[i].onerror=null,delete t[i]};var r=_+"?"+h.url.jsonToQuery(n,e);t[i].src=r}}();return{init:m}});