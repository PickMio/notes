<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0306)http://zhidao.baidu.com/html/map/page.html?iknowflg=1&newmap=1&l=17&t=B_NORMAL_MAP&c=12950089.48,4832532.86&b=12950089.48,4832286.86&i=0|-1|-1&s=s%26addr%3D0%26wd%3D%25E7%258E%25AF%25E7%2590%2583%25E5%258C%2597%25E7%25BE%258E%25E8%2580%2583%25E8%25AF%2595%25E9%2599%25A2%26c%3D131%26src%3D0&t=1365904870968 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge">

<title>百度地图</title>
<meta http-equiv="imagetoolbar" content="no"> 
<style type="text/css">
html,body{overflow:hidden}*{font-size:12px;font-family:arial,sans-serif}body{margin:0;color:#333;background:#fff}form,p,ol,ul,li,dl,dt,dd,h1,h2,h3,h4{margin:0;padding:0}ul,ol{list-style:none}img,table{border:0}a{color:#00c;text-decoration:underline;outline:none}.important{font-weight:bold}#wrapper{position:relative;overflow:hidden;margin-left:10px;zoom:1}#header{height:24px;background:url(http://map.baidu.com/iknow/img/bg_repeat.gif) repeat-x}#header span{white-space:nowrap}#search{width:740px;height:56px;padding:7px 0 1px 0}#tools{height:23px;color:#333;background:#e5ecf9;padding-left:8px;white-space:nowrap;position:relative;clear:both}#resPanel{width:210px;position:absolute;top:0;right:0;background:#fff;overflow-x:hidden;overflow-y:hidden;z-index:10;margin:2px 5px 0 0}#topCityPanel{width:100%;margin:0 0 5px 0;padding:0;height:20px;border-bottom:1px solid #cac9c8}#MapHolder{background:#ccc;left:0;position:relative;margin-right:224px;margin-top:2px;z-index:0}#MapInfo{margin:0;width:100%;padding:0;overflow-x:hidden;overflow-y:auto;height:284px;position:relative}#footer{color:#77c;text-align:center;line-height:24px}#footer a{color:#77c}.nav{float:left;padding-left:8px;line-height:24px}.nav a{margin-right:4px}.userbar{float:right;padding:3px}.userbar img{vertical-align:middle}.logo{width:152px;float:left;text-align:center;margin-top:4px}.search_con{width:450px;float:left;margin-left:4px}.tab{height:23px;padding-left:10px;margin-bottom:-3px;position:relative;z-index:3;overflow:hidden}.tab li{width:55px;height:23px;line-height:20px;font-size:13px;text-align:center;color:#333;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -60px 0;float:left;margin-right:5px;cursor:pointer}.tab li.on{font-weight:bold;color:#fff;background-position:0 0}.search_bg{width:580px;height:34px;position:relative}.search_input_bg{float:left;background:url(http://map.baidu.com/iknow/img/bg_repeat.gif) repeat-x 0 -34px}.search_bg .j{height:1px;overflow:hidden;border-left:1px solid #fff;border-right:1px solid #fff;margin-bottom:3px}.search_input{width:300px;*width:302px;height:34px;float:left}.search_input1{float:left;padding-top:6px}.search_input1 input{vertical-align:middle;*padding-top:2px}.search_input1 span{vertical-align:middle}#curCityText{text-decoration:none}.radio_title{margin:0 0 0 5px}.input1,.input2,.input3{font:16px arial}.input1{width:276px;*width:275px;margin-left:6px}.input2{width:124px;*width:123px;margin-left:6px}.input3{width:124px;*width:123px}.black{color:#000;font-size:12px}.help{width:35px;position:absolute;right:0;top:12px}#selCity{padding:0;position:absolute;width:100%}#curCity{font-size:12px}.sel_rb{width:4px;height:20px;float:left;margin-top:-4px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -276px -270px}.sel_container{float:left;margin-right:3px}.tool{position:absolute;right:288px;display:block;height:25px;padding-top:1px}.tool a{color:#68c;margin:2px 6px 0 0;padding-left:18px;line-height:18px;zoom:1;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat}.tool a:hover{color:#de7a0f}#rcInfo{color:#6688cc;float:right;padding:4px 10px 0 0}#mark{background-position:26px -25px}#measure{background-position:-33px -25px}#capture{background-position:-76px -25px}#print{background-position:-122px -25px}#link{background-position:-169px -25px}#mark:hover{background-position:26px -48px}#measure:hover{background-position:-33px -48px}#capture:hover{background-position:-76px -48px}#link:hover{background-position:-169px -48px}#print:hover{background-position:-122px -48px}.tool .splitter{width:2px;height:19px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -179px;vertical-align:-4px}.txtPanel_con{color:#333;padding:10px;line-height:18px;zoom:1}.city{margin:3px 0;position:relative}.city .menu{padding-right:12px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right 6px;position:absolute}.city .popup{width:240px;border:1px solid #999;position:absolute;left:0;top:20px}.city .popup .holder{width:235px;height:170px;margin-top:5px;overflow-y:auto}.city .close{line-height:25px;text-align:center;background:#f0f0f0;margin-top:5px}.city dt{height:20px;line-height:20px;padding-left:10px}.city dt a{padding-left:15px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -270px -14px}.city dt.open a{background-position:-270px -34px}.city dd{padding-left:35px;display:none}.bus{zoom:1}.bus_line{margin-bottom:3px;font-weight:bold}.bus_input{width:157px;font:16px arial}.bus dt{line-height:20px}.bus dt a{padding-left:15px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -270px -13px}.bus dt.open a{background-position:-270px -33px}.bus dd{padding-left:5px;display:none}.bus dd.ins{padding:0}.bus table{margin:5px 0 10px}table.station,table.line{margin-left:13px}.bus dd table.station{margin-left:13px}table.info{background:#cdcdcd;width:100%}.bus table th{line-height:22px;font-weight:normal;text-align:left;padding:0 0 0 8px;color:#434343;vertical-align:top}.bus table td{line-height:22px;color:#202020;background:#fff;padding:0 8px}table.info th{width:105px;background:#f4f4f4}table.station th,table.line th{width:auto;padding:0 0 0 1px;white-space:nowrap;*padding-top:2px}table.line td{padding:0 0px 0 5px}table.station tr.selected th,table.station tr.selected td,table.line tr.selected th,table.line tr.selected td{background-color:#f4f4f4}img.list_arrow{vertical-align:1px;width:8px;height:8px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -108px -190px}.line img.list_arrow{*vertical-align:-1px}.station img.list_arrow{margin-right:5px}table.line th.list_arrow{width:10px}.select dl{margin-bottom:20px}.select dt{padding-left:26px;background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat left;zoom:1}.select dt div{width:212px;height:23px;padding:2px;margin-bottom:3px}.select dt div.on{background:#ffd4ce}.select dt .ipt{width:158px;background-color:rgb(235,235,228)}.select dd{color:#5a5a5a;padding-left:27px;height:auto}.select dd select{width:210px;color:#333}.select .subm{clear:both;text-align:center}.select .which_1{background-position:0 2px;*background-position:0 4px}.select .which_2{clear:both;background-position:0 -24px}.select .moreCity{clear:both}.select .city_1{color:#000000;padding-left:28px;margin-top:-5px}.selectList{overflow-y:scroll;overflow-x:hidden;color:#000000;border:#828790 1px solid;font-size:12px;width:164px;text-align:left;display:block;height:126px}.cityList{overflow:hidden;font-size:12px;width:210px;text-align:left;height:129px}.selectList ul{width:148px;cursor:default}.selectList li{padding-left:2px;height-line:20px}.selectList li .addr{padding-left:12px;margin-top:-4px;width:135px}table.result{table-layout:fixed;width:194px}.result{margin-top:5px}.result th{width:22px;text-align:left;vertical-align:top;padding-top:3px}.result th div{width:19px;height:25px;background:url(http://map.baidu.com/iknow/img/markers.png) no-repeat;margin-top:1px;*margin-top:-1px}.result th div.bl_icon{background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -103px -212px}.result th div.sl_icon{background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -158px -213px}.result th div.gj{width:16px;height:16px;background:#df1b00}.result th div.icon{cursor:pointer}.result th div#no1{background-position:-23px 0}.result th div#no2{background-position:-23px -25px}.result th div#no3{background-position:-23px -50px}.result th div#no4{background-position:-23px -75px}.result th div#no5{background-position:-23px -100px}.result th div#no6{background-position:-23px -125px}.result th div#no7{background-position:-23px -150px}.result th div#no8{background-position:-23px -175px}.result th div#no9{background-position:-23px -200px}.result th div#no10{background-position:-23px -225px}.result td{vertical-align:top;padding:3px 0 12px 3px;font-size:12px;line-height:160%}.result td span{color:#999}.result td.focus,.result div.focus{background:#f0f0f0}.result dt{padding:3px 0}.result dt a{padding-left:15px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -270px -13px}.result dt span{color:#434343;padding-left:15px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -270px -33px;cursor:pointer;display:none}.result dd{padding-left:15px;display:none}.result dl.on dd{display:block}.result dl.on dt a{display:none}.result dl.on dt span{display:inline}.result .detail{color:#77c}.result .pic{border:1px solid #3a31df;margin:3px 5px 0 0;float:left}.result_holder{width:200px;height:434px;padding:3px 10px 0 0;overflow-x:hidden;overflow-y:auto;position:relative}.special{zoom:1}.page{text-align:center;line-height:24px}.page a,.page span{margin:0 1px}.stop th{width:27px;height:27px;background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat}.stop .modify{width:40px;text-align:right}.stop .modify a{color:#b4b4b4}.stop .ipt{width:96%}.stop .btn{width:40px}.stop .no1{background-position:0 2px}.stop .no2{background-position:0 -24px}.stop_add{padding-left:25px}.stop_add a{padding-left:15px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -119px 4px}.route_total{padding:8px 0}.route_total .rp{margin-top:-3px;float:right}.walk_tips{color:#6688cc;margin-top:10px;display:none}.route{margin-top:10px;width:190px;*margin-top:0}.route li{margin-bottom:10px;cursor:pointer;position:relative;zoom:1}.route .top{height:17px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -102px;font-size:0;zoom:1;overflow:hidden}.route .top p{height:13px;color:#fff;font-weight:bold;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -102px;padding:1px 0 3px 0;text-align:center;width:15px}.route span.uf_btn,.route span.f_btn{position:absolute;width:16px;height:18px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -350px;cursor:pointer;line-height:14px;right:10px;top:14px;z-index:99}.route span.f_btn{background-position:-22px -132px}.route .con{color:#666;border-left:2px solid #ccc;border-right:2px solid #ccc;margin-top:-2px;margin-bottom:-8px}.route .con .way{font-size:14px;line-height:20px;padding:0 80px 0 20px;font-weight:bold;color:#b2b2b2;position:relative;zoom:1;top:-8px}.route .con .km{text-align:right;margin-top:-4px;padding-top:3px;position:absolute;right:25px;bottom:0;font-weight:normal;color:#b3b3b3;width:100%}.route .con .debug{display:none;text-align:right;padding-right:5px;margin-top:-4px;padding-top:3px;*padding-right:37px}.route .bottom{height:8px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -119px;clear:both}.route .bottom p{height:8px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -119px;margin-right:30px}.route .on .top{background-position:right -72px}.route .on .top p{background-position:0 -72px}.route .on span.uf_btn{background-position:right -310px}.route .on span.f_btn{background-position:right -330px}.route .on .con{border-color:#9cb5ff;margin-bottom:-8px}.route .on .way{color:#6689cb}.route .on .bottom{background-position:right -89px}.route .on .bottom p{background-position:0 -89px}.route .info .sel{background:#f0f0f0;cursor:default};.route .info table{width:100%}.route .info{color:#000;border-top:2px solid #ccdafd;display:none;margin-top:-2px}.route .info h3{height:24px;font-size:12px;color:#fff;padding:5px 0 0 25px}.route .info h3 span{display:block;float:left;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -160px;margin-left:2px}.route .info h3 strong{display:block;line-height:19px;padding:0 0 5px 8px;margin-right:8px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -160px}.route .info h3.no1{background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat 2px 4px;border-bottom:1px solid #ccc}.route .info h3.no2{background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat 2px -22px}.route .info th{border-bottom:1px solid #ccc;padding:5px 0;line-height:20px;text-align:left;vertical-align:top}.route .info th p{padding-left:25px}.route .info th div{width:25px;height:18px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat;float:left}.route .info th .step{background-position:-126px -211px}.route .info th .bybus{background-position:-99px -211px}.route .info th .bysub{background-position:-155px -211px}.route .info th .byship{background-position:-99px -211px}.route .info td{border-bottom:1px solid #ccc;padding:5px;line-height:20px;vertical-align:top;width:100%}.route .info .focus th,.route .info .focus td{background:#eaedf5}.route .info .km2 span{color:#666;float:right;margin-top:-20px}.route .print{text-align:right;line-height:20px;padding-right:5px}.route .also_t{color:#666;float:left}.route .also a{white-space:nowrap}.route .also{padding-left:55px}.route_type{height:26px;line-height:26px;padding:0 0 0 8px;background:url(http://map.baidu.com/iknow/img/bg_repeat.gif) repeat-x 0 -76px}.route_type label{cursor:pointer}.route_tips{margin-top:20px;color:#808080}.route_back{margin-top:10px}.drive_total{padding:0 0 8px 0;text-align:right}.drive .top{height:6px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -238px}.drive .top p{height:6px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -238px;margin-right:30px}.drive .con{color:#666}.drive .con .km{height:28px;line-height:28px;text-align:left;padding-left:5px;background-color:#e4ebf8}.drive .con .via{padding:3px 2px 3px 0}.drive .con .via table{width:80%}.drive .bottom{height:8px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -89px;clear:both}.drive .bottom p{height:8px;overflow:hidden;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -89px;margin-right:30px}.drive .info th{width:30px;font-weight:normal;vertical-align:top;border-bottom:1px solid #ccc;padding:5px 0;line-height:20px}.drive .info td{border-bottom:1px solid #ccc;padding:5px 10px 5px 0;line-height:20px}.drive .info td span{color:#2e2e2e;font-weight:bold}.drive .info .focus th,.drive .info .focus td{background:#eaedf5}.drive .info{color:#000;border-top:1px solid #ccc}.drive .info h3{height:24px;font-size:12px;color:#fff;padding:5px 0 0 25px;border-bottom:1px solid #ccc}.drive .info h3 span{display:block;float:left;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right -160px;margin-left:2px}.drive .info h3 strong{display:block;line-height:19px;padding:0 0 5px 8px;margin-right:8px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat 0 -160px}.drive .info .arr strong{}.drive .info h3.no1{background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat 2px 4px;cursor:pointer}.drive .info h3.no2{background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat 2px -22px;cursor:pointer}.drive .info tr{cursor:pointer}.drive .info tr.sel{background:#f0f0f0;cursor:default}.drive .info .close{padding-left:15px;background:transparent url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat scroll -270px -13px}.drive .info .open{padding-left:15px;background:transparent url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat scroll -270px -33px}.drive .print{text-align:right;line-height:20px;padding-right:5px}.drive dl{margin-top:5px}.drive dt{padding-left:26px;background:url(http://map.baidu.com/iknow/img/trans_icons.png) no-repeat}.drive dd{color:#5a5a5a;padding-left:25px;height:auto}.drive .subm{clear:both;padding-left:25px;width:120px;height:25px;margin-top:5px}.drive .subm input{width:60px}.drive .which_1{background-position:0px 2px}.drive .which_2{clear:both;background-position:0px -24px}.drive .city input{width:70px;font:16px arial}.drive .addr{padding-top:-5px}.drive .addr input{width:130px;font:16px arial}.drive span a{color:#6587ce}.map_popup{position:absolute;z-index:20}.map_popup .popup_main{border:1px solid #8ba4d8;z-index:2;position:absolute;width:100%;height:100%;background:#fff;overflow:hidden}.map_popup .poput_shadow{width:100%;height:100%;background:#505050;border:1px solid #505050;position:absolute;left:2px;top:3px;z-index:1;opacity:0.6;filter:alpha(opacity=60)}.map_popup .title{background:url(http://map.baidu.com/iknow/img/popup_title.gif);height:24px;line-height:24px;font-size:12px;font-weight:bold;color:#6688cc;padding-left:10px}.map_popup button{position:absolute;top:6px;right:4px;width:12px;height:12px;background:url(http://map.baidu.com/iknow/img/popup_close.gif) no-repeat;border:0;cursor:pointer}.map_ctrl{position:absolute;z-index:400;cursor:pointer;height:20px;background-image:url(http://map.baidu.com/iknow/img/bgs.gif);background-repeat:no-repeat}.siv_note{color:#808080;padding-top:10px;line-height:16px}.siv_sec{margin-top:10px}.siv_lst{line-height:18px}.siv_lst a{margin-right:5px;cursor:pointer}.siv_title{margin-bottom:1px}.siv_txt{width:120px;color:#808080}.siv_txt_hover{color:black}.siv_lnote{font-size:14px;padding:10px 0}.siv_resultext{font-size:14px;padding:10px 0 0 0;position:relative}.siv_resultext span{font-size:14px}.siv_resultext a{position:absolute;right:3px}.siv_resultext.nr{color:#e60000}.country strong{font-size:14px}.country p{line-height:160%;margin-bottom:10px}.country p span{padding-left:20px;display:block}.country p font a{margin-right:10px}.sel_city{margin:10px;*margin-right:5px}.sel_city td{padding:1px 0;vertical-align:top;line-height:150%;font-size:12px}.sel_city .city_submit{margin-left:5px;*vertical-align:bottom}.sel_city form{margin-bottom:10px}.sel_city span{color:#999}.sel_city a{margin-right:3px}.sel_city .city_text{width:120px}#shad div{position:absolute}#shad_v{width:5px;right:224px;top:2px;background:url(http://map.baidu.com/iknow/img/shad_v.png) repeat-y 0 0;filter:progid:dximagetransform.microsoft.alphaimageloader(sizingmethod="scale",src="http://map.baidu.com/iknow/img/shad_v.png");font-size:0;*background:none}#shad_h{width:100px;height:5px;left:0;top:2px;background:url(http://map.baidu.com/iknow/img/shad_h.png) repeat-x 0 0;filter:progid:dximagetransform.microsoft.alphaimageloader(sizingmethod="scale",src="http://map.baidu.com/iknow/img/shad_h.png");font-size:0;*background:none}.dest_icon{display:block;height:34px;background:url(http://map.baidu.com/iknow/img/dest_markers.png) no-repeat -42px 0}.dest1{background-position:-42px -34px}.dest_icon_right{display:block;margin-left:26px;padding:7px 22px 0 0;height:23px;background:url(http://map.baidu.com/iknow/img/dest_markers.png) repeat-x right -70px}.dest_text{display:inline-block;vertical-align:4px;padding-left:5px;*vertical-align:1px}.dest_icon_right_ie6{left:26px;padding:7px 22px 0 0;height:23px;position:absolute;overflow:hidden}.dest_icon_right_ie6 div{z-index:-1;height:100px;width:300px;position:absolute;top:-70px;right:0;filter:progid:dximagetransform.microsoft.alphaimageloader(sizingmethod="crop",src="http://map.baidu.com/iknow/img/dest_markers.png")}.dest_text_ie6{display:inline-block;line-height:17px;padding-left:5px}.dest_icon_left_ie6{overflow:hidden;position:absolute;height:34px;width:26px}.dest_icon_left_ie6 div{position:absolute;left:-43px;height:100px;width:300px;filter:progid:dximagetransform.microsoft.alphaimageloader(sizingmethod="crop",src="http://map.baidu.com/iknow/img/dest_markers.png")}.dest1 div{top:-34px}#loading{position:absolute;border:1px solid #6788cd;background:#fff;padding:3px 8px;color:#6689cb;line-height:18px;z-index:999999;font-weight:bold;display:none}#tipping{position:absolute;background:#FFFFCE;padding:2px;color:#6F6F6F;line-height:16px;z-index:999999;display:none;}.city_list{line-height:18px}.city_list li{width:24%;float:left}.iw_poi_content{padding-top:10px}.iw_poi_content .iw_poi_inter{width:240px}.iw_poi_content p{margin:0 0 3px 0}.iw_poi_title{font-size:14px;color:#cc5522;font-weight:bold;width:230px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.iw_poi_title a{margin-left:10px;font-weight:normal}.iw_poi_inter{margin-top:20px}.iw_poi_inter input{vertical-align:middle}.nav_tab{background:url(http://map.baidu.com/iknow/img/navbg1.gif) repeat-x scroll left bottom;height:26px;margin-bottom:6px;padding-left:10px;width:230px;*margin-bottom:10px}.nav_tab span{color:#261cdc;text-decoration:underline;border-bottom:1px solid #ccc;cursor:pointer;height:24px;float:left;overflow:hidden;padding:1px 7px 0 8px;line-height:24px}.nav_tab span.hover{color:black;text-decoration:none;border-bottom:1px solid #fff;border-left:1px solid #ccc;border-top:1px solid #ccc;border-right:1px solid #ccc;padding:0px 7px 0 7px}.nav_tab_content{padding-left:18px}#iw_tab2{padding-left:10px}.nav_tab_content p{margin-bottom:8px;line-height:24px}.nav_tab_content .ic{text-align:center;margin-right:18px}.nav_tab_content .ic input.lst{margin-left:20px}.change_rs_title{padding-top:6px}a.link_light{color:#7979cc}.iw_cate_list{margin-top:10px}.iw_cate_list a{margin-left:6px}.iw_cate_list a.first{margin-left:0}.iw_trans_content{margin-bottom:40px}.iw_trans_nav{background:#eaf2ff}.sugg_q,.j_b{margin-bottom:10px}.nr_p{margin-top:0px}.nr_suggest{margin-top:100px}.nr_suggest ul{margin-left:36px}.nr_suggest ul li{list-style:disc outside}.trans_disabled{color:#9c9d99}.nr_sc{float:right;margin-right:20px}.nr_cn{font-size:14px;font-weight:bold}.nr_hr{margin:6px 0 14px 0;*margin:0 0 8px 0;clear:both}.nr_utility{color:#999}.nr_utility a{color:rgb(119,119,204)}.nr_kw,.r_kw{color:#c60a00}#aChangeRange{white-space:nowrap}.arrowLink{padding-right:11px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat right 6px;zoom:1}.sug{border:1px solid #817f82;position:absolute;-moz-user-select:none}.sug td{font-family:arial;font-size:13px}.spoi1{color:#c0c0c0;font-size:13px}.mo{background-color:#36c;color:#fff}.sug b{font-size:13px}.mo span{color:#fff}.ml{background-color:#fff;color:#000}#sugoff{background:#fbf2b0 none repeat scroll 0 0;height:22px;position:absolute;font-size:13px}#moreCityPop{clear:both;position:relative}.mc_list{margin:5px 0 0 10px}.mc_list li{line-height:24px}.mc_list li a{background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -270px -12px;padding-left:14px;*background-position:-270px -14px}.mc_list li a.fold{background-position:-270px -32px;*background-position:-270px -34px}.mc_list .mc_list_city{margin-left:26px}.mc_list .mc_list_city li{line-height:20px}.mc_list .mc_list_city li a{background:none;padding:0}.detail_title{font-size:14px;font-weight:bold;margin-bottom:6px}.detail_container{margin-top:10px}.detail_container .title{font-weight:bold}.mt10{margin-top:10px}.mt5{margin-top:5px}.hasTB{border-top:1px solid #bfd0f5}.substop_detail table{border-collapse:collapse;margin-left:45px}.ss_round,.ss_busstop{width:25px;background:url(http://map.baidu.com/iknow/img/substa_detail.gif) no-repeat}.ss_round{background-position:0 -44px}.ss_busstop{background-position:-50px -44px}.ss_busstop_t{color:#6688cc}.ss_time_info{border-collapse:collapse;border:0;padding:0;text-align:center}.ss_time_info.bj .col_dir{width:140px;text-align:left}.bj .col_dirt{padding-top:2px;text-align:left}.bj img{background:url(subways/images/bj_sqr_lines.gif) no-repeat;width:12px;height:11px;margin:3px 6px -1px 1px}.bj .l_1{background-position:0 0px}.bj .l_2{background-position:0 -30px}.bj .l_5{background-position:0 -60px}.bj .l_l8{background-position:0 -90px}.bj .l_10{background-position:0 -120px}.bj .l_13{background-position:0 -150px}.bj .l_8t{background-position:0 -180px}.bj .l_air{background-position:0 -210px}.ss_time_info .col_time{width:50px}.ss_exit_0,.ss_exit_1,.ss_exit_2,.ss_exit_3{margin-top:5px;float:left;width:37px;height:38px;background:url(http://map.baidu.com/iknow/img/substa_detail.gif) no-repeat}.ss_exit_1{background-position:-50px 0}.ss_exit_2{background-position:-100px 0}.ss_exit_3{background-position:-150px 0}div.poi_bus_info{background:white}.poi_bus_show,.poi_bus_list{margin-top:5px}a.btn_bus_show,a.btn_bus_hide{zoom:1;color:rgb(38,28,220);line-height:17px;padding-left:13px;background-image:url(http://map.baidu.com/iknow/img/bgs.gif);background-repeat:no-repeat}a.btn_bus_show{background-position:-270px -12px}a.btn_bus_hide{background-position:-270px -32px;text-decoration:none;color:#a4a4a4}.poi_bus_list ul li{padding-left:13px}.poi_bus_list ul a{background:none;padding:0}.nb_dis{float:right;margin-right:5px}.ext_ptbl{border-collapse:collapse;margin:5px 5px 0 0;width:100%;text-align:center;border:1px solid #dcdcdc}.ext_ptbl td,.ext_ptbl th{border:1px solid #dcdcdc;height:22px}.ext_ptbl th{background:#f2f2f2;font-weight:normal}.ext_ptbl sup{font-size:10px}div#weat{padding-left:0}div#weat p,div#weat td{font-size:12px}.city_close{background:url(http://map.baidu.com/iknow/img/cbclose.gif);width:12px;height:12px;border:0;float:right;margin:10px 2px 0 0;cursor:pointer}.cap_handler{position:absolute;height:7px;width:7px;background:#000;font-size:0}#cap_size{background:#202020;font-size:14px;position:absolute;color:#fff;padding:3px}#cap_btn_container{background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat -5px -184px;height:26px;width:88px;position:absolute;z-index:800}#cap_btn_container div{position:absolute;cursor:pointer;width:20px;height:20px;top:3px;background:none}#cap_btn_cancel{left:7px}#cap_btn_show{left:34px}#cap_btn_save{left:61px}#cap_btn_container div.hover{background-image:url(http://map.baidu.com/iknow/img/bgs.gif);background-repeat:no-repeat}#cap_btn_cancel.hover{background-position:-12px -213px}#cap_btn_show.hover{background-position:-39px -213px}#cap_btn_save.hover{background-position:-66px -213px}#cmitem_zoomin,#cmitem_zoomout,#cmitem_center{padding-left:20px;background:url(http://map.baidu.com/iknow/img/bgs.gif) no-repeat}#cmitem_zoomin{background-position:-264px -180px;*background-position:-264px -181px}#cmitem_zoomout{background-position:-264px -198px;*background-position:-264px -199px}#cmitem_center{background-position:-264px -216px;*background-position:-264px -217px}@media print{#shad,#tools,#header{display:none}#resPanel,#MapHolder{position:relative;width:100%;margin:0;float:left}#resPanel{clear:both;float:none}}.BMap_{}.bmap_div{margin:0;padding:0;border:none}.BMap_img{margin:0;padding:0;border:none}.BMap_mask{background:transparent url(http://map.baidu.com/iknow/bmap/blank.gif);z-index:900}.BMap_button{cursor:pointer}.BMap_zoomer{background-image:url(http://map.baidu.com/iknow/bmap/mapctrls.gif);background-repeat:no-repeat;overflow:hidden;font-size:1px;position:absolute;width:7px;height:7px}.BMap_stdMpCtrl{z-index:1100;width:52px}.BMap_stdMpCtrl,.BMap_stdMpCtrl div{position:absolute}.BMap_stdMpPan{width:37px;height:57px;overflow:hidden;background:url(http://map.baidu.com/iknow/bmap/mapctrls.png) no-repeat}.BMap_ie6 .BMap_stdMpPan{background:none}.BMap_ie6 .BMap_smcbg{left:0;width:74px;height:448px;filter:progid:dximagetransform.microsoft.alphaimageloader(src='styles/bmap/mapctrls.png')}.BMap_ie6 .BMap_stdMpPanBg{z-index:-1}.BMap_stdMpPan .BMap_button{height:16px;width:16px}.BMap_panN,.BMap_panW,.BMap_panE,.BMap_panS{overflow:hidden}.BMap_panN{left:9px;top:0}.BMap_panW{left:0px;top:19px}.BMap_panE{left:19px;top:19px}.BMap_panS{left:9px;top:38px}.BMap_stdMpZoom{width:37px;top:59px;overflow:hidden}.BMap_stdMpZoom .BMap_button{width:18px;height:19px;left:9px;overflow:hidden;background-image:url(http://map.baidu.com/iknow/bmap/mapctrls.png);background-repeat:no-repeat}.BMap_ie6 .BMap_stdMpZoom .BMap_button{background:none}.BMap_stdMpZoomIn{background-position:-9px -57px}.BMap_stdMpZoomOut{background-position:-9px -293px;bottom:0px}.BMap_ie6 .BMap_stdMpZoomIn div{left:-9px;top:-57px}.BMap_ie6 .BMap_stdMpZoomOut div{left:-9px;top:-293px}.BMap_stdMpSlider{width:37px;top:75px}.BMap_stdMpSliderBgTop{width:37px;overflow:hidden;background:url(http://map.baidu.com/iknow/bmap/mapctrls.png) no-repeat 0 -76px}.BMap_stdMpSliderBgBot{height:9px;width:37px;top:124px;overflow:hidden;background:url(http://map.baidu.com/iknow/bmap/mapctrls.png) no-repeat 0 -284px}.BMap_ie6 .BMap_stdMpSliderBgTop,.BMap_ie6 .BMap_stdMpSliderBgBot{background:none}.BMap_ie6 .BMap_stdMpSliderBgTop div{top:-76px}.BMap_ie6 .BMap_stdMpSliderBgBot div{top:-284px}.BMap_stdMpSliderMask{height:100%;width:24px;left:5px;cursor:pointer}.BMap_stdMpSliderBar{height:13px;width:22px;left:7px;top:80px;overflow:hidden;background:url(http://map.baidu.com/iknow/bmap/mapctrls.png) no-repeat 0 -312px}.BMap_stdMpSliderBar.h{background:url(http://map.baidu.com/iknow/bmap/mapctrls.png) no-repeat 0 -325px}.BMap_ie6 .BMap_stdMpSliderBar,.BMap_ie6 .BMap_stdMpSliderBar.h{background:none}.BMap_ie6 .BMap_stdMpSliderBar div{top:-312px}.BMap_ie6 .BMap_stdMpSliderBar.h div{top:-325px}.BMap_zlSt,.BMap_zlCity,.BMap_zlProv,.BMap_zlCountry{position:absolute;left:27px;height:20px;width:25px;background-image:url(http://map.baidu.com/iknow/bmap/mapctrls.png);background-repeat:no-repeat;font-size:0;cursor:pointer}.BMap_ie6 .BMap_zlSt,.BMap_ie6 .BMap_zlCity,.BMap_ie6 .BMap_zlProv,.BMap_ie6 .BMap_zlCountry{background:none;overflow:hidden}.BMap_zlHolder{display:none;position:absolute;top:0}.BMap_zlHolder.hvr{display:block}.BMap_zlSt{background-position:0 -338px;top:73px}.BMap_zlCity{background-position:0 -358px;top:115px}.BMap_zlProv{background-position:0 -378px;top:143px}.BMap_zlCountry{background-position:0 -398px;top:171px}.BMap_ie6 .BMap_zlSt div{top:-338px}.BMap_ie6 .BMap_zlCity div{top:-358px}.BMap_ie6 .BMap_zlProv div{top:-378px}.BMap_ie6 .BMap_zlCountry div{top:-398px}.BMap_stdMpType1 .BMap_stdMpSlider,.BMap_stdMpType2 .BMap_stdMpSlider,.BMap_stdMpType3 .BMap_stdMpSlider{display:none}.BMap_stdMpCtrl.BMap_stdMpType1{height:108px}.BMap_stdMpType1 .BMap_stdMpZoom,.BMap_stdMpType3 .BMap_stdMpZoom{height:40px}.BMap_stdMpCtrl.BMap_stdMpType2{height:60px}.BMap_stdMpType2 .BMap_stdMpZoom{display:none}.BMap_stdMpCtrl.BMap_stdMpType3{height:40px}.BMap_stdMpType3 .BMap_stdMpPan{display:none}.BMap_stdMpType3 .BMap_stdMpZoom{top:0}.BMap_cpyCtrl{z-index:500;position:absolute;font-family:arial,sans-serif;font-size:11px;text-align:right;white-space:nowrap;bottom:2px;right:16px;-moz-user-select:none;cursor:default}.BMap_cpyCtrl a{font-size:11px;color:#7979cc}.BMap_scaleCtrl{z-index:450;width:70px;height:20px;position:absolute;bottom:10px;left:10px;overflow:hidden;-moz-user-select:none}.BMap_scaleCtrl div.BMap_scaleTxt{font-size:11px;font-family:arial,sans-serif}.BMap_scaleCtrl div{position:absolute}.BMap_scaleHBar,.BMap_scaleLBar,.BMap_scaleRBar{background-color:black}.BMap_scaleHBar{width:100%;height:3px;font-size:0;bottom:0}.BMap_scaleLBar,.BMap_scaleRBar{width:1px;height:6px;bottom:0;font-size:0}.BMap_scaleLBar{left:0}.BMap_scaleRBar{right:0}.BMap_scaleTxt{text-align:center;width:100%;cursor:default;line-height:18px}.BMap_tbarContainer{z-index:1050;position:absolute;text-align:right;top:10px;right:10px}.BMap_titem{padding:0.1em 0.5em;cursor:pointer;font-family:arial,sans-serif;font-size:12px;float:left;border:1px solid #ccc;background-color:white}.BMap_msover{background-color:#efefef}.BMap_msdown,.BMap_itemChecked{background-color:#343434;color:#fff}.BMap_omCtrl{position:absolute;z-index:400;background-color:#fff;overflow:hidden}.BMap_omOutFrame{position:absolute;width:100%;height:100%;left:0;top:0}.BMap_omInnFrame{position:absolute;border:1px solid #999;background-color:#ccc;overflow:hidden}.BMap_omMapContainer{position:absolute;overflow:hidden;width:100%;height:100%;left:0;top:0}.BMap_omViewMv{border-width:1px;border-style:solid;border-left-color:#84b0df;border-top-color:#adcff4;border-right-color:#274b8b;border-bottom-color:#274b8b;position:absolute;z-index:600}.BMap_omViewInnFrame{border:1px solid #3e6bb8}.BMap_omViewMask{width:1000px;height:1000px;position:absolute;left:0;top:0;background-color:#6688cc;opacity:0.2;filter:progid:dximagetransform.microsoft.alpha(opacity=20)}.BMap_omBtn{height:15px;width:15px;position:absolute;cursor:pointer;overflow:hidden;background:url(http://map.baidu.com/iknow/bmap/mapctrls.gif) no-repeat;z-index:1210}.anchorBR .BMap_omOutFrame{border-top:1px solid #999;border-left:1px solid #999}.quad4 .BMap_omBtn{background-position:0 -26px}.quad4 .BMap_omBtn.BMap_omBtnClosed{background-position:0 -41px}.anchorTR .BMap_omOutFrame{border-bottom:1px solid #999;border-left:1px solid #999}.quad1 .BMap_omBtn{background-position:0 -56px}.quad1 .BMap_omBtn.BMap_omBtnClosed{background-position:0 -71px}.anchorBL .BMap_omOutFrame{border-top:1px solid #999;border-right:1px solid #999}.quad3 .BMap_omBtn{background-position:-15px -56px}.quad3 .BMap_omBtn.BMap_omBtnClosed{background-position:-15px -71px}.anchorTL .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999}.quad2 .BMap_omBtn{background-position:-15px -26px}.quad2 .BMap_omBtn.BMap_omBtnClosed{background-position:-15px -41px}.anchorR .BMap_omOutFrame{border-bottom:1px solid #999;border-left:1px solid #999;border-top:1px solid #999}.anchorL .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999;border-top:1px solid #999}.anchorB .BMap_omOutFrame{border-top:1px solid #999;border-left:1px solid #999;border-right:1px solid #999}.anchorT .BMap_omOutFrame{border-bottom:1px solid #999;border-right:1px solid #999;border-left:1px solid #999}.anchorNon .BMap_omOutFrame,.withOffset .BMap_omOutFrame{border:1px solid #999}.BMap_zoomMask0,.BMap_zoomMask1{position:absolute;left:0;top:0;width:100%;height:100%;background:transparent url(http://map.baidu.com/iknow/bmap/blank.gif);z-index:1000}.BMap_contextMenu{position:absolute;left:200px;border-top:1px solid #adbfe4;border-left:1px solid #adbfe4;border-right:1px solid #8ba4d8;border-bottom:1px solid #8ba4d8;padding:0;margin:0;width:auto;visibility:hidden;background:#fff;z-index:10000000}.BMap_menuItem{padding:2px 6px;margin:0 2px;font-size:12px;-moz-user-select:none;line-height:17px}.BMap_contextMenu div.selected{color:#6688cc}.BMap_cmShadow{position:absolute;background:#000;opacity:0.3;filter:alpha(opacity=30);visibility:hidden;z-index:9000000}div.BMap_cmDivider{border-bottom:1px solid #adbfe4;font-size:0;padding:1px;margin:0 6px}div.BMap_cmFstItem{margin-top:2px}div.BMap_cmLstItem{margin-bottom:2px}.shadow img{border:0px none;margin:0px;padding:0px;position:absolute;height:370px;width:1144px}.pop .top{border-top:1px solid #ababab;background-color:#fff}.pop .center{border-left:1px solid #ababab;border-right:1px solid #ababab;background-color:#fff}.pop .bottom{border-bottom:1px solid #ababab;background-color:#fff}.shadow,.shadow *{-moz-user-select:none;-webkit-user-select:none}.BMap_opMask{background:transparent url(http://map.baidu.com/iknow/bmap/blank.gif);position:absolute;left:0;top:0;width:100%;height:100%;z-index:1000}.BMap_diso{height:17px;width:5px;position:absolute;background:url(http://map.baidu.com/iknow/bmap/dis_box_01.gif) no-repeat left top}.BMap_disi{color:#7a7a7a;position:absolute;left:5px;padding:0 4px 1px 0;line-height:17px;background:url(http://map.baidu.com/iknow/bmap/dis_box_01.gif) no-repeat right top}.BMap_disLabel{line-height:16px}.BMap_disBoxDis{color:#ff6319;font-weight:bold}pop .top img,.pop .center img,.pop .bottom img{display:none}@media print{.bmap_mask{background:none;z-index:900}.BMap_stdMpCtrl,.BMap_omCtrl,.BMap_omCtrl *,.BMap_tbarContainer{display:none}pop .top img,.pop .center img,.pop .bottom img{display:block}}
</style>
<link href="iknow.css" rel="stylesheet" type="text/css">
<script type="text/javascript">
var _OLR = {"loopindex":"","index":"", "hot_city":""};
(function(){var j=j||{version:"20080809",emptyFn:function(){}};(function(){j._log=[];var ag=0;var ah={};j.BaseClass=function(ai){ah[(this.hashCode=(ai||j.BaseClass.guid()))]=this};j.BaseClass.guid=function(){return"mz_"+(ag++).toString(36)};j.BaseClass.create=function(){var ai=new j.BaseClass();ai.decontrol();return ai};var af=j.instance=j.I=function(ai){return ah[ai]};j.BaseClass.prototype.dispose=function(){if(this.hashCode){delete ah[this.hashCode]}for(var ai in this){if(typeof this[ai]!="function"){delete this[ai]}}};j.BaseClass.prototype.getHashCode=function(){if(!this.hashCode){ah[(this.hashCode=j.BaseClass.guid())]=this}return this.hashCode};j.BaseClass.prototype.decontrol=function(){delete ah[this.hashCode]};j.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};j.BaseClass.prototype._wlog=function(aj,ak){var ai=j._log;if(ai.length>100){ai.reverse().length=50;ai.reverse()}ai[ai.length]="["+aj+"]["+(this._className||"Object")+" "+this.hashCode+"] "+ak}})();Function.prototype.inherits=function(ah,ag){var af,ai,ak=this.prototype,aj=function(){};aj.prototype=ah.prototype;ai=this.prototype=new aj();if(typeof(ag)=="string"){ai._className=ag}for(af in ak){ai[af]=ak[af]}this.prototype.constructor=ak.constructor;ak=aj=null;return ai};j.BaseEvent=function(af,ag){this.type=af;this.returnValue=true;this.target=ag||null;this.currentTarget=this.srcElement=null;this.cancelBubble=false;this.domEvent=null};j.BaseClass.prototype.addEventListener=function(ai,ah,ag){if(typeof ah!="function"){return this._wlog("error","addEventListener:"+ah+" is not a function")}if(!this._listeners){this._listeners={}}var af=this._listeners,aj;if(typeof ag=="string"&&ag){if(/[^\w\-]/.test(ag)){this._wlog("warning","nonstandard key:"+ag)}else{ah.hashCode=ag;aj=ag}}if(ai.indexOf("on")!=0){ai="on"+ai}if(typeof af[ai]!="object"){af[ai]={}}aj=aj||j.BaseClass.guid();ah.hashCode=aj;if(af[ai][aj]){this._wlog("warning","repeat key:"+aj)}af[ai][aj]=ah};j.BaseClass.prototype.removeEventListener=function(ah,ag){if(typeof ag=="function"){ag=ag.hashCode}else{if(typeof ag!="string"){return}}if(!this._listeners){this._listeners={}}if(ah.indexOf("on")!=0){ah="on"+ah}var af=this._listeners;if(!af[ah]){return}if(af[ah][ag]){delete af[ah][ag]}};j.BaseClass.prototype.dispatchEvent=function(ah){if(!this._listeners){this._listeners={}}var ag,af=this._listeners,ai=ah.type;ah.target=ah.srcElement=ah.target||ah.srcElement||this;ah.currentTarget=this;if(typeof this[ai]=="function"){this[ai](ah)}if(typeof af[ai]=="object"){for(ag in af[ai]){if(typeof af[ai][ag]=="function"){af[ai][ag].call(this,ah)}}}return ah.returnValue};j.BaseEvent.prototype.inherit=function(ag){var af=this;this.domEvent=ag=window.event||ag;af.clientX=ag.clientX||ag.pageX;af.clientY=ag.clientY||ag.pageY;af.offsetX=ag.offsetX||ag.layerX;af.offsetY=ag.offsetY||ag.layerY;af.screenX=ag.screenX;af.screenY=ag.screenY;af.ctrlKey=ag.ctrlKey||ag.metaKey;af.shiftKey=ag.shiftKey;af.altKey=ag.altKey;return af};j.Browser=(function(){var ah=navigator.userAgent;var al=0,af=0,ak=0,aj=0;var ai=0,am=0,ag=0;if(typeof(window.opera)=="object"&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(ah)){af=parseFloat(RegExp.$2)}else{if(/MSIE (\d+(\.\d+)?)/.test(ah)){al=parseFloat(RegExp.$1)}else{if(/Firefox(\s|\/)(\d+(\.\d+)?)/.test(ah)){aj=parseFloat(RegExp.$2)}else{if(navigator.vendor=="Netscape"&&/Netscape(\s|\/)(\d+(\.\d+)?)/.test(ah)){ag=parseFloat(RegExp.$2)}else{if(ah.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(ah)){ak=parseFloat(RegExp.$1)}}}}}if(ah.indexOf("Gecko")>-1&&ah.indexOf("KHTML")==-1&&/rv\:(\d+(\.\d+)?)/.test(ah)){am=parseFloat(RegExp.$1)}return{ie:al,firefox:aj,gecko:am,netscape:ag,opera:af,safari:ak}})();window.FeBrowser=j.Browser;j.Dom={};j.Dom.createDom=function(ag,af){if(j.isIE&&af&&af.name){ag="<"+ag+' name="'+j.String.escapeHTML(af.name)+'">'}var ah=document.createElement(ag);if(af){j.Dom.setProperties(ah,af)}return ah};j.Dom.getOffset=function(ai){var al=j.Dom.getOwnerDocument(ai);var ak=j.isGecko>0&&al.getBoxObjectFor&&j.Dom.getStyle(ai,"position")=="absolute"&&(ai.style.top===""||ai.style.left==="");var am={left:0,top:0};var ag=(j.isIE&&!j.isStrict)?al.body:al.documentElement;if(ai==ag){return am}var ah=null;var aj;if(ai.getBoundingClientRect){aj=ai.getBoundingClientRect();am.left=aj.left+Math.max(al.documentElement.scrollLeft,al.body.scrollLeft);am.top=aj.top+Math.max(al.documentElement.scrollTop,al.body.scrollTop);am.left-=al.documentElement.clientLeft;am.top-=al.documentElement.clientTop;if(j.isIE&&!j.isStrict){am.left-=2;am.top-=2}}else{if(al.getBoxObjectFor&&!ak){aj=al.getBoxObjectFor(ai);var af=al.getBoxObjectFor(ag);am.left=aj.screenX-af.screenX;am.top=aj.screenY-af.screenY}else{ah=ai;do{am.left+=ah.offsetLeft;am.top+=ah.offsetTop;if(j.isWebkit>0&&j.Dom.getStyle(ah,"position")=="fixed"){am.left+=al.body.scrollLeft;am.top+=al.body.scrollTop;break}ah=ah.offsetParent}while(ah&&ah!=ai);if(j.isOpera>0||(j.isWebkit>0&&j.Dom.getStyle(ai,"position")=="absolute")){am.top-=al.body.offsetTop}ah=ai.offsetParent;while(ah&&ah!=al.body){am.left-=ah.scrollLeft;if(!j.isOpera||ah.tagName!="TR"){am.top-=ah.scrollTop}ah=ah.offsetParent}}}return am};j.Dom.getOwnerDocument=function(af){return af.nodeType==9?af:af.ownerDocument||af.document};j.Dom.setProperties=function(ag,af){j.each(af,function(ai,ah){j.Dom._setProperty(ag,ah,ai)})};j.Dom._setProperty=function(ag,af,ah){if(af=="style"){ag.style.cssText=ah}else{if(af=="class"){ag.className=ah}else{if(af=="for"){ag.htmlFor=ah}else{if(af in j.Dom._DIRECT_ATTRIBUTE_MAP){ag.setAttribute(j.Dom._DIRECT_ATTRIBUTE_MAP[af],ah)}else{ag[af]=ah}}}}};j.Dom._DIRECT_ATTRIBUTE_MAP={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder"};j.Dom.createDom=function(ag,af){if(j.isIE&&af&&af.name){ag="<"+ag+' name="'+j.String.escapeHTML(af.name)+'">'}var ah=document.createElement(ag);if(af){j.Dom.setProperties(ah,af)}return ah};j.G=function(){for(var af=[],ag=arguments.length-1;ag>-1;ag--){var ah=arguments[ag];af[ag]=null;if(typeof ah=="object"&&ah&&ah.dom){af[ag]=ah.dom}else{if((typeof ah=="object"&&ah&&ah.tagName)||ah==window||ah==document){af[ag]=ah}else{if(typeof ah=="string"&&(ah=document.getElementById(ah))){af[ag]=ah}}}}return af.length<2?af[0]:af};if(typeof(HTMLElement)!="undefined"&&!window.opera&&window.FeBrowser.ie<9&&HTMLElement.prototype.__defineGetter__){HTMLElement.prototype.__defineGetter__("children",function(){for(var ag=[],ah=0,aj,ai=0,af=this.childNodes.length;ai<af;ai++){aj=this.childNodes[ai];if(aj.nodeType==1){ag[ah++]=aj;if(aj.name){if(!ag[aj.name]){ag[aj.name]=[]}ag[aj.name][ag[aj.name].length]=aj}if(aj.id){ag[aj.id]=aj}}}return ag})}if(typeof(HTMLElement)!="undefined"&&!window.opera&&window.FeBrowser.ie<9&&HTMLElement.prototype.__defineGetter__){HTMLElement.prototype.__defineGetter__("currentStyle",function(){return this.ownerDocument.defaultView.getComputedStyle(this,null)})}if(typeof(HTMLElement)!="undefined"&&!window.opera&&window.FeBrowser.ie<9){HTMLElement.prototype.insertAdjacentHTML=function(af,ag){var ah=this.ownerDocument.createRange();ah.setStartBefore(this);ah=ah.createContextualFragment(ag);switch(af){case"beforeBegin":this.parentNode.insertBefore(ah,this);break;case"afterBegin":this.insertBefore(ah,this.firstChild);break;case"beforeEnd":this.appendChild(ah);break;case"afterEnd":if(!this.nextSibling){this.parentNode.appendChild(ah)}else{this.parentNode.insertBefore(ah,this.nextSibling)}break}}}j.TimeLine=function(af){j.BaseClass.call(this);var ag=this;ag.interval=15;ag.duration=800;ag.continual=true;ag.trend=true;j.extend(this,af);ag._beginTime=new Date().getTime();ag._endTime=ag._beginTime+ag.duration;if(typeof ag.initialize=="function"){ag.initialize()}ag.dispatchEvent(new j.BaseEvent("onbeforestart"));if(ag.continual){ag._launch()}};j.TimeLine.inherits(j.BaseClass,"Fe.TimeLine");j.TimeLine.prototype._launch=function(){var ag=this;var af=new Date().getTime();if(af>=ag._endTime){ag.schedule=ag.trend?1:0;if(typeof ag.render=="function"){ag.render(ag.schedule)}if(typeof ag.finish=="function"){ag.finish()}ag.dispatchEvent(new j.BaseEvent("onafterfinish"));ag.dispose();return}if(ag.trend){ag.schedule=Math.sqrt((af-ag._beginTime)/ag.duration)}else{ag.schedule=Math.pow((ag._endTime-af)/ag.duration,2)}ag.dispatchEvent(new j.BaseEvent("onbeforeupdate"));if(typeof ag.render=="function"){ag.render(ag.schedule)}ag.dispatchEvent(new j.BaseEvent("onafterupdate"));if(!ag.terminative){ag._timer=setTimeout(function(){ag._launch()},ag.interval)}};j.TimeLine.prototype.cancel=function(){if(this._timer){clearTimeout(this._timer)}this._endTime=this._beginTime;if(typeof this.restore=="function"){this.restore()}this.dispose()};j.TimeLine.prototype.end=function(){if(this._timer){clearTimeout(this._timer)}this._endTime=this._beginTime;this._launch()};j.ac=function(af,ag){if(!(af=this.G(af))){return}ag=this.trim(ag);if(!new RegExp("(^| )"+ag.replace(/(\W)/g,"\\$1")+"( |$)").test(af.className)){af.className=af.className.split(/\s+/).concat(ag).join(" ")}};j.addClassName=j.ac;j.each=function(aj,af){if(typeof af!="function"){return aj}if(aj){if(aj.length===undefined){for(var ag in aj){af.call(aj[ag],aj[ag],ag)}}else{for(var ah=0,ai=aj.length;ah<ai;ah++){af.call(aj[ah],aj[ah],ah)}}}return aj};j.extend=function(ak,ai){if(ak&&ai&&typeof(ai)=="object"){for(var aj in ai){ak[aj]=ai[aj]}var ah=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var af=0,ag;af<ah.length;af++){ag=ah[af];if(Object.prototype.hasOwnProperty.call(ai,ag)){ak[ag]=ai[ag]}}}return ak};j.hide=function(){j.each(arguments,function(af){if(af=j.G(af)){af.style.display="none"}})};j.inherit=function(al,ah,ag){var ak=al.prototype;var aj=function(){};aj.prototype=ah.prototype;var ai=al.prototype=new aj();if(typeof ag=="string"){ai._className=ag}for(var af in ak){ai[af]=ak[af]}al.prototype.constructor=ak.constructor;ak=null;return ai};j.isIE=0;(function(){if(navigator.userAgent.indexOf("MSIE")>0&&!window.opera){/MSIE (\d+(\.\d+)?)/.test(navigator.userAgent);j.isIE=parseFloat(RegExp.$1)}})();j.on=function(ah,ag,af){if(!(ah=j.G(ah))){return ah}ag=ag.replace(/^on/,"").toLowerCase();if(ah.attachEvent){ah[ag+af]=function(){af.call(ah,window.event)};ah.attachEvent("on"+ag,ah[ag+af])}else{ah.addEventListener(ag,af,false)}return ah};j.rc=function(af,ag){if(!(af=this.G(af))){return}ag=this.trim(ag);var ah=af.className.replace(new RegExp("(^| +)"+ag.replace(/(\W)/g,"\\$1")+"( +|$)","g"),"$2");if(af.className!=ah){af.className=ah}};j.removeClassName=j.rc;j.show=function(){this.each(arguments,function(af){if(af=j.G(af)){af.style.display=""}})};j.trim=function(af){return af.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")};j.un=function(ah,ag,af){if(!(ah=j.G(ah))){return ah}ag=ag.replace(/^on/,"").toLowerCase();if(ah.attachEvent){ah.detachEvent("on"+ag,ah[ag+af]);ah[ag+af]=null}else{ah.removeEventListener(ag,af,false)}return ah};var aa={imgPath:"http://map.baidu.com/iknow/styles/bmap",cssPath:"",distCursor:this.imgPath+"/ruler.cur"};var u=u||{version:"20090107",emptyFn:function(){},_register:new Array(),register:function(af){this._register[this._register.length]=af}};BMapLanguage={Unit:{m:"米",km:"公里",mile:"英里"}};var n=j.BaseClass;n.prototype.toString=function(){return this._className||""};var ab=j.BaseEvent;function E(af){n.call(this);this._opts={container:null};this._opts=j.extend(this._opts,af);this._type="contextmenu";this._map=null;this._container;this._shadow;this._left=0;this._top=0;this._items=[];this._dividers=[];this.curPoint=null}E.inherits(n,"ContextMenu");j.extend(E.prototype,{initialize:function(ag){if(this._container){return false}this._map=ag;this._render();var af=this;this._container.style.cursor="url("+ag.config.defaultCursor+"), move";this._shadow.style.cursor=this._container.style.cursor;j.on(document,"mousedown",function(ai){if(!af._container){return}af.hide()});j.on(this._container,"click",function(ai){af.hide();ac(ai)});var ah=this._opts.container;if(!ah){ah=this._map.container}j.on(ah,"contextmenu",function(aj){if(!af._container){return}aj=window.event||aj;var ai=aj.target||aj.srcElement;while(ai&&ai.className!="pop"){ai=ai.parentNode}if(ai&&ai.className=="pop"){af.hide();return}if(aj.button==2||j.Browser.ie){return L(aj)}});j.on(ah,"mouseup",function(al){if(!af._container){return}al=window.event||al;if(al.button!=2){return}var ao=al.layerX||al.offsetX;var an=al.layerY||al.offsetY;var aq=al.target||al.srcElement;var am=aq;if(ah==af._map.container&&am!==af._map.maskLayer&&am.nodeName.toLowerCase()!="svg"){while(am&&am.className!="shadow"){am=am.parentNode}if(!am||am.className!="shadow"||am.getAttribute("type")!="infowindow_shadow"){af.hide();return}}while(aq&&aq!=af._map.container){if(!(aq.clientWidth==0&&aq.clientHeight==0&&aq.offsetParent&&aq.offsetParent.nodeName.toLowerCase()=="td")){if(aq.nodeName.toLowerCase()=="svg"){ao+=parseInt(aq.getAttribute("viewBox").split(" ")[0])||0;an+=parseInt(aq.getAttribute("viewBox").split(" ")[1])||0}else{ao+=aq.offsetLeft;an+=aq.offsetTop}}aq=aq.offsetParent||aq.parentNode}af.curPoint=af._map.pixelToPoint(new p(ao,an));if(af.curPoint.lng<F[af._map.mapType].bounds[0]||af.curPoint.lng>F[af._map.mapType].bounds[2]||af.curPoint.lat<F[af._map.mapType].bounds[1]||af.curPoint.lat>F[af._map.mapType].bounds[3]){return}var ak=af.getDom().offsetHeight;var ap=af.getDom().offsetWidth;var aj=ao;var ai=an;if(ao+ap>ag.width){aj=ao-ap}if(an+ak>ag.height){ai=an-ak}af.setPosition(aj,ai);af.show();return L(al)})},remove:function(){if(this._container){this._container.parentNode.removeChild(this._container);this._container=null}if(this._shadow){this._shadow.parentNode.removeChild(this._shadow);this._shadow=null}this._map=null},_render:function(){this._container=M(this._map.container,"<div unselectable='on'></div>");this._container.className="BMap_contextMenu";this._shadow=M(this._map.container,"<div class='BMap_cmShadow'></div>");return this._container},addItem:function(ah){if(!ah||ah._type!="menuitem"||typeof ah.initialize!="function"||ah._text==""||ah._width<=0){return}for(var ag=0,af=this._items.length;ag<af;ag++){if(this._items[ag]===ah){return}}ah.initialize(map,this);this._items.push(ah);j.ac(ah.getDom(),"BMap_cmLstItem");if(this._items.length>1){j.rc(this._items[this._items.length-2].getDom(),"BMap_cmLstItem")}else{j.ac(this._items[0].getDom(),"BMap_cmFstItem")}this._updateShadowSize()},removeItem:function(ah){if(!ah||ah._type!="menuitem"){return}for(var ag=0,af=this._items.length;ag<af;ag++){if(this._items[ag]===ah){this._items[ag].remove();this._items.splice(ag,1)}}j.ac(this._items[this._items.length-1].getDom(),"BMap_cmLstItem");this._updateShadowSize()},addDivider:function(){var af="<div class='BMap_cmDivider'></div>";this._dividers.push(M(this._container,af));this._updateShadowSize()},removeDividerAt:function(af){if(af===null||typeof af!="number"||af<0||af>=this._dividers.length){return}this._dividers[af].parentNode.removeChild(this._dividers[af]);this._dividers.splice(af,1);this._updateShadowSize()},getDom:function(){return this._container},setPosition:function(af,ag){this._left=af;this._top=ag;this._container.style.left=af+"px";this._container.style.top=ag+"px";this._shadow.style.left=af+1+"px";this._shadow.style.top=ag+2+"px"},show:function(){if(this._container){this._container.style.visibility="visible"}if(this._shadow){this._shadow.style.visibility="visible"}this.dispatchEvent(new ab("onopen"))},hide:function(){if(this._container){this._container.style.visibility="hidden"}if(this._shadow){this._shadow.style.visibility="hidden"}this.dispatchEvent(new ab("onclose"))},setCursor:function(af){if(this._container&&af){this._container.style.cursor=af}if(this._shadow&&af){this._shadow.style.cursor=af}},destroy:function(){if(this._container&&this._container.parentNode&&this._container.parentNode.parentNode){this._container.parentNode.removeChild(this._container);this._container=null}if(this._shadow&&this._shadow.parentNode&&this._shadow.parentNode.parentNode){this._shadow.parentNode.removeChild(this._shadow);this._shadow=null}},_updateShadowSize:function(){if(this._container&&this._shadow){this._shadow.style.width=this._container.offsetWidth+"px";this._shadow.style.height=this._container.offsetHeight+"px"}},getItems:function(){return this._items}});function x(af){n.call(this);this._map=null;this._container;this._type="control";this._opts={offsetX:0,offsetY:0,anchor:e.ANCHOR_NONE,visible:true,left:"auto",top:"auto",right:"auto",bottom:"auto"};this._opts.left=this._opts.left==""?"auto":this._opts.left;this._opts.top=this._opts.top==""?"auto":this._opts.top;this._opts.right=this._opts.right==""?"auto":this._opts.right;this._opts.bottom=this._opts.bottom==""?"auto":this._opts.bottom}x.inherits(n,"Control");j.extend(x.prototype,{initialize:function(ag){if(this._container){ag.container.appendChild(this._container);return false}this._map=ag;var af=this;ag.addEventListener("onmapcontainerresize",function(ah){af._resetAnchor()})},remove:function(){if(!this._container){return}this._container.parentNode&&this._container.parentNode.removeChild(this._container);this._container=null;this._map=null},_render:function(){this._container=M(this._map.container,"<div unselectable='on'></div>");this._setPosition();if(!this._opts.visible){this._container.style.display="none"}return this._container},_setPosition:function(){if(this._opts.left=="auto"&&this._opts.top=="auto"&&this._opts.right=="auto"&&this._opts.bottom=="auto"){this.setAnchor(this._opts.anchor)}else{this._opts.left=!isNaN(parseInt(this._opts.left))?parseInt(this._opts.left)+"px":"auto";this._opts.top=!isNaN(parseInt(this._opts.top))?parseInt(this._opts.top)+"px":"auto";this._opts.right=!isNaN(parseInt(this._opts.right))?parseInt(this._opts.right)+"px":"auto";this._opts.bottom=!isNaN(parseInt(this._opts.bottom))?parseInt(this._opts.bottom)+"px":"auto";this.setStyle("left",this._opts.left);this.setStyle("top",this._opts.top);this.setStyle("right",this._opts.right);this.setStyle("bottom",this._opts.bottom);var af=["T","R","B","L","TL","TR","BL","BR","Non"];j.rc(this._container,"anchor"+af[this._opts.anchor]);this._opts.anchor=e.ANCHOR_NONE;j.ac(this._container,"anchor"+af[this._opts.anchor])}},setAnchor:function(ag){if(typeof ag!="number"||ag<e.ANCHOR_TOP||ag>e.ANCHOR_NONE){ag=this._defaultAnchor}var af=this._opts.anchor;this._opts.anchor=ag;if(ag!=e.ANCHOR_NONE){this._opts.left=this._opts.top=this._opts.right=this._opts.bottom="auto"}if(!this._container){return}var aj=this._container;var am=this._opts.offsetX;var ak=this._opts.offsetY;var an=parseInt(this._opts.width)?parseInt(this._opts.width):aj.offsetWidth;var ah=parseInt(this._opts.height)?parseInt(this._opts.height):aj.offsetHeight;if(ag!=e.ANCHOR_NONE){aj.style.left=aj.style.top=aj.style.right=aj.style.bottom="auto"}if(!this._map){return}var ao=this._map.width;var ai=this._map.height;switch(ag){case e.ANCHOR_TOP:aj.style.top=ak+"px";aj.style.left=(ao-an)/2+"px";break;case e.ANCHOR_LEFT:aj.style.left=am+"px";aj.style.top=(ai-ah)/2+"px";break;case e.ANCHOR_RIGHT:aj.style.right=am+"px";aj.style.top=(ai-ah)/2+"px";break;case e.ANCHOR_BOTTOM:aj.style.bottom=ak+"px";aj.style.left=(ao-an)/2+"px";break;case e.ANCHOR_TOP_LEFT:aj.style.top=ak+"px";aj.style.left=am+"px";break;case e.ANCHOR_TOP_RIGHT:aj.style.top=ak+"px";aj.style.right=am+"px";break;case e.ANCHOR_BOTTOM_LEFT:aj.style.bottom=ak+"px";aj.style.left=am+"px";break;case e.ANCHOR_BOTTOM_RIGHT:aj.style.bottom=ak+"px";aj.style.right=am+"px";break;default:break}var al=["T","R","B","L","TL","TR","BL","BR","Non"];j.rc(this._container,"anchor"+al[af]);j.ac(this._container,"anchor"+al[ag])},getAnchor:function(){return this._opts.anchor},setOffset:function(af,ag){this._opts.offsetX=af*1;this._opts.offsetY=ag*1;if(this._opts.anchor==e.ANCHOR_NONE){this._opts.anchor=this.defaultAnchor;j.rc(this._container,"anchorNon")}this.setAnchor(this._opts.anchor)},getOffset:function(){return{x:this._opts.offsetX,y:this._opts.offsetY}},setStyle:function(ag,ah){ah=!isNaN(parseInt(ah))?parseInt(ah)+"px":"auto";if(ag=="left"||ag=="top"||ag=="right"||ag=="bottom"){this._opts[ag]=ah;if(ag=="left"&&ah!="auto"){this._opts.right="auto"}if(ag=="top"&&ah!="auto"){this._opts.bottom="auto"}if(ag=="right"&&ah!="auto"){this._opts.left="auto"}if(ag=="bottom"&&ah!="auto"){this._opts.top="auto"}if(this._container){var af=["T","R","B","L","TL","TR","BL","BR","Non"];j.rc(this._container,"anchor"+af[this._opts.anchor]);this._opts.anchor=e.ANCHOR_NONE;j.ac(this._container,"anchor"+af[this._opts.anchor]);this._container.style.left=this._opts.left;this._container.style.top=this._opts.top;this._container.style.right=this._opts.right;this._container.style.bottom=this._opts.bottom}else{this._opts.anchor=e.ANCHOR_NONE}}},getDom:function(){return this._container},show:function(){this._opts.visible=true;if(this._container){this._container.style.display="block"}},hide:function(){this._opts.visible=false;if(this._container){this._container.style.display="none"}},isVisible:function(){return this._opts.visible},_resetAnchor:function(){if(this._opts.anchor<=e.ANCHOR_LEFT){this.setAnchor(this._opts.anchor)}}});var e={ANCHOR_TOP:0,ANCHOR_RIGHT:1,ANCHOR_BOTTOM:2,ANCHOR_LEFT:3,ANCHOR_TOP_LEFT:4,ANCHOR_TOP_RIGHT:5,ANCHOR_BOTTOM_LEFT:6,ANCHOR_BOTTOM_RIGHT:7,ANCHOR_NONE:8};function r(af){x.call(this);this._opts=j.extend(j.extend(this._opts,{content:"",minZoom:-1,bounds:null,anchor:e.ANCHOR_BOTTOM_RIGHT,offsetX:5,offsetY:2}),af);this._defaultAnchor=e.ANCHOR_BOTTOM_RIGHT;if(this._opts.anchor<e.ANCHOR_TOP||this._opts.anchor>e.ANCHOR_BOTTOM_RIGHT){this._opts.anchor=this._defaultAnchor}this._canShow=true}r.inherits(x,"CopyrightControl");j.extend(r.prototype,{initialize:function(ag){x.prototype.initialize.call(this,ag);this._render();var ah=this._opts.minZoom;if(ah==-1||ah<F[this._map.mapType].zoomLevelMin||ah>F[this._map.mapType].zoomLevelMax){this._opts.minZoom=F[this._map.mapType].zoomLevelMin}this._updateState();var af=this;ag.addEventListener("load",function(ai){af._updateState()});ag.addEventListener("moveend",function(ai){af._updateState()});ag.addEventListener("dragend",function(ai){af._updateState()});ag.addEventListener("zoomend",function(ai){af._updateState()})},_render:function(){x.prototype._render.call(this);j.ac(this._container,"BMap_cpyCtrl");this._container.innerHTML=this._opts.content;x.prototype._setPosition.call(this)},setMinZoom:function(af){if(af>=F[this._map.mapType].zoomLevelMin&&af<=F[this._map.mapType].zoomLevelMax){this._opts.minZoom=af;this._updateState()}},getMinZoom:function(){return this._opts.minZoom},setBounds:function(af){if(af.toString()=="Bounds"){this._opts.bounds=af;this._updateState()}},getBounds:function(){return this._opts.bounds},setContent:function(af){this._opts.content=af+"";if(this._container){this._container.innerHTML=this._opts.content}},getContent:function(){return this._opts.content},_updateState:function(){if(!this._map||!this._container){return}var af=this._map.zoomLevel;if(af<this._opts.minZoom){this._canShow=false}else{var ai=this._map.pixelToPoint({x:0,y:0});var ah=this._map.pixelToPoint({x:this._map.width,y:this._map.height});var ag=new k(ai.lng,ai.lat,ah.lng,ah.lat);if(this._opts.bounds&&ag.intersects(this._opts.bounds)==null){this._canShow=false}else{this._canShow=true}}if(this._canShow){if(this._container){this._container.style.visibility="visible"}}else{if(this._container){this._container.style.visibility="hidden"}}}});function ae(af){x.call(this);this._opts=j.extend(j.extend(this._opts,{anchor:e.ANCHOR_BOTTOM_RIGHT,offsetX:0,offsetY:0,width:150,height:150,padding:8,isOpen:false,point:null,zoom:-1,zoomInterval:4}),af);this._defaultAnchor=e.ANCHOR_BOTTOM_RIGHT;if(this._opts.anchor<e.ANCHOR_TOP||this._opts.anchor>e.ANCHOR_BOTTOM_RIGHT){this._opts.anchor=this._defaultAnchor}this._opts.width=this._opts.width>0?this._opts.width:150;this._opts.height=this._opts.height>0?this._opts.height:150;if(Math.ceil(this._opts.padding*2)>=this._opts.width||Math.ceil(this._opts.padding*2)>=this._opts.height){this._opts.padding=8}this.isOpen=this._opts.isOpen;this._omCanvas;this._omMapContainer;this._omView;this._omViewMv;this._omBtn;this._borderWidth=1;this._btnWidth=15;this._btnHeight=15;this._quad=4;this._overviewMap=null;this._minZoomLevel=-1;this._maxZoomLevel=-1;this._curOMZoomLevel=-1;this._wRatio=1;this._hRatio=1;this._temp={};this._currentOp="";this._overviewInitialized=false}ae.inherits(x,"OverviewMapControl");j.extend(ae.prototype,{initialize:function(af){if(x.prototype.initialize.call(this,af)==false){return false}this._checkOpts();this._render();this._bind();this._initOverviewMap();j.on(this._container,"click",function(ag){ac(ag)});j.on(this._container,"dblclick",function(ag){ac(ag)});j.on(this._container,"mousewheel",function(ag){ac(ag)});if(window.addEventListener){this._container.addEventListener("DOMMouseScroll",function(ag){ac(ag)},true)}if(!this._opts.visible){this.hide()}},_getCurOMZoomLevel:function(){var af=-1;var ag=this._map.zoomLevel;if(this._opts.zoom!=-1){if(this._opts.zoom<this._minZoomLevel){af=this._minZoomLevel}else{if(this._opts.zoom>this._maxZoomLevel){af=this._maxZoomLevel}else{af=this._opts.zoom}}}else{var ah=ag-this._opts.zoomInterval;if(ah<this._minZoomLevel){af=this._minZoomLevel}else{if(ah>this._maxZoomLevel){af=this._maxZoomLevel}else{af=ah}}}return af},_render:function(){x.prototype._render.call(this);var af=j.Browser.ie!=false?" BMap_ie"+j.Browser.ie:"";var ag=this._container;ag.innerHTML=this._generateHTML();j.ac(ag,"BMap_omCtrl"+af);this._omCanvas=ag.children[0].children[0];this._omMapContainer=this._omCanvas.children[0];this._omViewMv=this._omCanvas.children[1];this._omViewMvInn=this._omViewMv.children[0];this._omBtn=ag.children[1];this._container.style.display="block";this.setSize(this._opts.width,this._opts.height);this._omViewMv.style.cursor="url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default"},_generateHTML:function(){var af=['<div class="BMap_omOutFrame"><div class="BMap_omInnFrame">','<div class="BMap_omMapContainer"></div>','<div class="BMap_omViewMv"><div class="BMap_omViewInnFrame"><div></div></div></div>','</div></div><div class="BMap_omBtn"></div>'];return af.join("")},_bind:function(){var af=this;j.on(this._omBtn,"click",function(){af.changeView()});if(j.Browser.ie){j.on(this._omBtn,"dblclick",function(){af.changeView()})}j.on(this._omViewMv,"mousedown",function(ag){if(typeof af._omViewMv._drag!="undefined"&&af._omViewMv._drag=="true"){return}af._omViewMv._drag="true";var ag=window.event||ag;if(af._omViewMv.setCapture){af._omViewMv.setCapture()}af._bind.iniX=parseInt(af._omViewMv.currentStyle.left);af._bind.iniY=parseInt(af._omViewMv.currentStyle.top);af._bind.mx=ag.pageX||ag.clientX;af._bind.my=ag.pageY||ag.clientY;af._bind.i=0;af._bind.j=0;af._setViewMvCursor("url(http://map.baidu.com/iknow/styles/bmap/closedhand.cur), default");ac(ag);return L(ag)});j.on(document,"mousemove",function(am){if(af._omViewMv._drag=="true"){var am=window.event||am;var ag=am.pageX||am.clientX;var an=am.pageY||am.clientY;af._bind.curX=af._bind.iniX+ag-af._bind.mx;af._bind.curY=af._bind.iniY+an-af._bind.my;var al=3;if(af._opts.point==null){af._bind._moveX=0;af._bind._moveY=0;if(af._bind.curX<=0){af._bind._moveX=al}if(af._bind.curY<=0){af._bind._moveY=al}if(af._bind.curX+af._omViewMv.offsetWidth>=af._overviewMap.width){af._bind._moveX=-al}if(af._bind.curY+af._omViewMv.offsetHeight>=af._overviewMap.height){af._bind._moveY=-al}}af._omViewMv.style.left=af._bind.curX+"px";af._omViewMv.style.top=af._bind.curY+"px";if((af._bind._moveX!=0||af._bind._moveY!=0)&&!af._bind.intervalId&&af._opts.point==null){af._bind._mapMoving=true;var ak=af._overviewMap.offsetX;var ai=af._overviewMap.offsetY;var aj=ak+af._bind._moveX;var ah=ai+af._bind._moveY;af._overviewMap._setPlatformPosition(aj,ah);af._bind.intervalId=setInterval(function(){var ap=af._bind._moveX!=0?(af._bind._moveX>0?af._bind.i+=al:af._bind.i-=al):af._bind.i;var ao=af._bind._moveY!=0?(af._bind._moveY>0?af._bind.j+=al:af._bind.j-=al):af._bind.j;af._overviewMap._setPlatformPosition(aj+ap,ah+ao)},30)}if(af._bind._moveX==0&&af._bind._moveY==0){clearInterval(af._bind.intervalId);delete af._bind.intervalId;af._bind.i=0;af._bind.j=0}ac(am);return L(am)}});j.on(document,"mouseup",function(ak){if(af._omViewMv._drag=="true"){af._omViewMv._drag="";af._setViewMvCursor("url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default");if(af._omViewMv.releaseCapture){af._omViewMv.releaseCapture()}if(af._bind.initX==af._bind.curX&&af._bind.initY==af._bind.curY){ac(ak);return L(ak)}af._currentOp="dragView";af._overviewMap.config.enableMouseDown=false;af._map.temp.operating=true;if(typeof af._bind.curX=="undefined"||typeof af._bind.curY=="undefined"){return}var aj=af._bind.curX+parseInt(af._omViewMv.style.width)/2+1;var ai=af._bind.curY+parseInt(af._omViewMv.style.height)/2+1;delete af._bind.curX;delete af._bind.curY;var ah=af._overviewMap.pixelToPoint({x:aj,y:ai},af._overviewMap.zoomLevel);var ag=F[af._map.mapType].bounds;if(ah.lng<ag[0]||ah.lng>ag[2]||ah.lat<ag[1]||ah.lat>ag[3]){ah=af._overviewMap.centerPoint}af._map.temp.operating=false;if(af._bind._mapMoving==true){clearInterval(af._bind.intervalId);delete af._bind.intervalId;af._bind._mapMoving=false}af._map.temp.operating=true;setTimeout(function(){af._map.temp.operating=false;af._map.panTo(ah)},50);ac(ak);return L(ak)}})},_initOverviewMap:function(){if(this._overviewInitialized==true){return}var ah=this;var ai=ah._map;ai.addEventListener("mapcontainerresize",function(){if(ah._overviewMap!=null&&ah._opts.point==null){ah._overviewMap.setCenter(ai.centerPoint)}if(ah._omView!=null){ah._omView.setPoint(ai.centerPoint);ah._setRatio()}ah._redraw()});if(this.isOpen==false){return}ai.addEventListener("load",function(){ah._onMainZoomEnd()});ai.addEventListener("moving",function(){ah._moveView()});ai.addEventListener("moveend",function(aj){ah._onMainMoveEnd(aj)});ai.addEventListener("dragend",function(aj){ah._onMainMoveEnd(aj)});ai.addEventListener("zoomend",function(aj){ah._onMainZoomEnd(aj)});var af=ai.centerPoint;this._minZoomLevel=F[ai.mapType].zoomLevelMin;this._maxZoomLevel=F[ai.mapType].zoomLevelMax;this._curOMZoomLevel=this._getCurOMZoomLevel();this._overviewMap=new s(this._omMapContainer,{isOverviewMap:true});this._overviewMap.enableClickPan(false);this._overviewMap.enableScrollWheelZoom(false);this._overviewMap.enableDoubleClickZoom(false);this._overviewMap.enableKeyboard(false);if(this._opts.point){af=this._opts.point;this._overviewMap.enableDraging(false);this.setCenterPoint._preCursor=this._overviewMap.platform.style.cursor;this._overviewMap.platform.style.cursor="default"}this._overviewMap.centerAndZoom(af,this._curOMZoomLevel);this._omView=new A({point:ai.centerPoint,lineStroke:1,lineColor:"#6688cc"});this._overviewMap.addOverlay(this._omView);this._omView.getDom().innerHTML='<div class="BMap_omViewInnFrame"><div class="BMap_omViewMask"></div></div>';this._omViewInn=this._omView.getDom().children[0];var ag=this._omView.getDom().style;ag.borderLeftColor="#84b0df";ag.borderTopColor="#adcff4";ag.borderRightColor="#274b8b";ag.borderBottomColor="#274b8b";this._setRatio();this._overviewMap.addEventListener("dragend",function(){if(ah._opts.point){return}ah._currentOp="dragMap";ai.panTo(ah._overviewMap.centerPoint)});this._overviewMap.addEventListener("moveend",function(){ah._onViewMapMoveEnd()});this._overviewMap.addEventListener("mousedown",function(aj){ah._temp._downX=aj.offsetX;ah._temp._downY=aj.offsetY});this._overviewMap.addEventListener("mapcontainerresize",function(aj){if(ah._opts.point==null){ah._overviewMap.setCenter(ah._map.centerPoint)}else{ah._overviewMap.setCenter(ah._opts.point)}ah._setRatio()});this._overviewInitialized=true},_setViewMvCursor:function(af){this._omViewMv.style.cursor=af},setAnchor:function(af){x.prototype.setAnchor.call(this,af);if(!this._map){return}this._setQuad();this._redraw()},setStyle:function(af,ag){x.prototype.setStyle.call(this,af,ag);if(af=="left"||af=="right"||af=="top"||af=="bottom"){this._setQuad();this._redraw()}},changeView:function(){this.changeView._running=true;this._opts.isOpen=!this._opts.isOpen;this.isOpen=this._opts.isOpen;if(!this._container){return}var ak=this._container;var af=this._opts.width;var ah=this._opts.height;var aj=this._btnWidth;var ag=this._btnHeight;var ai=this;if(!this._opts.isOpen){this.changeView._preBtnTop=this._omBtn.style.top;this.changeView._preBtnLeft=this._omBtn.style.left;new j.TimeLine({interval:20,duration:100,onafterupdate:function(al){ak.style.width=(af-Math.ceil((af-aj)*al.target.schedule))+"px";ak.style.height=(ah-Math.ceil((ah-ag)*al.target.schedule))+"px";if(j.Browser.ie){ai._omBtn.style.top=(ai._quad==3||ai._quad==4)?parseInt(ak.style.height)-ag+"px":"0";ai._omBtn.style.left=(ai._quad==1||ai._quad==4)?parseInt(ak.style.width)-aj+"px":"0";if(ai._opts.anchor>=0&&ai._opts.anchor<=e.ANCHOR_BOTTOM_RIGHT){if(ai._quad==3||ai._quad==4){ak.style.top=ai._map.height-parseInt(ak.style.height)+"px"}if(ai._quad==1||ai._quad==4){ak.style.left=ai._map.width-parseInt(ak.style.width)+"px"}}}ai.dispatchEvent(new ab("onviewchanging"))},onafterfinish:function(al){ak.style.width=ai._btnWidth+"px";ak.style.height=ai._btnHeight+"px";if(j.Browser.ie){ai._omBtn.style.left="0";ai._omBtn.style.top="0";if(ai._opts.anchor>=0&&ai._opts.anchor<=e.ANCHOR_BOTTOM_RIGHT){if(ai._quad==3||ai._quad==4){ak.style.top=ai._map.height-ai._btnHeight+"px"}if(ai._quad==1||ai._quad==4){ak.style.left=ai._map.width-ai._btnWidth+"px"}}}ai._redraw();j.ac(ai._omBtn,"BMap_omBtnClosed");ai.dispatchEvent(new ab("onviewchanged"));ai.changeView._running=false}})}else{if(this._overviewInitialized==false){this._initOverviewMap()}new j.TimeLine({interval:20,duration:100,onafterupdate:function(al){ak.style.width=(Math.ceil(af*al.target.schedule))+"px";ak.style.height=(Math.ceil(ah*al.target.schedule))+"px";if(j.Browser.ie){ai._omBtn.style.top=(ai._quad==3||ai._quad==4)?parseInt(ak.style.height)-ag+"px":"0";ai._omBtn.style.left=(ai._quad==1||ai._quad==4)?parseInt(ak.style.width)-aj+"px":"0";if(ai._opts.anchor>=0&&ai._opts.anchor<=e.ANCHOR_BOTTOM_RIGHT){if(ai._quad==3||ai._quad==4){ak.style.top=ai._map.height-parseInt(ak.style.height)+"px"}if(ai._quad==1||ai._quad==4){ak.style.left=ai._map.width-parseInt(ak.style.width)+"px"}}}ai.dispatchEvent(new ab("onviewchanging"))},onafterfinish:function(al){ak.style.width=af+"px";ak.style.height=ah+"px";if(ai._opts.anchor>=0&&ai._opts.anchor<=e.ANCHOR_BOTTOM_RIGHT){if(j.Browser.ie){if(ai._quad==3||ai._quad==4){ak.style.top=ai._map.height-ah+"px"}if(ai._quad==1||ai._quad==4){ak.style.left=ai._map.width-af+"px"}}}ai._redraw();ai._setBtnPosition();j.rc(ai._omBtn,"BMap_omBtnClosed");ai.dispatchEvent(new ab("onviewchanged"));ai.changeView._running=false}})}},_setRatio:function(){if(!this._map){return}var al=this._map.zoomLevel;var an=this._map.pixelToPoint({x:0,y:0},al);var ai=this._map.pixelToPoint({x:this._map.width,y:this._map.height},al);var ag=this._overviewMap.pixelToPoint({x:0,y:0},this._curOMZoomLevel);var ah=this._overviewMap.pixelToPoint({x:this._overviewMap.width,y:this._overviewMap.height},this._curOMZoomLevel);this._wRatio=(ai.lng-an.lng)/(ah.lng-ag.lng);this._hRatio=(ai.lat-an.lat)/(ah.lat-ag.lat);if(this._wRatio>=1||this._hRatio>=1){this._omViewMv.style.display="none";this._omView.hide()}else{var aj=parseInt(this._overviewMap.width);var af=parseInt(this._overviewMap.height);var am=Math.round(aj*this._wRatio);var ak=Math.round(af*this._hRatio);this._omView.show();this._omView.setDimension(am,ak);this._omViewMv.style.display="block"}this._setOMViewMvPos()},_setOMViewMvPos:function(){if(!this._omView.getDom()){return}if(this._wRatio>=1||this._hRatio>=1){this._omViewMv.style.display="none";return}var ag=this._omView.getDom().style;this._omViewMv.style.display="block";this._omViewMv.style.width=ag.width;this._omViewMv.style.height=ag.height;var af=parseInt(ag.width)-2;var ah=parseInt(ag.height)-2;af=af<0?0:af;ah=ah<0?0:ah;this._omViewMvInn.style.width=af+"px";this._omViewMvInn.style.height=ah+"px";this._omViewInn.style.width=this._omViewMvInn.style.width;this._omViewInn.style.height=this._omViewMvInn.style.height;this._omViewMv.style.left=parseInt(ag.left)+this._overviewMap.offsetX+"px";this._omViewMv.style.top=parseInt(ag.top)+this._overviewMap.offsetY+"px"},setSize:function(ag,ah){if(typeof ag!="number"||typeof ah!="number"){return}ag=ag>0?ag:this._opts.width;ah=ah>0?ah:this._opts.height;this._opts.width=ag;this._opts.height=ah;if(!this._container){return}if(this.changeView._running==true){var af=arguments;var ai=this;setTimeout(function(){af.callee.call(ai,ag,ah)},100);return}O(this._container,[ag,ah]);this.setAnchor(this._opts.anchor);this.dispatchEvent(new ab("resize"))},getSize:function(){return{width:this._opts.width,height:this._opts.height}},setCenterPoint:function(af){var ag=this;this._opts.point=af;if(af==null){if(ag._overviewMap&&ag._map){ag._overviewMap.setCenter(ag._map.centerPoint);ag._overviewMap.enableDraging(true);if(ag.setCenterPoint._preCursor){ag._overviewMap.platform.style.cursor=ag.setCenterPoint._preCursor}}}else{if(af&&af.toString()=="Point"){if(ag._overviewMap){ag._overviewMap.setCenter(af);ag._overviewMap.enableClickPan(false);ag._overviewMap.enableDraging(false);ag.setCenterPoint._preCursor=ag._overviewMap.platform.style.cursor;ag._overviewMap.platform.style.cursor="default"}}}ag._setRatio();ag._redraw()},getCenterPoint:function(){if(this._opts.point){return this._opts.point}else{if(this._overviewMap){return this._overviewMap.centerPoint}}},setOffset:function(af,ag){x.prototype.setOffset.call(this,af,ag);if(af!=0||ag!=0){j.ac(this._container,"withOffset")}else{j.rc(this._container,"withOffset")}},_redraw:function(){if(!this._omCanvas){return}var ap=this._opts.width;var ak=this._opts.height;var ag=this._opts.padding;var ao=this._borderWidth;var an=this._btnWidth;var aj=this._btnHeight;var al=ap;var am=ak;if(this.isOpen==false){al=aj;am=an}if(j.Browser.ie==6){ag=ag-1}var ah=0;var aq=0;var ai=0;var af=0;this._setOutFramePos();this._omCanvas.style.left=this._omCanvas.style.top=this._omCanvas.style.right=this._omCanvas.style.bottom="auto";this._omBtn.style.left=this._omBtn.style.top=this._omBtn.style.right=this._omBtn.style.bottom="auto";if(this._opts.anchor!=e.ANCHOR_NONE&&this._opts.offsetX==0&&this._opts.offsetY==0){switch(this._opts.anchor){case e.ANCHOR_TOP:if(j.Browser.ie==6){this._omCanvas.style.left=ag+1+"px"}else{this._omCanvas.style.left=ag+"px"}this._omCanvas.style.bottom=ag+"px";ah=ap-2*ao;aq=ak-ao;ai=ah-2*ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6&&document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0){ai=ai-2;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+2;aq=aq+1;af=af+1;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px";ai=ai+2;af=af+1}}break;case e.ANCHOR_LEFT:if(j.Browser.ie==6){this._omCanvas.style.top=ag+1+"px"}else{this._omCanvas.style.top=ag+"px"}this._omCanvas.style.right=ag+"px";ah=ap-ao;aq=ak-2*ao;ai=ah-ag-2*ao;af=aq-2*ag-2*ao;if(j.Browser.ie==6){af=af-2;ai=ai-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+2;ai=ai+2;af=af+1;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px";this._omCanvas.style.right=ag-1+"px";af=af+1}}break;case e.ANCHOR_RIGHT:if(j.Browser.ie==6){this._omCanvas.style.left=ag+1+"px";this._omCanvas.style.top=ag+1+"px"}else{this._omCanvas.style.top=ag+"px";this._omCanvas.style.left=ag+"px"}if(j.Browser.ie){this._container.style.left=this._map.width-al+"px"}ah=ap-ao;aq=ak-2*ao;ai=ah-ag-2*ao;af=aq-2*ag-2*ao;if(j.Browser.ie==6){af=af-2;ai=ai-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+2;ai=ai+2;af=af+1;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px";af=af+1}}break;case e.ANCHOR_BOTTOM:if(j.Browser.ie==6){this._omCanvas.style.left=ag+1+"px";this._omCanvas.style.top=ag+1+"px"}else{this._omCanvas.style.left=ag+"px";this._omCanvas.style.top=ag+"px"}if(j.Browser.ie){this._container.style.top=this._map.height-am+"px"}ah=ap-2*ao;aq=ak-ao;ai=ah-2*ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6){ai=ai-2;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+2;aq=aq+1;ai=ai+2;af=af+2;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px";this._omCanvas.style.right=ag-1+"px"}}break;case e.ANCHOR_TOP_LEFT:this._omCanvas.style.bottom=ag+"px";this._omCanvas.style.right=ag+"px";ah=ap-ao;aq=ak-ao;ai=ah-ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6){ai=ai-1;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+1;ai=ai+2;af=af+2;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px";this._omCanvas.style.right=ag-1+"px"}}break;case e.ANCHOR_TOP_RIGHT:if(j.Browser.ie==6){this._omCanvas.style.left=ag+1+"px"}else{this._omCanvas.style.left=ag+"px"}if(j.Browser.ie){this._container.style.left=this._map.width-al+"px"}this._omCanvas.style.bottom=ag+"px";ah=ap-ao;aq=ak-ao;ai=ah-ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6){ai=ai-1;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+1;ai=ai+2;af=af+2;if(j.Browser.ie==7){this._omCanvas.style.bottom=ag-1+"px"}}break;case e.ANCHOR_BOTTOM_LEFT:if(j.Browser.ie==6){this._omCanvas.style.top=ag+1+"px"}else{this._omCanvas.style.top=ag+"px"}if(j.Browser.ie){this._container.style.top=this._map.height-am+"px"}this._omCanvas.style.right=ag+"px";ah=ap-ao;aq=ak-ao;ai=ah-ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6){ai=ai-1;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+1;ai=ai+2;af=af+2;if(j.Browser.ie==7){this._omCanvas.style.right=ag-1+"px"}}break;case e.ANCHOR_BOTTOM_RIGHT:if(j.Browser.ie==6){this._omCanvas.style.top=ag+1+"px";this._omCanvas.style.left=ag+1+"px"}else{this._omCanvas.style.top=ag+"px";this._omCanvas.style.left=ag+"px"}if(j.Browser.ie){this._container.style.top=this._map.height-am+"px";this._container.style.left=this._map.width-al+"px"}if(j.Browser.ie==6){this._container.style.top=this._map.height-am+"px";this._container.style.left=this._map.width-al+"px"}ah=ap-ao;aq=ak-ao;ai=ah-ag-2*ao;af=aq-ag-2*ao;if(j.Browser.ie==6){ai=ai-1;af=af-1}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+1;aq=aq+1;ai=ai+2;af=af+2}break;default:break}if(this._map.width%2==1){this._container.style.left=parseInt(this._container.style.left)-1+"px"}}else{if(j.Browser.ie==6){ag=ag+1}this._omCanvas.style.left=this._omCanvas.style.top=this._omCanvas.style.right=this._omCanvas.style.bottom=ag+"px";ah=ap-2*ao;aq=ak-2*ao;ai=ah-2*ag-2*ao;af=aq-2*ag-2*ao;if(this._opts.offsetX!=0||this._opts.offsetY!=0){j.ac(this._container,"withOffset")}if(j.Browser.ie&&!(document.firstChild.nodeType==8&&document.firstChild.nodeValue.indexOf("CTYPE")>=0)){ah=ah+2;aq=aq+2;ai=ai+2;af=af+2}}if(ah>0&&aq>0){O(this._container.children[0],[ah,aq])}if(ai>0&&af>0){O(this._omCanvas,[ai,af])}this._setBtnPosition();j.rc(this._omBtn,"BMap_omBtnClosed");if(!this._opts.isOpen){this._container.style.width=this._btnWidth+"px";this._container.style.height=this._btnHeight+"px";if(j.Browser.ie){this.changeView._preBtnTop=this._omBtn.style.top;this.changeView._preBtnLeft=this._omBtn.style.left;this._omBtn.style.left="0";this._omBtn.style.top="0"}j.ac(this._omBtn,"BMap_omBtnClosed")}},_setQuad:function(){var ak=this._container;if(!ak){return}var ag=this._quad;var ao=this._map.width;var aj=this._map.height;var af=ao/2;var aq=aj/2;var am=this._opts.width;var ai=this._opts.height;var ah=this._opts.left!="auto"?parseInt(this._opts.left):this._opts.right!="auto"?ao-am-parseInt(this._opts.right):ak.offsetLeft;var ap=this._opts.top!="auto"?parseInt(this._opts.top):this._opts.bottom!="auto"?aj-ai-parseInt(this._opts.bottom):ak.offsetTop;var an=ah+am/2;var al=ap+ai/2;if(an<=af&&al<=aq){this._quad=2}else{if(an>af&&al<=aq){this._quad=1}else{if(an>af&&al>aq){this._quad=4}else{if(an<=af&&al>aq){this._quad=3}}}}if(this._opts.offsetX==0&&this._opts.offsetY==0){switch(this._opts.anchor){case e.ANCHOR_TOP_LEFT:this._quad=2;break;case e.ANCHOR_TOP_RIGHT:this._quad=1;break;case e.ANCHOR_BOTTOM_LEFT:this._quad=3;break;case e.ANCHOR_BOTTOM_RIGHT:this._quad=4;break;case e.ANCHOR_TOP:if(this._quad==3){this._quad=2}else{if(this._quad==4){this._quad=1}}break;case e.ANCHOR_LEFT:if(this._quad==1){this._quad=2}else{if(this._quad==4){this._quad=3}}break;case e.ANCHOR_RIGHT:if(this._quad==2){this._quad=1}else{if(this._quad==3){this._quad=4}}break;case e.ANCHOR_BOTTOM:if(this._quad==1){this._quad=4}else{if(this._quad==2){this._quad=3}}break;default:break}}j.rc(ak,"quad"+ag);j.ac(ak,"quad"+this._quad)},_setOutFramePos:function(){if(this._opts.anchor!=e.ANCHOR_NONE){return}var al=this._map.width;var ah=this._map.height;var ak=this._container;var ag=this._opts.width;var aj=this._opts.height;var af=this._opts.left!="auto"?parseInt(this._opts.left):this._opts.right!="auto"?al-ag-parseInt(this._opts.right):0;var ai=this._opts.top!="auto"?parseInt(this._opts.top):this._opts.bottom!="auto"?ah-aj-parseInt(this._opts.bottom):0;switch(this._quad){case 2:ak.style.right=ak.style.bottom="auto";ak.style.left=af+"px";ak.style.top=ai+"px";break;case 1:ak.style.left=ak.style.bottom="auto";ak.style.right=al-af-ag+"px";ak.style.top=ai+"px";break;case 4:ak.style.left=ak.style.top="auto";ak.style.right=al-af-ag+"px";ak.style.bottom=ah-ai-aj+"px";break;case 3:ak.style.right=ak.style.top="auto";ak.style.left=af+"px";ak.style.bottom=ah-ai-aj+"px";break;default:break}},_setBtnPosition:function(){if(!j.Browser.ie){switch(this._quad){case 2:this._omBtn.style.top="0";this._omBtn.style.left="0";break;case 1:this._omBtn.style.top="0";this._omBtn.style.right="0";break;case 4:this._omBtn.style.bottom="0";this._omBtn.style.right="0";break;case 3:this._omBtn.style.bottom="0";this._omBtn.style.left="0";break;default:break}}else{var ai=this._btnWidth;var ag=this._btnHeight;var af=this._opts.width;var ah=this._opts.height;this._omBtn.style.left="auto";this._omBtn.style.top="auto";this._omBtn.style.right="auto";this._omBtn.style.bottom="auto";switch(this._quad){case 2:this._omBtn.style.left="0px";this._omBtn.style.top="0px";break;case 1:this._omBtn.style.left=af-ai+"px";this._omBtn.style.top="0px";break;case 4:this._omBtn.style.top=ah-ag+"px";this._omBtn.style.left=af-ai+"px";break;case 3:this._omBtn.style.left="0px";this._omBtn.style.top=ah-ag+"px";break;default:break}}},_moveView:function(){this._omView.setPoint(this._map.centerPoint)},_onMainMoveEnd:function(af){switch(this._currentOp){case"dragMap":this._setOMViewMvPos();this._currentOp="";break;case"dragView":if(!this._opts.point){this._omViewMv.style.display="none";this._onMainMoveEnd.omFollow=true;this._overviewMap.panTo(this._map.centerPoint,false,90)}else{this._setOMViewMvPos();this._overviewMap.config.enableMouseDown=true}this._currentOp="";break;default:if(this._opts.point==null){this._onMainMoveEnd.omFollow=true;this._overviewMap.panTo(this._map.centerPoint,false,90)}else{this._setOMViewMvPos()}break}},_onMainZoomEnd:function(){var af=this;af._curOMZoomLevel=af._getCurOMZoomLevel();if(af._opts.point==null){setTimeout(function(){af._overviewMap.centerAndZoom(af._map.centerPoint,af._curOMZoomLevel);af._omView.setPoint(af._map.centerPoint);af._setRatio()},100)}else{setTimeout(function(){af._overviewMap.centerAndZoom(af._opts.point,af._curOMZoomLevel);af._omView.setPoint(af._map.centerPoint);af._setRatio()},100)}},_onViewMapMoveEnd:function(){if(this._opts.point){return}if(this._onMainMoveEnd.omFollow==true){this._onMainMoveEnd.omFollow=false;this._setOMViewMvPos();this._overviewMap.config.enableMouseDown=true;return}},_checkOpts:function(){this._opts.width=this._opts.width>0?this._opts.width:150;this._opts.height=this._opts.height>0?this._opts.height:150;this._opts.padding=this._opts.padding>=0?this._opts.padding:8},hide:function(){this._opts.visible=false;if(this._container){this._container.style.visibility="hidden"}this.dispatchEvent(new ab("onhide"))},show:function(){this._opts.visible=true;if(this._container){this._container.style.visibility="visible"}this.dispatchEvent(new ab("onshow"))}});function y(af){x.call(this);this._opts=j.extend(j.extend(this._opts,{anchor:e.ANCHOR_BOTTOM_LEFT,offsetX:5,offsetY:3,color:"black",unit:"metric"}),af);this._defaultAnchor=e.ANCHOR_BOTTOM_LEFT;if(this._opts.anchor<e.ANCHOR_TOP||this._opts.anchor>e.ANCHOR_BOTTOM_RIGHT){this._opts.anchor=this._defaultAnchor}this._units={metric:{name:"metric",conv:1,incon:1000,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}};if(!this._units[this._opts.unit]){this._opts.unit="metric"}this._scaleText=null;this._numberArray=[]}y.inherits(x,"ScaleControl");j.extend(y.prototype,{initialize:function(ag){if(x.prototype.initialize.call(this,ag)==false){return false}this._render();this._initNumArray();this._updateScale();var af=this;ag.addEventListener("zoomend",function(ah){af._updateScale()});ag.addEventListener("load",function(ah){af._updateScale()});ag.addEventListener("moveend",function(ah){af._updateScale()});ag.addEventListener("dragend",function(ah){af._updateScale()})},_render:function(){x.prototype._render.call(this);j.ac(this._container,"BMap_scaleCtrl");this._container.innerHTML=this._generateHTML();this.setColor(this._opts.color);this._scaleText=this._container.children[0];x.prototype._setPosition.call(this)},_generateHTML:function(){var af='<div class="BMap_scaleTxt" unselectable="on"></div><div class="BMap_scaleBar BMap_scaleHBar"></div><div class="BMap_scaleBar BMap_scaleLBar"></div><div class="BMap_scaleBar BMap_scaleRBar"></div>';return af},setColor:function(af){this._opts.color=af+"";if(!this._container){return}this._container.children[0].style.backgroundColor="transparent";this._container.children[0].style.color=af;for(var ah=1,ag=this._container.children.length;ah<ag;ah++){this._container.children[ah].style.backgroundColor=af}},getColor:function(){return this._opts.color},setUnit:function(af){this._opts.unit=this._units[af]&&this._units[af].name||this._opts.unit;if(!this._map){return}this._updateScale()},getUnit:function(){return this._opts.unit},_setScaleText:function(ag,af){if(typeof ag!="number"||typeof af!="string"){return}this._scaleText.innerHTML=ag+"&nbsp;"+af},_updateScale:function(){var ak=new w(this._map.centerPoint[0],this._map.centerPoint[1]+500000);var al=Math.abs(this._map.pointToPixel(this._map.centerPoint).y-this._map.pointToPixel(ak).y);var ao=ad.getDistanceByMC(this._map.centerPoint,ak)/al;if(ao==0){return}var am=this._convertUnit(ao,this._opts.unit);var af=0;var ag=this._units[this._opts.unit].incon;for(var ai=0,ah=this._numberArray.length;ai<ah;ai++){af=this._numberArray[ai]/am;if(af>60&&af<150){break}}var aj=this._numberArray[ai];var an=aj>=ag?this._units[this._opts.unit].u2:this._units[this._opts.unit].u1;if(aj>=ag){am=am/ag;for(var ai=0,ah=this._numberArray.length;ai<ah;ai++){af=this._numberArray[ai]/am;if(af>60&&af<150){break}}aj=this._numberArray[ai]}this._setScaleText(aj,an);if(Math.round(af)%2!=0&&j.Browser.ie==6){af=af+1}this._container.style.width=Math.round(af)+"px"},_convertUnit:function(af,ag){ag=ag||"metric";if(this._units[ag]){return af*this._units[ag].conv}return af},_initNumArray:function(){var ag=0.5;for(var ah=1,af=F[this._map.mapType].zoomLevelMax*2;ah<af;ah++){if(ah%3==0){ag=ag*2+Math.pow(10,ah/3-1)}else{ag=ag*2}this._numberArray.push(ag)}}});function T(af){x.call(this);this._opts=j.extend(j.extend(this._opts,{type:0,anchor:e.ANCHOR_TOP_LEFT,offsetX:10,offsetY:10}),af);this.controlHeight=[{height:227,zoomHeight:168,sliderHeight:133,sliderCHeight:124},{height:97,zoomHeight:38,sliderHeight:0,sliderCHeight:0},{height:57,zoomHeight:0,sliderHeight:0,sliderCHeight:0},{height:38,zoomHeight:38,sliderHeight:0,sliderCHeight:0}];this._defaultAnchor=e.ANCHOR_TOP_LEFT;if(this._opts.anchor<e.ANCHOR_TOP||this._opts.anchor>e.ANCHOR_BOTTOM_RIGHT){this._opts.anchor=this._defaultAnchor}if(this._opts.type<0||this._opts.type>3){this._opts.type=0}this._maxTotalZoomLv=18;this._minZoomLevel=-1;this._maxZoomLevel=-1;this._totalZoomLv=-1;this._sliderInterval=7;this._minBarY=1;this._maxBarY=-1;this._curBarY=-1;this._zoomDom=null;this._sliderDom=null;this._sliderBaseDom=null;this._zoomEndTimerId=null}T.inherits(x,"StandardMapControl");j.extend(T.prototype,{initialize:function(ag){if(x.prototype.initialize.call(this,ag)==false){return false}this._setParam();this._render();this._bind();this._setSliderZoomLv(ag.zoomLevel);var af=this;ag.addEventListener("zoomend",function(ah){af._setSliderZoomLv(af._map.zoomLevel);var ai=af._container;if(af._msover){return}af._hideTimerId=setTimeout(function(){if(af._opts.type==0){j.rc(ai.children[3],"hvr")}},1000)});af._map.addEventListener("mousewheel",function(){if(af._map.config.enableWheelZoom){var ah=af._container;if(af._opts.type==0){j.ac(ah.children[3],"hvr")}if(af._hideTimerId){clearTimeout(af._hideTimerId);af._hideTimerId=null}}});ag.addEventListener("load",function(ah){af._setSliderZoomLv(af._map.zoomLevel)})},_setParam:function(){var af=this._map.mapType;this._minZoomLevel=F[af].zoomLevelMin;this._maxZoomLevel=F[af].zoomLevelMax;this._totalZoomLv=this._maxZoomLevel-this._minZoomLevel+1;this._maxBarY=this._minBarY+(this._totalZoomLv-1)*this._sliderInterval},_render:function(){x.prototype._render.call(this);var ag=j.Browser.ie==6?" BMap_ie6":"";var af=" BMap_stdMpType"+this._opts.type;this._container.className="BMap_stdMpCtrl"+ag+af;this._container.innerHTML=this._generateHTML(this._opts.type);if(!j.Browser.opera){this._setSliderBarCursor("url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default")}else{this._setSliderBarCursor("pointer")}var ah=this._container;this._zoomDom=j.G(ah.children[1]);this._sliderDom=j.G(ah.children[2]);this._sliderBaseDom=j.G(ah.children[2].children[0]);this.setType(this._opts.type)},_setSliderHeight:function(){var ag=this._opts.type;var ai=this.controlHeight[ag].height;var aj=this.controlHeight[ag].zoomHeight;var ak=this.controlHeight[ag].sliderHeight;var ah=this.controlHeight[ag].sliderCHeight;var af=(this._maxTotalZoomLv-this._totalZoomLv)*this._sliderInterval;this._container.style.height=ai-af+"px";this._zoomDom.style.height=aj-af+"px";this._sliderDom.style.height=ak-af+"px";this._sliderBaseDom.style.height=ah-af+"px"},_generateHTML:function(){var af=[];af.push(this._generatePanHTML());af.push(this._generateZoomHTML());af.push(this._generateSliderHTML());af.push(this._generateZoomBalloonHTML());return af.join("")},_generatePanHTML:function(){var af='<div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div>';return af},_generateZoomHTML:function(){var af='<div class="BMap_stdMpZoom"><div class="BMap_button BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg"></div></div><div class="BMap_button BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg"></div></div></div>';return af},_generateSliderHTML:function(){var af='<div class="BMap_stdMpSlider"><div class="BMap_stdMpSliderBgTop"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放"><div class="BMap_smcbg"></div></div></div>';return af},_generateZoomBalloonHTML:function(){var af='<div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div>';return af},setType:function(af){if(typeof af=="number"&&af>=0&&af<=3){this._opts.type=af}else{this._opts.type=0}if(!this._map){return}var ag=this._container;ag.className=ag.className.replace(/BMap_stdMpType\d/,"BMap_stdMpType"+this._opts.type);this._setSliderHeight();this.setAnchor(this._opts.anchor)},getType:function(){return this._opts.type},_bind:function(){var ag=this;var ak=ag._container;j.on(ak,"mouseover",function(){ag._msover=true;if(ag._hideTimerId){clearTimeout(ag._hideTimerId)}if(ag._opts.type==0){j.ac(ak.children[3],"hvr")}});j.on(ak,"mouseout",function(){if(ag._hideTimerId){clearTimeout(ag._hideTimerId)}ag._msover=false;ag._hideTimerId=setTimeout(function(){if(ag._opts.type==0){j.rc(ak.children[3],"hvr")}ag._hideTimerId=null},1000)});j.on(ak.children[0].children[0],"click",function(){ag._panBy(0,Math.round(ag._map.height*0.3))});j.on(ak.children[0].children[1],"click",function(){ag._panBy(Math.round(ag._map.width*0.3),0)});j.on(ak.children[0].children[2],"click",function(){ag._panBy(-Math.round(ag._map.width*0.3),0)});j.on(ak.children[0].children[3],"click",function(){ag._panBy(0,-Math.round(ag._map.height*0.3))});j.on(ak.children[0].children[4],"click",function(){ag._reset()});j.on(ak.children[1].children[0],"click",function(){ag._zoomIn()});j.on(ak.children[1].children[1],"click",function(){ag._zoomOut()});for(var af=1;af<6;af++){j.on(ak.children[0].children[af],"mouseup",function(al){if((ag._map.currentOperation&f.stdMapCtrlDrag)==0&&(ag._map.currentOperation&f.drag)==0){ac(al)}});j.on(ak.children[0].children[af],"contextmenu",function(al){L(al)});j.on(ak.children[0].children[af],"click",function(al){L(al)})}j.on(ak.children[1].children[0],"mouseup",function(al){if((ag._map.currentOperation&f.stdMapCtrlDrag)==0&&(ag._map.currentOperation&f.drag)==0){ac(al)}});j.on(ak.children[1].children[1],"mouseup",function(al){if((ag._map.currentOperation&f.stdMapCtrlDrag)==0&&(ag._map.currentOperation&f.drag)==0){ac(al)}});j.on(ak.children[1].children[0],"contextmenu",function(al){L(al)});j.on(ak.children[1].children[1],"contextmenu",function(al){L(al)});j.on(ak.children[2].children[2],"mouseup",function(al){if((ag._map.currentOperation&f.stdMapCtrlDrag)==0&&(ag._map.currentOperation&f.drag)==0){ac(al)}});j.on(ak.children[1].children[0],"click",function(al){ac(al)});j.on(ak.children[1].children[1],"click",function(al){ac(al)});j.on(ak.children[2].children[2],"click",function(al){ac(al)});j.on(ak.children[2].children[3],"mouseup",function(al){if(al.button==2){ac(al)}});j.on(ak.children[2].children[3],"contextmenu",function(al){L(al)});j.on(ak.children[3].children[0],"click",function(al){map.zoomTo(18)});j.on(ak.children[3].children[1],"click",function(al){map.zoomTo(12)});j.on(ak.children[3].children[2],"click",function(al){map.zoomTo(8)});j.on(ak.children[3].children[3],"click",function(al){map.zoomTo(4)});j.on(ak.children[2].children[2],"mousedown",function(am){am=window.event||am;var al=0;if(typeof am.layerY!="undefined"){al=am.layerY}else{if(typeof am.offsetY!="undefined"){al=am.offsetY}}var an=0;an=(ag._maxZoomLevel+1)-Math.round(ag._totalZoomLv*parseFloat(al/(ag._totalZoomLv*ag._sliderInterval)));ag._map.zoomTo(an)});j.on(ak.children[2].children[3],"mouseover",function(){j.ac(ak.children[2].children[3],"h")});j.on(ak.children[2].children[3],"mouseout",function(){if((ag._map.currentOperation&f.stdMapCtrlDrag)==0){j.rc(ak.children[2].children[3],"h")}});var ai=function(al){var al=window.event||al;if(al.button==2){return}if((j.Browser.ie&&al.button!=1)){return}if(ak.children[2].children[3].setCapture){ak.children[2].children[3].setCapture()}ag._map.currentOperation|=f.stdMapCtrlDrag;ag._bind.my=al.pageY||al.clientY||0;if(!j.Browser.opera){ag._setSliderBarCursor("url(http://map.baidu.com/iknow/styles/bmap/closedhand.cur), default")}j.on(document,"mousemove",aj);j.on(document,"mouseup",ah);ac(al);return L(al)};var aj=function(am){if((ag._map.currentOperation&f.stdMapCtrlDrag)!=0){var am=window.event||am;var an=am.pageY||am.clientY;var al=ag._curBarY+an-ag._bind.my;if(al>=ag._minBarY&&al<=ag._maxBarY){j.G(ak.children[2].children[3]).style.top=al+"px"}}};var ah=function(am){if((ag._map.currentOperation&f.stdMapCtrlDrag)!=0){var al=j.G(ak.children[2].children[3]);ag._curBarY=parseInt(al.style.top);j.rc(ag._container.children[2].children[3],"h");ag._map.currentOperation&=~f.stdMapCtrlDrag;if(ak&&ak.children[2]&&ak.children[2].children[3]&&ak.children[2].children[3].releaseCapture){ak.children[2].children[3].releaseCapture()}ag._msover=false;if(!j.Browser.opera){ag._setSliderBarCursor("url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default")}var an=(ag._maxZoomLevel+1)-Math.round(parseFloat(ag._curBarY-ag._minBarY)/parseFloat(ag._maxBarY-ag._minBarY)*(ag._totalZoomLv-1)+1);ag._map.zoomTo(an);j.un(document,"mousemove",aj);j.un(document,"mouseup",ah)}};j.on(ak.children[2].children[3],"mousedown",ai)},_setSliderBarCursor:function(af){this._container.children[2].children[3].style.cursor=af},_panBy:function(ag,af){this._map.panBy(ag,af)},_reset:function(){this._map.reset()},_zoomIn:function(){this._map.zoomIn()},_zoomOut:function(){this._map.zoomOut()},_setSliderZoomLv:function(ag){var af=(this._maxZoomLevel-ag)*this._sliderInterval+this._minBarY;this._curBarY=af>this._maxBarY?this._maxBarY:af<this._minBarY?this._minBarY:af;this._container.children[2].children[3].style.top=this._curBarY+"px"}});function g(af){x.call(this);this._opts=j.extend(j.extend(this._opts,{anchor:e.ANCHOR_TOP_RIGHT,offsetX:6,offsetY:2}),af);this._defaultAnchor=e.ANCHOR_TOP_RIGHT;if(this._opts.anchor<e.ANCHOR_TOP||this._opts.anchor>e.ANCHOR_BOTTOM_RIGHT){this._opts.anchor=this._defaultAnchor}this._checkButtonArray=[];this._items=[]}g.inherits(x,"ToolbarControl");j.extend(g.prototype,{initialize:function(af){x.prototype.initialize.call(this,af);this._render()},_render:function(){x.prototype._render.call(this);j.ac(this._container,"BMap_tbarContainer")},addItem:function(ah){if(!ah||!ah._type||ah._type!="toolbarItem"){return}for(var ag=0,af=this._items.length;ag<af;ag++){if(this._items[ag]===ah){return}}this._items.push(ah);if(ah._opts.isCheckButton==true){this._checkButtonArray.push(ah)}ah.initialize(this._map,this);x.prototype._setPosition.call(this)},removeItem:function(ah){if(!ah||!ah._type||ah._type!="toolbarItem"){return}for(var ag=0,af=this._items.length;ag<af;ag++){if(this._items[ag]===ah){ah.remove();this._items.splice(ag,1);break}}for(var ag=0,af=this._checkButtonArray.length;ag<af;ag++){if(this._checkButtonArray[ag]===ah){this._checkButtonArray.splice(ag,1);return}}},_onToolbarItemClicked:function(ai){var ah=ai.target;if(ah._checked==false){return}for(var ag=0,af=this._checkButtonArray.length;ag<af;ag++){if(this._checkButtonArray[ag]!==ah&&this._checkButtonArray[ag]._checked==true){this._checkButtonArray[ag].btnClick()}}},unCheckOthers:function(ag){for(var ah=0,af=this._checkButtonArray.length;ah<af;ah++){if(this._checkButtonArray[ah]!==ag&&this._checkButtonArray[ah]._checked==true){this._checkButtonArray[ah].btnClick()}}}});function o(){this._controls=[]}u.register(function(ag){var af=new o();ag.addEventListener("onaddcontrol",function(ah){af.add(ah.target)})});o.prototype.add=function(af){this._controls.push(af);this.resolveOverlap(af)};o.prototype.resolveOverlap=function(ak){var ai=null;var ag=null;if(ak.toString()=="CopyrightControl"){ai=ak;for(var ah=0,af=this._controls.length-1;ah<af;ah++){if(this._controls[ah].toString()=="OverviewMapControl"){ag=this._controls[ah];break}}}else{if(ak.toString()=="OverviewMapControl"){ag=ak;for(var ah=0,af=this._controls.length-1;ah<af;ah++){if(this._controls[ah].toString()=="CopyrightControl"){ai=this._controls[ah];break}}}}if(!ai||!ag||ai.getAnchor()!=e.ANCHOR_BOTTOM_RIGHT||ag.getAnchor()!=e.ANCHOR_BOTTOM_RIGHT){return}var aj=ai.getOffset();ai.setOffset(parseInt(ag.getDom().style.width)+aj.x,aj.y);ag.addEventListener("viewchanging",function(am){var al=ai.getDom().style;al.right=aj.x+parseInt(am.target.getDom().style.width)+"px"});ag.addEventListener("viewchanged",function(am){var al=ai.getDom().style;al.right=aj.x+parseInt(am.target.getDom().style.width)+"px"})};function k(af,ai,ah,ag){this.minX=af;this.minY=ai;this.maxX=ah;this.maxY=ag}j.extend(k.prototype,{getMaxX:function(){return this.maxX},getMaxY:function(){return this.maxY},getMinX:function(){return this.minX},getMinY:function(){return this.minY},containsBounds:function(af){if(!af||af.toString()!="Bounds"){return}return(af.minX>this.minX&&af.maxX<this.maxX&&af.minY>this.minY&&af.maxY<this.maxY)},getCenterPoint:function(){var af=(this.minX+this.maxX)/2;var ag=(this.minY+this.maxY)/2;return new w(af,ag)},intersects:function(ah){if(!ah||ah.toString()!="Bounds"){return}if(Math.max(ah.minX,ah.maxX)<Math.min(this.minX,this.maxX)||Math.min(ah.minX,ah.maxX)>Math.max(this.minX,this.maxX)||Math.max(ah.minY,ah.maxY)<Math.min(this.minY,this.maxY)||Math.min(ah.minY,ah.maxY)>Math.max(this.minY,this.maxY)){return null}var aj=Math.max(this.minX,ah.minX);var ag=Math.min(this.maxX,ah.maxX);var ai=Math.max(this.minY,ah.minY);var af=Math.min(this.maxY,ah.maxY);return new k(aj,ai,ag,af)},containsPoint:function(af){if(!af||af.toString()!="Point"){return}return(af[0]>=this.minX&&af[0]<=this.maxX&&af[1]>=this.minY&&af[1]<=this.maxY)},extend:function(af){if(!af||af.toString()!="Point"){return}var ah=af[0],ag=af[1];if(this.minX>ah){this.minX=ah}if(this.maxX<ah){this.maxX=ah}if(this.minY>ag){this.minY=ag}if(this.maxY<ag){this.maxY=ag}},getIntersectLine:function(af){if(!af||af.toString()!="Line"){return}var ag=af.sPoint;var ai=af.ePoint;var ah=[];if(ag[1]==ai[1]){if(ag[0]==ai[0]){return null}if(ag[1]>this.minY&&ag[1]<this.maxY){}var af=new Line(ah[0],ah[1]);return af}},toString:function(){return"Bounds"}});function w(af,ag){af=isNaN(af)?0:parseFloat(af);ag=isNaN(ag)?0:parseFloat(ag);this[0]=this["lng"]=af;this[1]=this["lat"]=ag}w.inherits(n,"Point");w.prototype.equals=function(af){if(!af||af.toString()!="Point"){return}if(this.lat==af.lat&&this.lng==af.lng){return true}return false};function s(ah,ai){ah=j.G(ah);if(!ah){return null}n.call(this);this.container=ah;ah.style.overflow="hidden";ah.style.position="relative";ah.unselectable="on";ah.style.backgroundImage="url(http://map.baidu.com/iknow/styles/bmap/bg.png)";ah.onselectstart=function(){return false};ah.innerHTML=this.render();this.width=0;this.height=0;this.offsetX=0;this.offsetY=0;this.platform=ah.childNodes[0];this.maskLayer=this.platform.childNodes[0];this._bind();this.centerPoint=null;this.lastPoint=null;this.zoomLevel=0;this.lastLevel=0;this.mapType="B_NORMAL_MAP";this.defaultZoomLevel=null;this.defaultCenter=null;this.currentOperation=0;this.config={clickInterval:200,movingInterval:0,enableDraging:true,enableKeyboard:true,enableClickPan:false,enableDblclickZoom:true,enableWheelZoom:true,enableMouseDown:true,dblclickZoomStep:1,zoomStep:1,zoomerSizeMin:60,zoomerSizeMax:120,zoomerDuration:360,actionDuration:500,defaultCursor:"http://map.baidu.com/iknow/styles/bmap/openhand.cur",draggingCursor:"http://map.baidu.com/iknow/styles/bmap/closedhand.cur",isOverviewMap:false,centerPoint:{},zoomLevel:10};this.setConfig(ai);this.temp={undoList:[],operating:false,arrow:0,undoPoint:0,undoLength:30,lastDomMoveTime:0,lastMovingTime:0,canKeyboard:false,I:function(aj){return j.I(aj)}};this.platform.style.cursor="url("+this.config.defaultCursor+"), default";if(j.Browser.ie){try{document.execCommand("BackgroundImageCache",false,true)}catch(ag){}}for(var af=0;af<u._register.length;af++){u._register[af](this)}}s.inherits(n,"Map");j.extend(s.prototype,{render:function(){var af=[];af.push('<font id=platform style="overflow: visible; position: absolute; ">');af.push('<font id=mask class="BMap_mask" style="position:absolute; top:0px; left:0px;');af.push(' z-index:9; overflow:hidden;">&nbsp;</font>');af.push("</font>");return af.join("")},_bind:function(){var ah=this;var ag=this.platform;function ai(ak,am){var al=ak.srcElement||ak.target;var aj=ak.offsetX||ak.layerX||0;var an=ak.offsetY||ak.layerY||0;if(al.nodeType!=1){al=al.parentNode}while(al&&al!=ah.container){if(!(al.clientWidth==0&&al.clientHeight==0&&al.offsetParent&&al.offsetParent.nodeName=="TD")&&al.namespaceURI!="http://www.w3.org/2000/svg"){aj+=al.offsetLeft||0;an+=al.offsetTop||0}else{if(al.namespaceURI=="http://www.w3.org/2000/svg"){if(navigator.userAgent.indexOf("Safari")>-1&&al.tagName!="svg"){al=ah.palette}if(ah.palette){aj+=parseFloat(ah.palette.style.left)+ah.offsetX;an+=parseFloat(ah.palette.style.top)+ah.offsetY}}}al=al.offsetParent}am.offsetX=aj;am.offsetY=an;return am}j.on(ah.platform,"mousedown",function(am){if(!ah.config.enableMouseDown){return}var am=window.event||am;ah.temp.operating=true;var al=am.srcElement||am.target;ah._bind.upValid=true;if(ah._bind.dTimer){clearTimeout(ah._bind.dTimer);delete ah._bind.dTimer}ah._bind.dTimer=setTimeout(function(){ah._bind.upValid=false},500);var aj=al;while(aj){if(aj==ah.container){break}if(aj.className=="BMap_Marker"){return}aj=aj.parentNode}if(al.nodeType!=1){al=al.parentNode}if(ah.platform.setCapture){ah.platform.setCapture()}ah.temp.tpx=am.clientX||am.pageX;ah.temp.tpy=am.clientY||am.pageY;ah.dispatchEvent(ai(am,new ab("onmousedown").inherit(am)));if(ah.config.enableDraging&&!(ah.currentOperation&f.drag)&&am.button!=2){var ak=ah.temp;ak.mx=(am.clientX||am.pageX);ak.my=(am.clientY||am.pageY);ak.pl=ah.offsetX;ak.pt=ah.offsetY;ah.currentOperation|=f.drag;if(!ah.temp._hotspotIndex){ah.platform.style.cursor="url("+ah.config.draggingCursor+"), move"}else{ah.platform.style.cursor="pointer"}}L(am)});j.on(document,"mousemove",function(am){if(ah.temp.tpx||ah.temp.tpy){ah.temp.mox=am.clientX||am.pageX-ah.temp.tpx;ah.temp.moy=am.clientY||am.pageY-ah.temp.tpy}var al=ai(am,new ab("ondragstart").inherit(am));var an=new Date().getTime();if(an-ah.temp.lastDomMoveTime<18){return false}ah.temp.lastDomMoveTime=an;if(ah.currentOperation&f.drag&&ah.config.enableDraging){if(ah.platform.style.cursor!="url("+ah.config.draggingCursor+"), move"){ah.platform.style.cursor="url("+ah.config.draggingCursor+"), move"}if(!ah.temp._moved){ah.dispatchEvent(al)}var am=window.event||am;var ar=ah.temp;var aq=am.clientX||am.pageX||0;var ap=am.clientY||am.pageY||0;if(ar.mx==0&&ar.my==0&&ah.temp.keyboardDrag){ar.mx=aq;ar.my=ap;ar.pl=ah.offsetX;ar.pt=ah.offsetY}if(aq-ar.mx!=0||ap-ar.my!=0){ah.temp._moved=true;ah._setPlatformPosition(ar.pl+aq-ar.mx,ar.pt+ap-ar.my)}}if(ah.arrHotspot&&ah.zoomLevel>=4&&ah.zoomLevel<=9&&!(ah.currentOperation&f.drag)){for(var ak=ah.arrHotspot.length-1;ak>=0;ak--){var ao=ah.arrHotspot[ak];var aj=ah.pointToPixel(ao.point);if(aj.x<ah.width&&aj.y<ah.height){if(ah.zoomLevel>4&&ao.zoomLevel<=4){continue}if((aj.x-al.offsetX<6&&aj.x-al.offsetX>-3)&&Math.abs(aj.y-al.offsetY)<6&&ah.zoomLevel>=ao.zoomLevel){ah.platform.style.cursor="pointer";ah.temp._hotspotIndex=ak;break}else{delete ah.temp._hotspotIndex}}}if(typeof ah.temp._hotspotIndex=="undefined"){if(ah.platform.style.cursor!="url("+ah.config.defaultCursor+"), default"){ah.platform.style.cursor="url("+ah.config.defaultCursor+"), default"}}}if(ah.arrHotspot&&(ah.zoomLevel<4||ah.zoomLevel>9)&&typeof ah.temp._hotspotIndex!="undefined"){delete ah.temp._hotspotIndex;if(ah.platform.style.cursor!="url("+ah.config.defaultCursor+"), default"){ah.platform.style.cursor="url("+ah.config.defaultCursor+"), default"}}L(am)});j.on(document,"mouseup",function(aj){if(ah.platform.releaseCapture){ah.platform.releaseCapture()}if(ah.temp.preEnableClickPan){ah.enableClickPan(true)}if(ah.currentOperation&f.drag&&ah.config.enableDraging){var aj=window.event||aj;ah.currentOperation^=f.drag;if(!ah.temp._hotspotIndex){ah.platform.style.cursor="url("+ah.config.defaultCursor+"), default"}else{if(!j.Browser.ie){ah.platform.style.cursor="pointer"}}if(ah.temp._moved){ah.dispatchEvent(ai(aj,new ab("ondragend").inherit(aj)))}else{if(ah._bind.upValid==true){ah.closeInfoWindow()}}ah.lastPoint=ah.centerPoint;ah.temp._moved=false}ah.temp.operating=false});function af(ak){if(ah.config.enableWheelZoom){ah.currentOperation|=f.mousewheel;var ak=window.event||ak;ah.lastLevel=ah.zoomLevel;var aj=new ab("onmousewheel");aj.trend=ak.wheelDelta>=0||ak.detail<0;if(aj.trend==true&&ah.zoomLevel==F[ah.mapType].zoomLevelMax||aj.trend==false&&ah.zoomLevel==F[ah.mapType].zoomLevelMin){ah.currentOperation^=f.mousewheel;L(ak);return}ai(ak,aj.inherit(ak));ah.dispatchEvent(aj);ah.currentOperation^=f.mousewheel;ah.saveScene(aj);ak.returnValue=false}}j.on(ah.container,"mousewheel",af);if(window.addEventListener){ah.container.addEventListener("DOMMouseScroll",af,false)}j.on(ah.platform,"click",function(ak){var aj=new ab("onclick");ai(ak,aj.inherit(ak));if(!ah.currentOperation){if(ah.temp.mox>0||ah.temp.moy>0){if(ah.config.enableDraging){if(ah.config.enableClickPan==true){ah.enableClickPan(true)}}else{ah.temp.preEnableClickPan=ah.config.enableClickPan;ah.enableClickPan(false)}}else{if(ah.config.enableClickPan){ah.enableClickPan(true)}}ah.temp.tpx=null;ah.temp.tpy=null;ah.temp.mox=0;ah.temp.moy=0;if(ah._bind.clicker){clearTimeout(ah._bind.clicker)}ah.temp.hotspotIndex=ah.temp._hotspotIndex;ah._bind.clicker=setTimeout(function(){ah._bind.clicker=false;ah.dispatchEvent(aj);delete ah.temp.hotspotIndex},ah.config.clickInterval)}});j.on(ah.platform,"dblclick",function(ak){if(!ah.currentOperation){if(ah._bind.clicker){clearTimeout(ah._bind.clicker);ah._bind.clicker=false}ah.currentOperation|=f.dblclick;var aj=new ab("ondblclick").inherit(ak);ah.dispatchEvent(ai(ak,aj));ah.currentOperation^=f.dblclick}});ah._watchSize=function(){var ak=ah.getContainerSize();if(ah.width!=ak.width||ah.height!=ak.height){var an=(ak.width-ah.width)/2;var ap=(ak.height-ah.height)/2;var al=ah.getZoomUnits();var am=ah.centerPoint;if(am){ah.centerPoint=new w(am.lng+an*al,am.lat-ap*al)}ah.maskLayer.style.width=(ah.width=ak.width)+"px";ah.maskLayer.style.height=(ah.height=ak.height)+"px";ah.dispatchEvent(new ab("onmapcontainerresize"));ah.lastPoint=ah.centerPoint}var aj=parseInt(ah.platform.style.left)||0;var ao=parseInt(ah.platform.style.top)||0;if(ah.currentOperation!="undefined"&&ah.currentOperation!=0&&(ah.offsetX!=aj||ah.offsetY!=ao)){ah._setPlatformPosition(aj,ao)}};ah._watchSize();setInterval(ah._watchSize,80);if(typeof HTMLElement!="undefined"&&!window.opera&&window.FeBrowser.ie<9){HTMLElement.prototype.contains=function(aj){if(aj==this){return true}while(aj=aj.parentNode){if(aj==this){return true}}return false}}if(!j.Browser.ie&&typeof Event!="undefined"&&!window.opera&&window.FeBrowser.ie<9){Event.prototype.__defineSetter__("returnValue",function(aj){if(!aj){this.preventDefault()}return aj});Event.prototype.__defineSetter__("cancelBubble",function(aj){if(aj){this.stopPropagation()}return aj})}j.on(document,"mousedown",function(ak){var ak=window.event||ak;var aj=ak.srcElement||ak.target;if(ah.temp.canKeyboard){ah.temp.canKeyboard=ah.container.contains(aj)}else{ah.temp.canKeyboard=ah.platform.contains(aj)}});j.on(document,"keydown",function(aj){if(ah.temp.stopArrow==true){ah.temp.stopArrow=false}if(ah.config.enableKeyboard&&ah.temp.canKeyboard){var aj=window.event||aj;switch(aj.keyCode||aj.which){case 43:case 189:case 109:ah.temp.operating=true;ah.zoomOut();break;case 43:case 61:case 187:case 107:ah.temp.operating=true;ah.zoomIn();break;case 33:ah.temp.operating=false;ah.temp.stopArrow=true;ah.panBy(0,Math.round(ah.height*0.8));aj.cancelBubble=true;aj.returnValue=false;break;case 34:ah.temp.operating=false;ah.temp.stopArrow=true;ah.panBy(0,-Math.round(ah.height*0.8));aj.cancelBubble=true;aj.returnValue=false;break;case 35:ah.temp.operating=false;ah.temp.stopArrow=true;ah.panBy(-Math.round(ah.width*0.8),0);aj.cancelBubble=true;aj.returnValue=false;break;case 36:ah.temp.operating=false;ah.temp.stopArrow=true;ah.panBy(Math.round(ah.width*0.8),0);aj.cancelBubble=true;aj.returnValue=false;break;case 37:ah.temp.operating=true;ah.temp.arrow|=1;ah._arrow();aj.cancelBubble=true;aj.returnValue=false;break;case 38:ah.temp.operating=true;ah.temp.arrow|=2;ah._arrow();aj.cancelBubble=true;aj.returnValue=false;break;case 39:ah.temp.operating=true;ah.temp.arrow|=4;ah._arrow();aj.cancelBubble=true;aj.returnValue=false;break;case 40:ah.temp.operating=true;ah.temp.arrow|=8;ah._arrow();aj.cancelBubble=true;aj.returnValue=false;break;case 89:ah.temp.operating=true;if(aj.ctrlKey||aj.metaKey){ah.redo();aj.cancelBubble=true;aj.returnValue=false}break;case 90:ah.temp.operating=true;if(aj.ctrlKey||aj.metaKey){ah.undo();aj.cancelBubble=true;aj.returnValue=false}break}}});j.on(document,"keyup",function(aj){if(ah.config.enableKeyboard){var aj=window.event||aj;switch(aj.keyCode||aj.which){case 37:ah.temp.arrow=ah.temp.arrow&~1;if(ah.temp.arrow!=0){ah._arrow()}break;case 38:ah.temp.arrow=ah.temp.arrow&~2;if(ah.temp.arrow!=0){ah._arrow()}break;case 39:ah.temp.arrow=ah.temp.arrow&~4;if(ah.temp.arrow!=0){ah._arrow()}break;case 40:ah.temp.arrow=ah.temp.arrow&~8;if(ah.temp.arrow!=0){ah._arrow()}break}}ah.temp.operating=false})},_setPlatformPosition:function(ao,an,ag){if(isNaN(ao)||isNaN(an)||(ao==0&&an==0)){return}var aj=F[this.mapType];if(this.zoomLevel<=4){var aq=parseInt(this.platform.style.left)-ao;var ap=parseInt(this.platform.style.top)-an;var ai=-(ao-this.offsetX);var af=-(an-this.offsetY);var ah=this.getZoomUnits();var am=this.centerPoint.lng;var al=this.centerPoint.lat;var ak=new w(am,al);this.centerPoint=new w(ak.lng+ai*ah,ak.lat-af*ah);if(this.centerPoint.lng-Math.round(this.width/2)*this.getZoomUnits()<F[this.mapType].bounds[0]&&aq<=0){ao=parseInt(this.platform.style.left)}if(this.centerPoint.lng+Math.round(this.width/2)*this.getZoomUnits()>F[this.mapType].bounds[2]&&aq>=0){ao=parseInt(this.platform.style.left)}if(this.centerPoint.lat-Math.round(this.height/2)*this.getZoomUnits()<F[this.mapType].bounds[1]&&ap>=0){an=parseInt(this.platform.style.top)}if(this.centerPoint.lat+Math.round(this.height/2)*this.getZoomUnits()>F[this.mapType].bounds[3]&&ap<=0){an=parseInt(this.platform.style.top)}this.platform.style.left=ao+"px";this.platform.style.top=an+"px";if(ag){this.centerPoint=ag}else{var ai=-(ao-this.offsetX);var af=-(an-this.offsetY);var ah=this.getZoomUnits();var ak=new w(am,al);this.centerPoint=new w(ak.lng+ai*ah,ak.lat-af*ah)}this.offsetX=ao;this.maskLayer.style.left=-ao+"px";this.offsetY=an;this.maskLayer.style.top=-an+"px"}else{if(ag){this.centerPoint=ag}else{var ai=-(ao-this.offsetX);var af=-(an-this.offsetY);var ah=this.getZoomUnits();var ak=this.centerPoint;this.centerPoint=new w(ak.lng+ai*ah,ak.lat-af*ah)}this.platform.style.top=an+"px";this.offsetY=an;this.platform.style.left=ao+"px";this.offsetX=ao;this.maskLayer.style.top=-an+"px";this.maskLayer.style.left=-ao+"px"}this.dispatchEvent(new ab("onmoving"));this.lastPoint=this.centerPoint},setViewSize:function(af){O(this.maskLayer,af);this.width=af[0];this.height=af[1]},zoomTo:function(ak,ag){if(typeof ak!="number"){return}var aj=F[this.mapType];if(typeof aj!="object"){return}if(ak<aj.zoomLevelMin){ak=aj.zoomLevelMin}if(ak>aj.zoomLevelMax){ak=aj.zoomLevelMax}if(this.zoomLevel==ak){return}this.lastLevel=this.zoomLevel;if(ag){this.temp._cPoint=ag;this.temp._cPixel=this.pointToPixel(ag)}else{if(!ag&&this.temp.infoWin&&this.temp.infoWin.isOpen()){this.temp._cPixel=this.pointToPixel(this.temp.infoWin.overlay.getPoint());this.temp._cPoint=this.temp.infoWin.overlay.getPoint()}}this.dispatchEvent(new ab("onzoomstart"));this.zoomLevel=ak;if(ag||this.temp.infoWin&&this.temp.infoWin.isOpen()){var ah=this.temp._cPoint;var af=this.temp._cPixel;var ai=this.getZoomUnits(ak);this.centerPoint=new w(ah.lng+ai*(this.width/2-af.x),ah.lat-ai*(this.height/2-af.y))}},zoomIn:function(af){this.zoomTo(this.zoomLevel+this.config.zoomStep,af)},zoomOut:function(af){this.zoomTo(this.zoomLevel-this.config.zoomStep,af)},panTo:function(ag,ai,aj){var ah=this.pointToPixel(ag);var af=Math.round(this.width/2);var ak=Math.round(this.height/2);if(Math.abs(af-ah.x)>this.width||Math.abs(ak-ah.y)>this.height||ai==true){this._panTo(af-ah.x,ak-ah.y,ag)}else{this._panBy(af-ah.x,ak-ah.y,0,aj)}},_panTo:function(ag,af,ah){if(this.temp.operating==true){return}this._setPlatformPosition(this.offsetX+ag,this.offsetY+af,ah);this.dispatchEvent(new ab("onmoveend"));this.lastPoint=this.centerPoint},panBy:function(ah,af,ag){ah=parseFloat(ah)||0;af=parseFloat(af)||0;if(Math.abs(ah)<=this.width&&Math.abs(af)<=this.height){this._panBy(ah,af,ag)}else{this._panTo(ah,af)}},_panBy:function(ah,af,ag,ak){if(this.temp.operating==true){return}this.dispatchEvent(new ab("onmovestart"));var aj=this,ai=aj.temp;ai.pl=aj.offsetX;ai.pt=aj.offsetY;if(this.temp.tlPan){this.temp.tlPan.cancel()}this.temp.tlPan=new j.TimeLine({interval:ag||30,duration:ak||aj.config.actionDuration,render:function(al){this.terminative=aj.temp.operating;if(aj.temp.operating){return}if(!ag){al=Math.pow(al,3)}aj._setPlatformPosition(ai.pl+Math.ceil(ah*al),ai.pt+Math.ceil(af*al))},finish:function(al){aj.dispatchEvent(new ab("onmoveend"));aj.temp.tlPan=false;if(aj.temp.stopArrow==true){aj.temp.stopArrow=false;if(aj.temp.arrow!=0){aj._arrow()}}aj.lastPoint=aj.centerPoint}})},_arrow:function(){if(this._arrow.occurrent&&this._arrow._lastArrow==this.temp.arrow&&this.temp.stopArrow==true){return}var af=this;var ag=af.temp.arrow;af._arrow._lastArrow=ag;af._arrow.interval=33;af._arrow.duration=999;af._arrow.dx=af._arrow.dy=0;if(ag&1){af._arrow.dx=1}if(ag&2){af._arrow.dy=1}if(ag&4){af._arrow.dx=-1}if(ag&8){af._arrow.dy=-1}if(ag&1&&ag&4){af._arrow.dx=0}if(ag&2&&ag&8){af._arrow.dy=0}if(!af._arrow.occurrent){af._arrow.occurrent=true;af._arrow.time=new Date().getTime();af._arrow.beginTime=af._arrow.time;af.dispatchEvent(new ab("onmovestart"));new j.TimeLine({trend:false,interval:af._arrow.interval,duration:af._arrow.duration,render:function(an){var ai=af._arrow;var al=af.temp.arrow;if(af._arrow._lastArrow!=al){af._arrow._lastArrow=al;if(al&1){ai.dx=1}if(al&2){ai.dy=1}if(al&4){ai.dx=-1}if(al&8){ai.dy=-1}if(al&1&&al&4){ai.dx=0}if(al&2&&al&8){ai.dy=0}}if(af.temp.stopArrow==true){ai.dx=0;ai.dy=0}var am=new Date().getTime();var ak=Math.pow((am-ai.beginTime)/ai.duration,2);if(!af.temp.arrow){ai.occurrent=false;this.terminative=true;setTimeout(function(){af.dispatchEvent(new ab("onmoveend"))},40)}var ao=(am-ai.time);var aj=ai.dx*ao*ak>=0?Math.ceil(ai.dx*ao*ak):Math.floor(ai.dx*ao*ak);var ah=ai.dy*ao*ak>=0?Math.ceil(ai.dy*ao*ak):Math.floor(ai.dy*ao*ak);if(aj!=0&&ah!=0){aj=Math.round(aj*Math.SQRT1_2);ah=Math.round(ah*Math.SQRT1_2)}ai.time=am;af._setPlatformPosition(af.offsetX+aj,af.offsetY+ah)},finish:function(){af._arrow.time=new Date().getTime();setTimeout(function(){af._arrowPan()},af._arrow.interval)}})}},_arrowPan:function(){var ai=this;var ag=ai._arrow;if(ai.temp.stopArrow){ag.dx=0;ag.dy=0}if(!ai.temp.arrow){ag.occurrent=false;ai.dispatchEvent(new ab("onmoveend"));return}var aj=new Date().getTime();var ak=(aj-ag.time);var ah=Math.ceil(ag.dx*ak);var af=Math.ceil(ag.dy*ak);ag.time=aj;ai._setPlatformPosition(ai.offsetX+ah,ai.offsetY+af);setTimeout(function(){ai._arrowPan()},ag.interval)},addControl:function(af){if(af&&af._type=="control"&&typeof af.initialize=="function"){af.initialize(this);this.dispatchEvent(new ab("onaddcontrol",af))}},removeControl:function(af){if(af&&af._type=="control"&&typeof af.remove=="function"){this.dispatchEvent(new ab("onremovecontrol",af));af.remove()}},addContextMenu:function(af){if(af&&af._type=="contextmenu"&&typeof af.initialize=="function"){af.initialize(this);this.dispatchEvent(new ab("onaddcontextmenu",af))}},removeContextMenu:function(af){if(af&&af._type=="contextmenu"&&typeof af.remove=="function"){this.dispatchEvent(new ab("onremovecontextmenu",af));af.remove()}},addOverlay:function(af){if(af&&af._type=="overlay"&&typeof af.initialize=="function"){this.dispatchEvent(new ab("onaddoverlay",af));af.initialize(this)}},removeOverlay:function(af){if(af&&af._type=="overlay"&&typeof af.remove=="function"){this.dispatchEvent(new ab("onremoveoverlay",af));af.remove()}},clearOverlays:function(){this.dispatchEvent(new ab("onclearoverlays"))},setCenter:function(af){if(!(af instanceof w)){return}this.panTo(af,true)},centerAndZoom:function(af,ah){if(af==null&&this.config.centerPoint!=null){af=this.config.centerPoint}if(ah==null&&this.config.zoomLevel!=null){ah=this.config.zoomLevel}if(typeof ah!="number"){return}var ag=F[this.mapType];if(typeof ag!="object"){return}if(ah<ag.zoomLevelMin){ah=ag.zoomLevelMin}if(ah>ag.zoomLevelMax){ah=ag.zoomLevelMax}this.lastLevel=this.zoomLevel||ah;this.zoomLevel=ah;this.centerPoint=af;this.defaultZoomLevel=this.defaultZoomLevel||this.zoomLevel;this.defaultCenter=this.defaultCenter||af;this.dispatchEvent(new ab("onload"))},reset:function(){var ag=this;var ah=ag.defaultZoomLevel;var af=ag.defaultCenter;ag.centerAndZoom(af,ah)},openInfoWindow:function(ai,af){if(!ai||ai.toString()!="InfoWindow"||af.toString()!="Point"){return}if(!this.temp.marker){var ag=new l(aa.imgPath+"/blank.gif",{width:0,height:0});this.temp.marker=new C(af,{icon:ag})}else{this.temp.marker.setPoint(af)}this.addOverlay(this.temp.marker);this.temp.marker.openInfoWindow(ai);this.temp._infoWindowOpened=true;var ah=this;ai.addEventListener("onclose",function(){ah.temp._infoWindowOpened=false})},closeInfoWindow:function(){if(this.temp.infoWin&&this.temp.infoWin.overlay){this.temp.infoWin.overlay.closeInfoWindow()}},resizeMapDiv:function(){var af=this.getContainerSize();if(this.width&&af.width==this.width&&af.height==this.height){return}this.setViewSize(af);this.dispatchEvent(new ab("onmapcontainerresize"))},saveScene:function(ag){if(!(this.currentOperation&f.undo||this.currentOperation&f.redo)){var ah=this;var ai=ah.temp.undoList;if(ai.length>ah.temp.undoLength){ai.reverse();ai.length=Math.ceil(ah.temp.undoLength/5);ai.reverse()}var aj={name:ag.type,level:ah.zoomLevel,point:ah.centerPoint};if(ah.temp.undoPoint<ai.length){ai.length=ah.temp.undoPoint}var af=ai.length>0?ai[ai.length-1]:false;if(af&&af.level==aj.level&&af.point[0]==aj.point[0]&&af.point[1]==aj.point[1]){ai[ai.length-1]=aj}else{ai.push(aj)}ah.temp.undoPoint=ai.length}},undo:function(){var af=this;var ag=this.temp.undoList;if(af.temp.undoPoint==ag.length){af.saveScene(new j.BaseEvent("undo"));if(ag[ag.length-1].name=="undo"){af.temp.undoPoint--}}if(af.temp.undoPoint>0){af.temp.undoPoint--;var ah=ag[af.temp.undoPoint];af.currentOperation|=f.undo;if(ah.level!=af.zoomLevel){af.zoomTo(ah.level)}if(!af.centerPoint.equals(ah.point)){af.setCenter(ah.point)}af.currentOperation^=f.undo}},redo:function(){var af=this;var ag=this.temp.undoList;if(af.temp.undoPoint<ag.length){af.temp.undoPoint++;var ah=ag[af.temp.undoPoint];if(!ah){return}af.currentOperation|=f.redo;if(ah.level!=af.zoomLevel){af.zoomTo(ah.level)}if(!af.centerPoint.equals(ah.point)){af.setCenter(ah.point)}af.currentOperation^=f.redo;if(af.temp.undoPoint==ag.length-1&&ag[af.temp.undoPoint].name=="undo"){af.temp.undoList.length=af.temp.undoPoint}}},enableDraging:function(af){this.config.enableDraging=!!af},enableScrollWheelZoom:function(af){this.config.enableWheelZoom=!!af},enableClickPan:function(af){this.config.enableClickPan=!!af},enableDoubleClickZoom:function(af){this.config.enableDblclickZoom=!!af},enableKeyboard:function(af){this.config.enableKeyboard=!!af},getContainerSize:function(){var af=[this.container.clientWidth,this.container.clientHeight];af.width=af[0];af.height=af[1];return af},getZoomUnits:function(ah){var af=F[this.mapType];if(typeof af!="object"){return null}var ag=ah||this.zoomLevel;return Math.pow(2,(af.zoomLevelMax-ag))*af.baseUnits/af.tileSize},pointToPixel:function(ag,aj){if(!ag){return}var ah=this.getZoomUnits(aj);var af=Math.round((ag[0]-this.centerPoint[0])/ah+this.width/2);var ai=Math.round((this.centerPoint[1]-ag[1])/ah+this.height/2);return new p(af,ai)},pixelToPoint:function(ah,aj){if(!ah){return}var af=this.getZoomUnits(aj);var ag=this.centerPoint.lng+af*(ah.x-this.width/2);var ai=this.centerPoint.lat-af*(ah.y-this.height/2);return new w(ag,ai)},pt2px:function(af,ah){var ag=this.pointToPixel(af,ah);return new p(ag.x+this.offsetX,ag.y+this.offsetY)},px2pt:function(af,ah){var ag=new p(af.x-this.offsetX,af.y-this.offsetY);return this.pixelToPoint(ag,ah)},getEventPoint:function(ag,ah){if(typeof ag.offsetY=="number"){var af=new p(ag.offsetX,ag.offsetY);return this.pixelToPoint(af,ah)}else{return null}},getBounds:function(){var ag=this.pixelToPoint({x:0,y:this.height});var af=this.pixelToPoint({x:this.width,y:0});return new k(ag.lng,ag.lat,af.lng,af.lat)},setConfig:function(af){if(af==null){return}for(var ag in af){if(typeof(this.config[ag])==typeof(af[ag])){this.config[ag]=af[ag]}}},getPointsBounds:function(ag){var ah=new k(Number.MAX_VALUE,Number.MAX_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);for(var af=ag.length-1;af>=0;af--){ah.extend(ag[af])}if(ah.minX==Number.MAX_VALUE&&ah.minY==Number.MAX_VALUE&&ah.maxX==Number.MIN_VALUE&&ah.maxY==Number.MIN_VALUE){return null}return ah},getBestMap:function(ai,ag,aj){if(ai.length==0){return}var af=this.getBounds();var ah=this.getPointsBounds(ai);if(!ah){return}var ak=ah.getCenterPoint();var al=this.getBestLevel(ah,ag);if(aj){if(!af.containsBounds(ah)){this.centerAndZoom(ak,al)}}else{this.centerAndZoom(ak,al)}return{center:ak,level:al}},getBestLevel:function(ag,ai){var aj=F[this.mapType];ai=ai||10;var ak=typeof(ai);var al=eh=ai;if(ak=="object"){al=ai[0];eh=ai[1]}if(typeof aj!="object"){return}var af=aj.zoomLevelMin;var an=aj.zoomLevelMax;for(var ah=an;ah>=af;ah--){var am=this.getZoomUnits(ah);if((ag.getMaxX()-ag.getMinX())/am<this.width-al*2&&(ag.getMaxY()-ag.getMinY())/am<this.height-eh*2){break}}if(ah==-1){ah++}if(ah==aj.zoomLevelMax){ah--}return ah},addHotspot:function(af){if(!af){return}if(!this.arrHotspot){this.arrHotspot=[]}this.arrHotspot[this.arrHotspot.length]=af},clearHotspot:function(){delete this.arrHotspot},setMapBounds:function(ag){var ag=new k(ag[0],ag[1],ag[2],ag[3]);if(ag.containsPoint(this.centerPoint)){return}var af=new w(this.centerPoint.lng,this.centerPoint.lat);if(af.lng>ag.getMaxX()){af.lng=ag.getMaxX()}if(af.lat>ag.getMaxY()){af.lat=ag.getMaxY()}if(af.lng<ag.getMinX()){af.lng=ag.getMinX()}if(af.lat<ag.getMinY()){af.lat=ag.getMinY()}this.centerPoint=af}});u.register(function(af){af.addEventListener("onload",function(ag){af.saveScene(ag)});af.addEventListener("ondragstart",function(ag){af.saveScene(ag)});af.addEventListener("onmovestart",function(ag){af.saveScene(ag)});af.addEventListener("onzoomstart",function(ag){af.saveScene(ag)})});var F={B_NORMAL_MAP:{tileUrls:["http://q1.baidu.com/it/","http://q2.baidu.com/it/","http://q3.baidu.com/it/","http://q4.baidu.com/it/","http://q5.baidu.com/it/","http://q6.baidu.com/it/","http://q7.baidu.com/it/","http://q8.baidu.com/it/"],tileSize:256,baseUnits:256,zoomLevelMin:1,zoomLevelMax:18,errorUrl:"http://map.baidu.com/iknow/styles/bmap/bg.png",bounds:[-21364736,-10616832,23855104,15859712]},B_SATELLITE_MAP:{tileUrl:"http://jx-apptest-map02.jx.baidu.com:9500/maptile/",tileSize:256,baseUnits:204.8,zoomLevelMin:0,zoomLevelMax:17},B_PHYSICAL_MAP:{tileUrl:"http://jx-apptest-map02.jx.baidu.com:9500/maptile/",tileSize:256,baseUnits:204.8,zoomLevelMin:0,zoomLevelMax:17}};function D(ag,ai,af,ah){if(!ag||!ai||typeof ai!="function"||!af||af<0){return}n.call(this);this._text=ag+"";this._callback=ai;this._width=af;this._id=ah;this._map=null;this._type="menuitem";this._contextmenu=null;this._container=null;this.menuPoint=null;this.enabled=true}D.inherits(n,"MenuItem");j.extend(D.prototype,{initialize:function(af,ag){if(this._container){return false}this._map=af;this._contextmenu=ag;this._render();this._bind();return true},remove:function(){var af=this;this._container.parentNode.removeChild(this._container);this._container=null;this._contextmenu=null;this._map=null},_render:function(){var af="<div"+(this._id?" id='"+this._id+"'":"")+" unselectable='on' style='cursor:pointer;width: "+this._width+"px;'><span>"+this._text+"</span></div>";this._container=M(this._contextmenu.getDom(),af);this._container.className="BMap_menuItem";return this._container},_bind:function(){var af=this;j.on(this._container,"click",function(ag){if(!af.enabled){ac(ag);return}af.menuPoint=af._contextmenu.curPoint;if(af._callback&&af._callback.call){af._callback.call(af,ag)}});j.on(this._container,"mousedown",function(ag){ac(ag)});j.on(this._container,"mouseover",function(){if(!af.enabled){return}j.ac(af._container,"selected")});j.on(this._container,"mouseout",function(){if(!af.enabled){return}j.rc(af._container,"selected")})},setText:function(af){if(!af){return}this._text=af+"";if(this._container){this._container.innerHTML="<span>"+this._text+"</span>"}},getDom:function(){return this._container},enable:function(af){this.enabled=!!af;if(af&&this._container){this._container.style.color="";this._container.style.cursor="pointer"}else{if(!af&&this._container){this._container.style.color="#aaa";this._container.style.cursor="url("+map.config.defaultCursor+"), move";j.rc(this._container,"selected")}}}});var f={undo:1,redo:2,zoom:4,drag:8,move:16,mousewheel:32,toolbarOperation:64,stdMapCtrlDrag:128,dblclick:256};var i={_map:null,_html:"<div class='BMap_opMask' unselectable='on'></div>",_maskElement:null,_cursor:"default",inUse:false,show:function(af){if(!this._map){this._map=af}this.inUse=true;if(!this._maskElement){this._createMask(af)}this._maskElement.style.display="block"},_createMask:function(af){if(!this._map){this._map=af}if(!this._map){return}this._maskElement=M(this._map.container,this._html);j.on(this._maskElement,"mouseup",function(ag){if(ag.button==2){ac(ag);return L(ag)}});j.on(this._maskElement,"click",function(ag){});this._maskElement.style.display="none"},getDrawPoint:function(ah,ak,ai){ah=window.event||ah;var af=ah.layerX||ah.offsetX||0;var aj=ah.layerY||ah.offsetY||0;var ag=ah.target||ah.srcElement;if(ag!=i.getDom(this._map)&&ak==true){while(ag&&ag!=this._map.container){if(!(ag.clientWidth==0&&ag.clientHeight==0&&ag.offsetParent&&ag.offsetParent.nodeName.toLowerCase()=="td")){af+=ag.offsetLeft;aj+=ag.offsetTop}ag=ag.offsetParent}}if(ag!=i.getDom(this._map)&&ag!=this._map.container){return}if(typeof af==="undefined"||typeof aj==="undefined"){return}if(isNaN(af)||isNaN(aj)){return}if(ai){af=af+ai.x;aj=aj+ai.y}return this._map.pixelToPoint(new p(af,aj))},hide:function(){if(!this._map){return}this.inUse=false;if(this._maskElement){this._maskElement.style.display="none"}},getDom:function(af){if(!this._maskElement){this._createMask(af)}return this._maskElement},setCursor:function(af){this._cursor=af||"default";if(this._maskElement){this._maskElement.style.cursor=this._cursor}}};function X(){j.BaseClass.call(this);this.visible=false;this._type="overlay";this.infoWindow=null}X.inherits(j.BaseClass,"Overlay");u.register(function(ah){var ag='<div style="position:absolute;top:0;left:0;width:0;height:0;z-index:200"></div>';ah.temp.overlayDiv=ah.overlayDiv=M(ah.platform,ag);var af='<div style="position:absolute;top:0;left:0;width:0;height:0" type="system"></div>';ah.temp.areaDiv=M(ah.temp.overlayDiv,af);ah.temp.areaDiv.style.zIndex=700;ah.temp.labelDiv=M(ah.temp.overlayDiv,af);ah.temp.labelDiv.style.zIndex=500;ah.markerDiv=ah.temp.markerDiv=M(ah.temp.overlayDiv,af);ah.temp.markerDiv.style.zIndex=400});j.extend(X.prototype,{remove:function(){if(this.domElement&&this.domElement.parentNode&&this.domElement.parentNode.tagName){if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay==this){this.closeInfoWindow()}this.domElement.parentNode.removeChild(this.domElement);this.dispatchEvent(new ab("onremove"))}},_addOverlayDom:function(){var ag=this.map;if(this.domElement==null||this.domElement&&this.domElement.innerHTML==""){switch(this.toString()){case"Marker":this.domElement=M(ag.temp.areaDiv,this.render());this.siblingElement=M(ag.temp.markerDiv,this.siblingRender());this.siblingElement.hashCode=this.getHashCode();break;case"Label":this.domElement=M(ag.temp.labelDiv,this.render());break;default:this.domElement=M(ag.temp.overlayDiv,this.render());break}this.domElement.hashCode=this.getHashCode();var af=this;j.on(this.domElement,"mouseover",function(ah){af.dispatchEvent(new ab("onmouseover"))});j.on(this.domElement,"mouseout",function(ah){af.dispatchEvent(new ab("onmouseout"))});j.on(this.domElement,"click",function(ai){var ah=ai.srcElement||ai.target;while(ah){if(ah==af.domElement){af.dispatchEvent(new ab("onclick"));break}else{if(af.map.infoWindow&&ah==af.map.infoWindow.popDom){break}}ah=ah.parentNode}ai.cancelBubble=true;ai.returnValue=false});j.on(this.domElement,"mousedown",function(ah){af.dispatchEvent(new ab("onmousedown"))});j.on(this.domElement,"mouseup",function(ah){af.dispatchEvent(new ab("onmouseup"))});j.on(this.domElement,"dblclick",function(ah){af.dispatchEvent(new ab("ondblclick"));ah.cancelBubble=true;ah.returnValue=false})}else{if(this.toString()=="Marker"){ag.markerDiv.appendChild(this.domElement);ag.markerDiv.appendChild(this.siblingElement)}else{ag.overlayDiv.appendChild(this.domElement)}}this.setPoint(this.point)},copy:function(){},hide:function(){if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay==this){this.closeInfoWindow()}j.hide(this.domElement)},show:function(){j.show(this.domElement)},dispose:function(){j.BaseClass.prototype.dispose.call(this)},openInfoWindow:function(aj,ai){if(!aj||!this.domElement||aj.toString()!="InfoWindow"){return}if(this.map.temp.infoWin&&this.map.temp.infoWin.isOpen()&&this.map.temp.infoWin.overlay===this){return}if(this.map.temp.infoWin&&this.map.temp.infoWin.isOpen()){map.closeInfoWindow()}this.infoWindow=aj;aj.initialize(this);var af=this.map.infoWindow;var ag=this.map.temp;ag.infoWin=aj;if(!ag.pop){ag.pop=M(this.map.temp.overlayDiv,"<span style='position: absolute;z-index:800' type='system'></span>")}if(!ag.shadow){ag.shadow=M(this.map.temp.overlayDiv,"<span style='position: absolute;z-index:600' type='system'></span>")}aj.setPosition();ag.shadow.appendChild(af.shadowDom);ag.pop.appendChild(af.popDom);aj.reset(false);if(!(ai&&ai.notMove)){setTimeout(function(){aj.setPanTo()},200)}var ah=this;if(this.toString()=="Marker"&&this.iconArea){this.iconArea.style.cursor="default";if(ah.getLabel()&&ah.getLabel().getDom()){ah.getLabel().getDom().style.cursor="default"}aj.addEventListener("close",function(){if(ah._config&&ah._config.clickable==true&&ah.iconArea){ah.iconArea.style.cursor="pointer"}if(ah.getLabel()&&ah.getLabel().getDom()){ah.getLabel().getDom().style.cursor=ah.getLabel()._config.cursor}aj.removeEventListener("close",arguments.callee)})}this.dispatchEvent(new ab("oninfowindowopen"))},closeInfoWindow:function(){if(!this.map||!this.map.infoWindow){return}var ag=this;if(this.infoWindow!=null&&this.infoWindow.hashCode==this.map.infoWindow.hashCode){try{ag.infoWindow.hide()}catch(af){}this.dispatchEvent(new ab("oncloseInfoWindow"))}this.infoWindow=null},setStyle:function(af){if(this.domElement){if(this.siblingElement){this.siblingElement.style.cssText=this.siblingElement.style.cssText+";"+af}else{this.domElement.style.cssText=this.domElement.style.cssText+";"+af}}},getDom:function(){return this.domElement},setConfig:function(ag){if(ag==null){return}for(var af in ag){if(typeof(this._config[af])==typeof(ag[af])){this._config[af]=ag[af]}}},overlayPoints:function(aj){var ai=[];var ah=[];var af=typeof(aj)=="string"?aj.split(";"):aj;for(var ag=0;ag<af.length;ag++){if(typeof(af[ag])=="string"){var ak=af[ag].split(",");var al=new w(parseFloat(ak[0]),parseFloat(ak[1]));ah.push(al);ai.push(this.getOverLayPosition(al))}else{ai.push(this.getOverLayPosition(af[ag]))}}if(typeof(aj)!="string"){ah=aj}return{pixels:ai,points:ah}},getOverLayPosition:function(ag){var ai=this.map;var ah=ai.pointToPixel(ag);var af=ah[0]-ai.offsetX;var aj=ah[1]-ai.offsetY;return new p(af,aj)},overlayPixel:function(af){var ag=this.map;if(af.toString()=="Point"){return ag.pt2px(af,ag.zoomLevel)}else{return ag.px2pt(af,ag.zoomLevel)}},setPoint:function(af){if(af&&af.toString()=="Point"){this.point=this._config.point=af;var ah=(this._config&&this._config.offset)?this._config.offset:[0,0];var ag=this.getOverLayPosition(af);if(this.domElement&&this.domElement.style){this.domElement.style.left=(ag.x+ah[0])+"px";this.domElement.style.top=(ag.y+ah[1])+"px"}this._elemTop=(ag.y+ah[1]);if(this.siblingElement){this.siblingElement.style.left=this.domElement.style.left;this.siblingElement.style.top=this.domElement.style.top}if(this.infoWindow!=null&&this.infoWindow.isOpen()){this.infoWindow.setPosition()}}},getPoint:function(ah,ai){if(!ah){return this.point}else{var af=ai?ai[0]:0;var aj=ai?ai[1]:0;if(this.map){var ag=this.map.pointToPixel(this.point);if(this._config&&this._config.offset){ag.x=ag.x+this._config.offset[0]+af;ag.y=ag.y+this._config.offset[1]+aj}else{ag.x=ag.x+af;ag.y=ag.y+aj}return this.map.pixelToPoint(ag)}}}});function V(af){X.call(this);this._config={lineColor:"black",weight:1,opacity:1,fillColor:"white",lineStyle:"solid",startArrow:"none",endArrow:"none"};this.drawMargin=350;this.setConfig(af);if(this._config.weight<=0){this._config.weight=1}if(this._config.opacity<0){this._config.opacity=0}else{if(this._config.opacity>1){this._config.opacity=1}}if(this._config.lineStyle!="solid"&&this._config.lineStyle!="dashed"){this._config.lineStyle="solid"}this.domElement=null;this.isSvg=!!window.SVGAngle;this.isVml=!window.SVGAngle;this.svgs="http://www.w3.org/2000/svg";this.svgType={strokeweight:"stroke-width",strokecolor:"stroke",stroked:"stroke",fillcolor:"fill",filled:"fill"}}V.inherits(X,"Draw");j.extend(V.prototype,{_addOverlayDom:function(){if(this.map.palette){this.setPalette()}},createPalette:function(){if(this.map.palette){this.setPalette();return}var ah=this.map.overlayDiv;var af;if(this.isSvg){af=document.createElementNS(this.svgs,"svg");this.setTypeNS(af,"font-size","24px");this.setTypeNS(af,"version","1.1");af.style.position="absolute";af.style.zIndex="200";af.setAttribute("type","system");ah.appendChild(af)}else{if(this.isVml){var ag='<font style="overflow:visible;z-index:200" type="system"></font>';af=M(ah,ag)}}this.map.palette=af;this.setPalette()},setPalette:function(){if(!this.isSvg){return}var ak=this.map;var ag=ak.palette;var ah=ak.width*3;var af=ak.height*3;var aj=-ak.offsetX-ak.width;var ai=-ak.offsetY-ak.height;this.setTypeNS(ag,"x",ah+"px");this.setTypeNS(ag,"y",af+"px");ag.style.top=ai+"px";ag.style.left=aj+"px";ag.style.width=ah+"px";ag.style.height=af+"px";this.setTypeNS(ag,"viewBox",aj+" "+ai+" "+ah+" "+af)},polyline:function(ah,aj){var ai=this;var ag=this.map.palette;if(this.isSvg){var af=document.createElementNS(this.svgs,"path");this.setTypeNS(af,"stroke-linejoin","round");this.setTypeNS(af,"stroke-linecap","round");ag.appendChild(af)}else{if(this.isVml){var ak=['<v:shape style="z-index:1;left:0;width:1;position:absolute;top:0;height:1"','coordsize="1,1" coordorigin = "0,0" filled="t" fillcolor="white" >','<v:stroke endcap="round" />',"<v:fill />","</v:shape>"].join("");var af=M(ag,ak);af.style.width="1px";af.style.height="1px"}}this.setPolylinePoint(af,ah,aj);if(this._config.startArrow!="none"){this.startArrow(this._config.startArrow,af)}if(this._config.endArrow!="none"){this.endArrow(this._config.endArrow,af)}if(j.Browser.ie){j.on(af,"mouseover",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"mousemove",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"mouseout",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"click",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"mousedown",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"mouseup",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))});j.on(af,"dblclick",function(al){ai.dispatchEvent(G(al,new ab("onmouseover").inherit(al)))})}else{j.on(af,"mouseover",function(al){ai.dispatchEvent(new ab("onmouseover").inherit(m(al)))});j.on(af,"mousemove",function(al){ai.dispatchEvent(new ab("onmousemove").inherit(m(al)))});j.on(af,"mouseout",function(al){ai.dispatchEvent(new ab("onmouseout").inherit(m(al)))});j.on(af,"click",function(al){ai.dispatchEvent(new ab("onclick").inherit(m(al)))});j.on(af,"mousedown",function(al){ai.dispatchEvent(new ab("onmousedown").inherit(m(al)))});j.on(af,"mouseup",function(al){ai.dispatchEvent(new ab("onmouseup").inherit(m(al)))});j.on(af,"dblclick",function(al){ai.dispatchEvent(new ab("ondblclick").inherit(m(al)))})}j.on(this,"remove",function(al){this.remove();ai.dispatchEvent(new ab("remove").inherit(al))});return af},setPolylinePoint:function(ai,am){var am=this.overlayPoints(am);var an=am.points;var al=am.pixels;if((an[an.length-1].lat!=an[0].lat||an[an.length-1].lng!=an[0].lng)&&!this.isSvg&&this.toString()=="Polygon"){an[an.length]=an[0];al[al.length]=al[0]}this.points=am.points;if(!ai){return}var ag=[];for(var ak=0;ak<al.length;ak++){if(al[ak+1]!=null){var ah=this.getIntersectLine(al[ak],al[ak+1]);if(ah.length==0){if(ag.length!=0&&ag[ag.length-1]!="M"){ag.push("M")}}for(var aj=0;aj<ah.length;aj++){if(ah[aj]==null){continue}if(ag.length==0){ag.push("M"+ah[aj].x+","+ah[aj].y)}if(aj==1){if(ag[ag.length-1]=="M"){ag.push(ah[aj].x+","+ah[aj].y)}else{ag.push("L"+ah[aj].x+","+ah[aj].y)}}}}}if(ag[ag.length-1]=="M"){ag[ag.length-1]=null;delete ag[ag.length-1]}var af=ag.join().replace(/,/g," ");if(this.isSvg){if(this.toString()=="Polygon"){}this.setTypeNS(ai,"d",af)}else{if(this.toString()=="Polygon"){af+="E"}this.setTypeNS(ai,"path",af)}if(this.isVml){this.map.temp.drawView={point:this.map.centerPoint,margin:this.drawMargin}}},setPoints:function(af){this.setPolylinePoint(this.getDom(),af)},setPath:function(af,ah){if(!this.points||!this.points[ah]){return}this.points[ah]=af;var ag=this.domElement;this.setPolylinePoint(ag,this.points)},oval:function(){},arrow:function(ag){if(this.isSvg){var af=document.createElementNS(this.svgs,"marker");this.setTypeNS(af,"id",ag);this.setTypeNS(af,"viewBox","0 0 10 10");this.setTypeNS(af,"refX","8");if(navigator.userAgent.indexOf("Safari")>0){this.setTypeNS(af,"refY","8")}else{this.setTypeNS(af,"refY","5")}this.setTypeNS(af,"markerUnits","strokeWidth");this.setTypeNS(af,"markerWidth","4");this.setTypeNS(af,"markerHeight","9");this.setTypeNS(af,"orient","auto");switch(ag){case"oval":break;case"classic":var ah=document.createElementNS(this.svgs,"path");this.setTypeNS(ah,"fill",this._config.lineColor);ah.setAttributeNS(null,"d","M 0 0 L10 5 L0 10 L3 5 z")}af.appendChild(ah);this.map.palette.appendChild(af);return ah}},setTypeNS:function(ah,ag,ai){if(!ah){return}if(this.isSvg){var af=this.svgType;if(af[ag]){ag=af[ag];if(ai==false){ai="none"}}ah.setAttributeNS(null,ag,ai)}else{if(this.isVml){ah.setAttribute(ag,ai)}}},getTypeNS:function(ah,ag){if(this.isSvg){var af=this.svgType;if(af[ag]){ag=af[ag]}return ah.getAttributeNS(null,ag)}else{if(this.isVml){return ah.getAttribute(ag)}}},getDrawPoint:function(ag){ag=window.event||ag;var af=(ag.pageX||ag.clientX);var ai=(ag.pageY||ag.clientY);var ah=j.Dom.getOffset(this.map.container);af=af-ah.left;ai=ai-ah.top;return{x:af,y:ai}},startArrow:function(ag,af,ai){af=af||this.getDom();if(!af){return}ag=ag.toLowerCase();if(this.isSvg&&ai==true){if(this.map.palette.getElementsByTagName("marker").length==0){this.arrowElement=this.arrow(ag);af._arrow=this.map.palette.getElementsByTagName("marker")[0]}this.setTypeNS(af,"marker-start","url(#"+ag+")")}else{if(this.isVml){if(af.childNodes.length==0){var ah=M(af,"<v:Stroke StartArrow="+ag+"/>")}else{var ah=af.childNodes[0];ah.setAttribute("StartArrow",ag)}}}},_startArrowF:function(ag,af){this.startArrow(ag,af,true)},endArrow:function(ag,af,ai){af=af||this.getDom();if(!af){return}ag=ag.toLowerCase();if(this.isSvg&&ai==true){if(this.map.palette.getElementsByTagName("marker").length==0){this.arrowElement=this.arrow(ag);af._arrow=this.map.palette.getElementsByTagName("marker")[0]}this.setTypeNS(af,"marker-end","url(#"+ag+")")}else{if(this.isVml){if(af.childNodes.length==0){var ah=M(af,"<v:Stroke endarrow="+ag+"/>")}else{var ah=af.childNodes[0];ah.setAttribute("endarrow",ag)}}}},_endArrowF:function(ag,af){this.endArrow(ag,af,true)},setLineColor:function(af){if(this._config){this._config.lineColor=af}if(this.domElement){this.setTypeNS(this.domElement,"strokecolor",af)}if(this.arrowElement){this.setTypeNS(this.arrowElement,"fill",af)}},getLineColor:function(){return this._config.lineColor},setLineStroke:function(af){if(af>0){this._config.weight=af;this.setTypeNS(this.domElement,"strokeweight",this._config.weight+"px")}},getLineStroke:function(){return this._config.weight},setOpacity:function(af){if(af>1||af<0){return}this._config.opacity=af;if(!this.map){return}if(this.isSvg){this.setTypeNS(this.getDom(),"stroke-opacity",af);this.setTypeNS(this.getDom(),"fill-opacity",af)}else{this.setTypeNS(this.getDom().childNodes[0],"opacity",af);this.setTypeNS(this.getDom().childNodes[1],"opacity",af)}},getOpacity:function(){return this._config.opacity},setLineStyle:function(af){if(af!="solid"&&af!="dashed"){return}if(!af){af=this._config.lineStyle}else{this._config.lineStyle=af}if(!this.map){return}var ag=this.getDom();if(this.isSvg){af=af=="solid"?0:this.getLineStroke()*2;this.setTypeNS(ag,"stroke-dasharray",af)}else{if(this.isVml){af=af=="solid"?"solid":"4 2 1 2";if(ag.childNodes.length==0){var ah=M(ag,'<v:Stroke dashstyle="'+af+'"/>')}else{var ah=ag.childNodes[0];ah.setAttribute("dashstyle",af)}}}},getLineStyle:function(){return this._config.lineStyle},setFillColor:function(af){if(af){this._config.fillColor=af;if(this.domElement.getElementsByTagName("fill").length==0&&this.isVml){this.domElement.innerHTML+="<v:fill />"}this.setTypeNS(this.domElement,"filled",true);this.setTypeNS(this.domElement,"fillcolor",af)}else{this.setTypeNS(this.domElement,"filled",false)}},getFillColor:function(){if(this.toString()!="Rect"&&this.toString()!="Polygon"){return}return this._config.fillColor},getIntersectLine:function(aw,au){if(!au){return[aw]}var ak=[{x:(-this.map.offsetX-this.drawMargin),y:(-this.map.offsetY+this.map.height+this.drawMargin)},{x:(-this.map.offsetX+this.map.width+this.drawMargin),y:(-this.map.offsetY-this.drawMargin)}];var ao=[{x:(aw.x>au.x?au.x:aw.x),y:(aw.y>au.y?aw.y:au.y)},{x:(aw.x>au.x?aw.x:au.x),y:(aw.y>au.y?au.y:aw.y)}];var ai=[];var aj=function(az,ax){try{if(parseInt(az.x)>=(ax[0]["x"]-2)&&parseInt(az.x)<=(ax[1]["x"]+2)&&parseInt(az.y)>=(ax[1]["y"]-2)&&parseInt(az.y)<=(ax[0]["y"]+2)){return true}else{return false}}catch(ay){return true}};var av=function(ay){if(au.y==aw.y){return}else{var ax=parseInt(((au.x-aw.x)*(ay-aw.y))/(au.y-aw.y)+aw.x);if(aj({x:ax,y:ay},ak)){return{x:ax,y:ay}}}};var at=function(ax){if(au.x==aw.x){return}else{var ay=parseInt(((au.y-aw.y)*(ax-aw.x))/(au.x-aw.x)+aw.y);if(aj({x:ax,y:ay},ak)){return{x:ax,y:ay}}}};var am=aj(aw,ak);var ar=aj(au,ak);if(am&&ar){ai.push(aw);ai.push(au)}else{if(am||ar){var ah=[];if(am){ah.push(aw)}if(aw.x==au.x){var ag={x:aw.x,y:ak[0].y};var af={x:aw.x,y:ak[1].y};if(aj(ag,ao)){ai.push(ag)}if(aj(af,ao)){ai.push(af)}}else{if((aw.y==au.y)){var ag={x:ak[0].x,y:aw.y};var ag={x:ak[0].x,y:aw.y};if(aj(ag,ao)){ai.push(ag)}if(aj(af,ao)){ai.push(af)}}else{for(var al=0;al<2;al++){var an=ak[al];var aq=at(an.x);if(aq!=null&&aj(aq,ao)){ah.push(aq)}var ap=av(an.y);if(ap!=null&&aj(ap,ao)){ah.push(ap)}}}}if(ar){ah.push(au)}if(ah.length==2){if(((aw.x-au.x)>0)==((ah[0].x-ah[1].x)>0)&&((aw.y-au.y)>0)==((ah[0].y-ah[1].y)>0)){ai.push(ah[0]);ai.push(ah[1])}else{ai.push(ah[1]);ai.push(ah[0])}}}else{var ah=[];for(var al=0;al<2;al++){var an=ak[al];var aq=at(an.x);if(aq!=null&&aj(aq,ak)&&aj(aq,ao)){ah.push(aq)}var ap=av(an.y);if(ap!=null&&aj(ap,ak)&&aj(ap,ao)){ah.push(ap)}}if(ah.length==2){if(((aw.x-au.x)>0)==((ah[0].x-ah[1].x)>0)){ai.push(ah[0]);ai.push(ah[1])}else{ai.push(ah[1]);ai.push(ah[0])}}}}return ai}});if(document.namespaces&&!document.namespaces.olv){document.namespaces.add("olv","urn:schemas-microsoft-com:vml");var W=document.createStyleSheet();try{W.addRule("v\\:*","behavior: url(#default#VML);position: absolute; display: inline-block;")}catch(R){}}function A(af){X.call(this);this.map=null;this.domElement=null;this._config={width:0,height:0,offset:[0,0],opacity:1,background:"transparent",lineStroke:1,lineColor:"#000",lineStyle:"solid",point:null};this.setConfig(af);this.point=this._config.point}A.inherits(X,"Division");j.extend(A.prototype,{render:function(){var af=this._config;var ah=this.content;var ag=['<div class="BMap_Division" style="position:absolute;'];ag.push("width:"+af.width+"px;display:block;");ag.push("overflow:hidden;");if(af.borderColor!="none"){ag.push("border:"+af.lineStroke+"px "+af.lineStyle+" "+af.lineColor+";")}ag.push("opacity:"+af.opacity+"; filter:(opacity="+af.opacity*100+")");ag.push("background:"+af.background+";");ag.push('z-index:60;">');ag.push(ah);ag.push("</div>");return ag.join("")},initialize:function(af){this.map=af;this._addOverlayDom();if(this.domElement){j.on(this.domElement,"mousedown",function(ag){ac(ag)})}},getPoint:function(){return this._config.point},_getPixel:function(af){return this.map.pointToPixel(this.getPoint())},setPoint:function(af){this._config.offset=[-Math.round(this._config.width/2)-Math.round(this._config.lineStroke),-Math.round(this._config.height/2)-Math.round(this._config.lineStroke)];X.prototype.setPoint.call(this,af)},setDimension:function(af,ag){this._config.width=Math.round(af);this._config.height=Math.round(ag);if(this.domElement){this.domElement.style.width=this._config.width+"px";this.domElement.style.height=this._config.height+"px";this.setPoint(this._config.point)}}});function l(ai,ag){this.imgUrl=ai;var ah={offset:[0,0],width:32,height:32,imgOffset:[0,0]};for(var af in ag){if(ag==null){return}for(var af in ag){if(typeof(ah[af])==typeof(ag[af])){ah[af]=ag[af]}}}this.offset=ah.offset;this.width=ah.width>0?ah.width:32;this.height=ah.height>0?ah.height:32;this.imgWidth=ah.imgWidth>0?ah.imgWidth:32;this.imgHeight=ah.imgHeight>0?ah.imgHeight:32;this.imgOffset=ah.imgOffset}j.inherit(l,j.BaseClass,"Icon");l.prototype.setImgUrl=function(af){if(!af||typeof af!="string"){return}this.imgUrl=af};l.prototype.getHTML=function(){if(j.Browser.ie==6&&this.imgUrl.toLowerCase().indexOf(".png")>0){return["<div",' style="width: 1px; height: 1px;',"; left:"+parseInt(this.imgOffset[0])+"px","; top:"+parseInt(this.imgOffset[1])+"px","; filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=image,src='"+this.imgUrl+"')",'; position:absolute;"></div>'].join("")}else{return['<img src="',this.imgUrl,'" style="left:'+parseInt(this.imgOffset[0])+"px","; top:"+parseInt(this.imgOffset[1])+"px",'; position:absolute;" />'].join("")}};l.prototype.setSize=function(af,ag){af=af>0?af:32;ag=ag>0?ag:32;this.width=af;this.height=ag};l.prototype.setOffset=function(af,ag){this.offset[0]=af;this.offset[1]=ag};l.prototype.setImgOffset=function(af,ag){this.imgOffset[0]=af;this.imgOffset[1]=ag};function H(ag,af){j.BaseClass.call(this);this.content=ag;this.map=null;this._config={width:0,height:0,maxWidth:600,offset:[0,0],title:"",maxContent:"",enableMaximize:false,margin:[10,10,10,10],collisions:[[10,10],[10,10],[10,10],[10,10]]};this.setConfig(af);if(this._config.width!=0){if(this._config.width<220){this._config.width=220}if(this._config.width>730){this._config.width=730}}if(this._config.height!=0){if(this._config.height<60){this._config.height=60}if(this._config.height>650){this._config.height=650}}if(this._config.maxWidth!=0){if(this._config.maxWidth<220){this._config.maxWidth=220}if(this._config.maxWidth>730){this._config.maxWidth=730}}this.isWinMax=false;this.IMG_PATH=aa.imgPath+"/";this.overlay=null}H.inherits(j.BaseClass,"InfoWindow");j.extend(H.prototype,{initialize:function(ah){if(!ah.map){return}this.overlay=ah;this.map=ah.map;if(this.map.infoWindow){var ag=this.map.infoWindow;j.hide(ag.popDom);j.hide(ag.shadowDom)}this.render();this.setEnableMaximize(this._config.enableMaximize);this.setTitle();this.setContent();this.reset(true);if(this.map.infoWindow.marker){var af=this.map.infoWindow.marker;this.map.infoWindow.marker=null}if(ah.toString()=="Marker"){this.map.infoWindow.marker=ah}var ai=this;this.map.addEventListener("dragstart",function(){ai._setOverflow()});this.map.addEventListener("movestart",function(){ai._setOverflow()});this.map.addEventListener("dragend",function(){ai._resetOverflow()});this.map.addEventListener("moveend",function(){ai._resetOverflow()})},render:function(){var aj=this.map;var ag=this;if(!aj.infoWindow){aj.infoWindow={};var af=['<div class="shadow" style="position: absolute;display:none" type="infowindow_shadow">'];af.push('<div><img style=" left: -323px; top: 0px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -393px; top: 0px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -1033px; top: 0px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style="top: -30px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -360px; top: -30px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style="top: -30px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -14px; top: -310px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style="left: -345px; top: -310px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -440px; top: -310px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -345px; top: -310px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push('<div><img style=" left: -754px; top: -310px;" src="'+this.IMG_PATH+'iws3.png"/></div>');af.push("</div>");af.push('<div class="pop" style="position: absolute;display:none;cursor:default">');af.push('<div><img style="border: 0px none ; margin: 0px; padding: 0px; position: absolute; left: 0px; top: 0px; width: 690px; height: 786px;" src="'+this.IMG_PATH+'iw3.png"/></div>');af.push('<div class="top"><img src="'+this.IMG_PATH+'iw3.png" style="position: absolute; left: -65px; top: -60px;"/></div>');af.push('<div><img style="border: 0px none ; margin: 0px; padding: 0px; position: absolute; left: -665px; top: 0px; width: 690px; height: 786px; " src="'+this.IMG_PATH+'iw3.png"/></div>');af.push('<div class="center"><img src="'+this.IMG_PATH+'iw3.png" style="position: absolute; left: -65px; top: -60px;"/></div>');af.push('<div><img style="border: 0px none ; margin: 0px; padding: 0px; position: absolute; left: 0px; top: -665px; width: 690px; height: 786px; " src="'+this.IMG_PATH+'iw3.png"/></div>');af.push('<div class="bottom"><img src="'+this.IMG_PATH+'iw3.png" style="position: absolute; left: -65px; top: -146px;"/></div>');af.push('<div><img style="border: 0px none ; margin: 0px; padding: 0px; position: absolute; left: -665px; top: -665px; width: 690px; height: 786px; " src="'+this.IMG_PATH+'iw3.png"/></div>');af.push('<div><img onmousedown="return false" style="border: 0px none ; margin: 0px; padding: 0px; position: absolute; left: -155px; top: -691px; width: 690px; height: 786px;" src="'+this.IMG_PATH+'iw3.png"/></div>');af.push('<div style="overflow-y: hidde;overflow-x:hidde; width:1px;height:1px;position: absolute; left: 16px; top: 16px;z-index: 10;"></div>');af.push("</div>");aj.infoWindow.popDom=M(aj.platform,af.join(""));aj.infoWindow.shadowDom=aj.infoWindow.popDom.previousSibling;aj.infoWindow.popDiv=aj.infoWindow.popDom.getElementsByTagName("div");aj.infoWindow.shadoDiv=aj.infoWindow.shadowDom.getElementsByTagName("div");aj.infoWindow.contentMain=aj.infoWindow.popDiv[8];aj.infoWindow.titleDiv=M(aj.infoWindow.popDiv[8],'<div class="BMap_bubble_title" style="display:block;width:100%;overflow:hidden;height:24px;line-height:24px"></div>');aj.infoWindow.contentDiv=M(aj.infoWindow.popDiv[8],'<div class="BMap_bubble_content" style="display:block;width:100%"></div>');aj.infoWindow.maxContentDiv=M(aj.infoWindow.popDiv[8],'<div class="BMap_bubble_max_content" style="display:none;position:relative"></div>');var ah='<img style="position: absolute;top:12px; width: 12px; height: 12px; -moz-user-select: none; cursor: pointer; z-index: 10000;" src="'+this.IMG_PATH+'iw_close.gif"/>';aj.infoWindow.closeButton=M(aj.infoWindow.popDom,ah);var ai='<img style="position: absolute;top:12px; width: 12px; height: 12px; -moz-user-select: none; cursor: pointer; z-index: 10000;display:none" src="'+this.IMG_PATH+'iw_plus.gif"/>';aj.infoWindow.maxButton=M(aj.infoWindow.popDom,ai);this._mendIE6(aj.infoWindow)}aj.infoWindow.hashCode=this.hashCode;aj.infoWindow.closeButton.onclick=function(ak){ag.hide()};j.on(aj.infoWindow.closeButton,"click",function(ak){ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.closeButton,"mouseout",function(ak){ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDiv,"click",function(ak){if(!ak){return}ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDom,"mouseup",function(ak){if(!ak){return}ak.cancelBubble=true});j.on(aj.infoWindow.popDom,"mousedown",function(ak){if(!ak){return}ak.cancelBubble=true});j.on(aj.infoWindow.popDom,"mouseout",function(ak){ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDom,"mouseover",function(ak){if(!ak){return}ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDom,"click",function(ak){if(!ak){return}ak.cancelBubble=true});j.on(aj.infoWindow.popDom,"dblclick",function(ak){if(!ak){return}ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDom,"mousewheel",function(ak){if(!ak){return}ak.cancelBubble=true;ak.returnValue=false});j.on(aj.infoWindow.popDom,"keydown",function(ak){if(!ak){return}ak.cancelBubble=true});j.on(aj.infoWindow.popDom,"selectstart",function(ak){ak.cancelBubble=true});if(window.addEventListener){aj.infoWindow.popDom.addEventListener("DOMMouseScroll",function(ak){if(!ak){return}ak.cancelBubble=true;ak.returnValue=false},false)}aj.infoWindow.maxButton.onclick=function(al){var ak=ag.map.infoWindow.maxButton;if(ak.src.indexOf("iw_plus")>0||ak.src.indexOf("blank.gif")>0){ag.isWinMax=true;ak.src=ag.IMG_PATH+"iw_minus.gif";ag.setMaxContent();ag.map.infoWindow.maxContentDiv.style.display="block"}else{ag.isWinMax=false;ak.src=ag.IMG_PATH+"iw_plus.gif";ag.setContent();ag.map.infoWindow.maxContentDiv.style.display="none"}ag.reset(false);if(!al){return}al.cancelBubble=true;al.returnValue=false}},_mendIE6:function(ai){if(j.isIE>6||j.isIE==0){return}var ah=ai.popDom.getElementsByTagName("IMG");for(var ag=0;ag<ah.length;ag++){ah[ag].style.cssText+=";FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+ah[ag].src+",sizingMethod=crop)";ah[ag].src=this.IMG_PATH+"blank.gif"}var af=ai.shadowDom.getElementsByTagName("IMG");for(var ag=0;ag<af.length;ag++){af[ag].style.cssText+=";FILTER: progid:DXImageTransform.Microsoft.AlphaImageLoader(src="+af[ag].src+",sizingMethod=crop)";af[ag].src=this.IMG_PATH+"blank.gif"}},_setWinSize:function(ap,ao,aD){var aA=this._config;ap=ap||aA.width;ao=ao||aA.height;if(ao<0){ao=0}var aj=aA.offset[0];var an=aA.offset[1];var az=[25,-1,25,-1,25,-1,25,97];var ai=[25,-1,25,-1,25,-1,25,50];az[1]=ap-az[0]-az[2];if(j.isIE&&document.compatMode!="CSS1Compat"){az[3]=ap}else{az[3]=ap-2}az[5]=ap-az[4]-az[6];ai[1]=ai[0];ai[3]=ao-ai[0]-ai[4];if(j.isIE&&document.compatMode!="CSS1Compat"){ai[5]=ai[4]}else{ai[5]=ai[4]-1}var aB=[0,az[0],ap-az[2],0,0,az[4],ap-az[6],Math.ceil((ap-az[7])/2)];var av=[0,0,0,az[0],ao-az[4],ao-az[4],ao-az[4],ao-az[4]];var ag=aj-(ap-az[7])/2-32;var aw=an-ao-24;var aC=Math.floor((ao+ai[7])/2.03)+30;var al=[70,-1,70,-1,-1,-1,70,-1,140,-1,70];var au=[30,30,30,25,25,25,60,60,60,60,60];al[7]=(ap+80-(al[6]+al[8]+al[10])-50)/2;al[9]=al[7]+50;var ay=al[6]+al[7]+al[8]+al[9]+al[10];al[1]=ay-al[0]-al[2]-29;al[5]=al[3]=aC-au[0]-au[6]+70;au[3]=au[4]=au[5]=aC-au[0]-au[6];al[4]=(al[0]+al[1]+al[2]+au[3]+29)-al[5]-al[3];var af=[aC-60-1,aC-60-1+al[0],aC-60-1+al[0]+al[1],29,29+al[3],29+al[3]+al[4],0,al[6],al[6]+al[7],al[6]+al[7]+al[8],al[6]+al[7]+al[8]+al[9],];var at=[0,0,0,au[0],au[0],au[0],au[0]+au[3],au[0]+au[3],au[0]+au[3],au[0]+au[3],au[0]+au[3]];allShadowLeft=aj-al[6]-al[7]-70;allShadowTop=an-aC+30;var ak=323-aC+90;shadowRightImageLeft=740+ak;var ah="";var ax=function(aE){return"overflow: hidden; z-index: 1; position: absolute;              left:"+aB[aE]+"px;              top:"+av[aE]+"px;              width:"+az[aE]+"px;              height:"+ai[aE]+"px"};var aq=function(aE){return"overflow: hidden; z-index: 1; position: absolute;              left:"+af[aE]+"px;              top:"+at[aE]+"px;              width:"+al[aE]+"px;              height:"+au[aE]+"px;"};var am=this.map.infoWindow;am.popDom.style.top=aw+"px";am.popDom.style.left=ag+"px";am.shadowDom.style.top=allShadowTop+"px";am.shadowDom.style.left=allShadowLeft+"px";for(var ar=0;ar<8;ar++){am.popDiv[ar].style.cssText=ax(ar)}for(var ar=0;ar<am.shadoDiv.length;ar++){am.shadoDiv[ar].style.cssText=aq(ar)}am.shadoDiv[3].firstChild.style.left="-"+ak+"px";am.shadoDiv[5].firstChild.style.left="-"+shadowRightImageLeft+"px";if(aD!=null){this.show()}},setWidth:function(af){if(typeof(af)!="number"){return}if(af<0){return}this._config.width=af;if(af!=0){if(af<220){this._config.width=220}if(af>730){this._config.width=730}}if(this.map&&this.map.infoWindow){this.reset(true)}},setHeight:function(af){if(typeof(af)!="number"){return}if(af<0){return}if(af!=0){if(af<60){af=60}if(af>650){af=650}}this._config.height=af;if(this.map&&this.map.infoWindow){if(this._config.width!=0){map.infoWindow.contentDiv.style.width=this._config.width+"px"}}this.reset(true)},setMaxWidth:function(af){if(!typeof(af)!="number"){return}if(af<0){return}this._config.maxWidth=af},setTitle:function(af){af=af||this._config.title;af=af.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"");this._config.title=af;if(!this.map||!this.map.infoWindow){return}if(af==""){j.hide(map.infoWindow.titleDiv);return}map.infoWindow.titleDiv.innerHTML=af;j.show(map.infoWindow.titleDiv)},setContent:function(ah){var ag=ah;ah=ah||this.content;var ai=this.map;this.content=ah;if(!ai||!ai.infoWindow){return}if(this.isWinMax){return}if(this._config.width!=0){ai.infoWindow.contentDiv.style.width=this._config.width+"px"}if(ah.indexOf("<")!=0){var af=this._config.width;if(af<220){af=220}if(af>730){af=730}ah='<div style="width:'+af+'px">'+ah+"</div>"}ai.infoWindow.contentDiv.innerHTML=ah;ai.infoWindow.maxContentDiv.style.display="none";if(navigator.userAgent.indexOf("Safari")>0){ai.infoWindow.contentDiv.style.display="block"}else{ai.infoWindow.contentDiv.style.display="inline"}},setMaxContent:function(af){if(!af){af=this._config.maxContent}else{this._config.maxContent=af}var ag=this.map;if(!ag||!ag.infoWindow){return}ag.infoWindow.maxContentDiv.innerHTML=af;if(!this.isWinMax){return}ag.infoWindow.contentDiv.style.display="none";if(navigator.userAgent.indexOf("Safari")>0){ag.infoWindow.maxContentDiv.style.display="black"}else{ag.infoWindow.maxContentDiv.style.display="inline"}},reset:function(af){var ag=this;setTimeout(function(am){var aj=ag.map.infoWindow;var an=0;if(aj.titleDiv.style.display!="none"){an=24}if(ag.isWinMax){ah=ag._config.maxWidth;var al=an+aj.maxContentDiv.scrollHeight;al=al>ag.map.height?ag.map.height-60:al}else{aj.contentMain.style.width=aj.contentMain.style.height="auto";aj.contentDiv.style.display="block";var ai=aj.contentDiv.scrollWidth;var ak=aj.titleDiv.scrollWidth;var ah=ai>ak?ai:ak;ah=ag._config.width==0?ah:ag._config.width;al=aj.contentDiv.scrollHeight+an}al=ag._config.height==0?al:ag._config.height;if(ag._config.width==0){aj.contentMain.style.overflowX="hidden"}else{aj.contentMain.style.overflowX="auto"}if(ag._config.height==0){aj.contentMain.style.overflowY="hidden"}else{aj.contentMain.style.overflowY="auto"}ah=ah<220?220:ah;ah=ah>600?600:ah;al=al<55?55:al;al=al>440?440:al;ag._setWinSize(ah+32,al+32,af);aj.contentMain.style.width=ah+"px";aj.contentMain.style.height=al+"px";aj.closeButton.style.left=ah+7+"px";aj.maxButton.style.left=(ah-20)+7+"px";if(af!=false){ag.dispatchEvent(new ab("onresize"))}},20)},setPosition:function(){var af=this.map.temp;var ag=this.overlay;if(af.pop&&ag&&ag.getDom()){af.pop.style.top=af.shadow.style.top=parseInt(ag.getDom().style.top)+"px";af.pop.style.left=af.shadow.style.left=parseInt(ag.getDom().style.left)+"px"}},setPanTo:function(){if(!this.overlay||!this.overlay.point){return}var aw=this.map;var ai=aw.infoWindow.popDiv;var ax=aw.infoWindow.popDom;var aj=parseFloat(ai[1].style.width)+50;var at=parseFloat(ai[3].style.height)+parseFloat(ai[7].style.height)+50;var aq=parseFloat(ax.style.left);var al=parseFloat(ax.style.top);var ag=aw.pointToPixel(this.overlay.point);var an=new p(ag.x+aq,ag.y+al);var am=new p(ag.x+aj+aq,ag.y+at+al);if(this._config.height!=0&&document.all){if(!aw.temp.infoKey){aw.temp.infoKey=-1}var au=-aw.temp.infoKey;aw.temp.infoKey=-aw.temp.infoKey}else{var au=0;var ar=0;var af=10;var ah=this._config.margin[0];var ak=this._config.margin[1];var av=this._config.margin[2];var ao=this._config.margin[3];if(an.x<ao){au=-an.x+ao}if(an.y<ah){ar=-an.y+ah}if(am.x>aw.width-ak){au=aw.width-am.x-ak}if(am.y>aw.height-av){ar=aw.height-am.y-av}var ap=this._config.collisions;if(an.x<ap[0][0]&&an.y<ap[0][1]){if(Math.abs(-an.x+ap[0][0])<Math.abs(-an.y+ap[0][1])){au=-an.x+ap[0][0]}else{if(aw.height-ap[0][1]-ap[3][1]<at){au=-an.x+ap[0][0]}else{ar=-an.y+ap[0][1]}}if(aw.width-ap[0][0]-ap[1][0]<aj&&an.y<ap[1][1]){ar=-an.y+ap[1][1]}}if(am.x>aw.width-ap[1][0]&&an.y<ap[1][1]){if(Math.abs(-am.x+aw.width-ap[1][0])<Math.abs(-an.y+ap[1][1])&&aw.width-ap[0][0]-ap[1][0]>=aj){au=-am.x+aw.width-ap[1][0]}else{ar=-an.y+ap[1][1];if(aw.width-ap[0][0]-ap[1][0]<aj&&aw.width-ap[0][0]<aj){au=-an.x+ap[0][0]}}}if(an.x<ap[3][0]&&am.y>aw.height-ap[2][1]){if(Math.abs(-an.x+ap[3][0])<Math.abs(-am.y+aw.height-ap[2][1])){au=-an.x+ap[3][0]}else{ar=-am.y+aw.height-ap[2][1]}if(aw.height-ap[0][1]-ap[3][1]<at&&an.x<ap[3][0]){au=-an.x+ap[0][0]}}if(am.x>aw.width-ap[2][0]&&am.y>aw.height-ap[2][1]){if(Math.abs(-am.x+aw.width-ap[2][0])<Math.abs(-am.y+aw.height-ap[2][1])&&aw.width-ap[0][0]-ap[1][0]>=aj){au=-am.x+aw.width-ap[2][0]}else{if(aw.height-ap[1][1]-ap[2][1]>=at){ar=-am.y+aw.height-ap[2][1]}else{ar=-an.y+ap[1][1]}if(aw.width-ap[0][0]-ap[2][0]<aj){au=-an.x+ap[0][0]}}}aw.panBy(au,ar)}},setEnableMaximize:function(af){if(typeof(af)=="boolean"){this._config.enableMaximize=af;if(!this.map||!this.map.infoWindow){return}if(af){this.map.infoWindow.maxButton.style.display="block"}else{this.map.infoWindow.maxButton.style.display="none"}}},remove:function(){},copy:function(){},show:function(){var af=this.map.infoWindow;if(af.popDom.style.display!="none"){return}j.show(af.popDom);j.show(af.shadowDom);this.dispatchEvent(new ab("onopen"))},hide:function(){var af=this.map.infoWindow;if(af.popDom.style.display=="none"){return}j.hide(af.popDom);j.hide(af.shadowDom);this.dispatchEvent(new ab("onclose"));if(this.isWinMax){this.isWinMax=false;this.map.infoWindow.maxButton.src=this.IMG_PATH+"iw_plus.gif"}},close:function(){this.hide()},dispose:function(){j.BaseClass.prototype.dispose.call(this)},getObject:function(){return this.domElement},setConfig:function(ag){if(ag==null){return}for(var af in ag){if(typeof(this._config[af])==typeof(ag[af])){this._config[af]=ag[af]}}},_revert:function(){if(!this.map&&!this.map.infoWindow){return}this.isWinMax=false;this.map.infoWindow.titleDiv.innerHTML="";this.map.infoWindow.contentDiv.innerHTML="";this.map.infoWindow.maxContentDiv.innerHTML="";this.map.infoWindow.maxButton.src=this.IMG_PATH+"iw_plus.gif"},_setOverflow:function(){if(map.infoWindow){map.infoWindow._overflowX=map.infoWindow.contentMain.style.overflowX;map.infoWindow._overflowY=map.infoWindow.contentMain.style.overflowY;map.infoWindow.contentMain.style.overflowX="hidden";map.infoWindow.contentMain.style.overflowY="hidden"}},_resetOverflow:function(){var af=this;if(!map.infoWindow||!map.infoWindow._overflowX||!map.infoWindow._overflowY){return}map.infoWindow.contentMain.style.overflowX=map.infoWindow._overflowX;map.infoWindow.contentMain.style.overflowY=map.infoWindow._overflowY;delete map.infoWindow._overflowX;delete map.infoWindow._overflowY},isOpen:function(){var af=this.map.temp.infoWin;if(af&&af.overlay==this.overlay&&this.map&&this.map.infoWindow&&this.map.infoWindow.popDom.style.display=="none"){return false}else{return true}}});function I(ag,af){X.call(this);this.content=ag;this.map=null;this.domElement=null;this._config={width:0,offset:[0,0],opacity:1,color:"black",borderWidth:1,background:"#FFF",borderColor:"#F00",point:{},fontSize:12,cursor:"",padding:"1px",fontWeight:"normal",lineHeight:"",zIndex:60,title:""};this.setConfig(af);if(this._config.width<0){this._config.width=0}this.point=this._config.point;if(this._config.opacity<0){this._config.opacity=0}if(this._config.opacity>1){this._config.opacity=1}if(this._config.borderWidth<=0){this._config.borderWidth=1}if(this._config.fontSize<=0){this._config.fontSize=12}}I.inherits(X,"Label");j.extend(I.prototype,{render:function(){var af=this._config;var ah=this.content;var ag=['<label class="BMapLabel" '];if(af.title!=""){ag.push('title="'+af.title+'" ')}ag.push('style="position:absolute;z-index:80;white-space:nowrap;padding:'+af.padding+";");if(af.cursor){ag.push("cursor:"+af.cursor+";")}if(af.width==0||af.width=="auto"){ag.push("display:inline;")}else{ag.push("width:"+af.width+"px;display:block;");ag.push("overflow:hidden;")}if(af.borderColor!="none"){ag.push("border:"+af.borderWidth+"px solid "+af.borderColor+";")}ag.push("color:"+af.color+";");ag.push("background:"+af.background+";");ag.push("font-size:"+af.fontSize+"px;");ag.push("font-weight:"+af.fontWeight+";");if(j.Browser.ie&&this._config.opacity!=1){ag.push("filter:alpha(opacity="+this._config.opacity*100+");")}else{ag.push("opacity:"+this._config.opacity+";")}if(af.lineHeight!=""){ag.push("line-height:"+af.lineHeight+";")}ag.push("z-index:"+af.zIndex+'">');ag.push(ah);ag.push("</Label>");return ag.join("")},afterZoom:function(){},initialize:function(af){this.map=af;this._addOverlayDom()},_getPixel:function(af){return this.map.pointToPixel(this.getPoint())},setContent:function(af){this.content=af;if(this.domElement){this.domElement.innerHTML=af}},setOpacity:function(af){if(af>=0&&af<=1){this._config.opacity=af}if(this.domElement){S(this.domElement,af)}},setOffset:function(af,ag){this._config.offset[0]=af;this._config.offset[1]=ag}});function C(af,ag){X.call(this);this.point=af;this.map=null;this.domElement=null;this.iconDom=null;this.infoWindowDom=null;this.siblingElement=null;this.iconClassName="none";this.isDraging=false;this._config={width:0,height:0,offset:[0,0],opacity:1,icon:null,infoWindow:null,label:null,baseZIndex:2500000,clickable:true,zIndexFixed:false,isTop:false};this.setConfig(ag)}C.inherits(X,"Marker");j.extend(C.prototype,{render:function(){var af=['<span class="BMap_Marker" style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;z-index:60;-moz-user-select:none">'];af.push("</span>");return af.join("")},siblingRender:function(){var af=['<span class="BMap_Marker" style="position:absolute;padding:0;margin:0;border:0;width:0;height:0;z-index:40;-moz-user-select:none">'];af.push("</span>");return af.join("")},remove:function(){if(this.domElement&&this.domElement.parentNode){this.domElement.parentNode.removeChild(this.domElement)}if(this.siblingElement&&this.siblingElement.parentNode){this.siblingElement.parentNode.removeChild(this.siblingElement)}if(this.infoWindow&&this.infoWindow.overlay&&this.infoWindow.overlay===this){this.closeInfoWindow();this.infoWindow=null}this.domElement=null;this.siblingElement=null;this.iconDom=null;this.iconArea=null;if(this._config.label){this._config.label.domElement=null}this.dispatchEvent(new ab("onremove"))},hide:function(){j.hide(this.domElement);j.hide(this.siblingElement)},show:function(){j.show(this.domElement);j.show(this.siblingElement)},afterZoom:function(){},initialize:function(af){this.map=af;this._addOverlayDom();this.setIcon(this._config.icon);this.setLabel(this._config.label);this.enableDraging(this.isDraging)},setIcon:function(ah){if(!ah||ah&&ah.toString()!="Icon"){return}this._config.icon=ah;if(!this.map){return}var aj=this.map;var af=-ah.width/2+ah.offset[0];var ak=-ah.height/2+ah.offset[1];try{if(this.iconDom){this.siblingElement.removeChild(this.iconDom);this.iconDom=null}if(this.iconArea){this.domElement.removeChild(this.iconArea);this.iconArea=null}}catch(ai){}if(this._config.icon){var ag=['<div style="position:absolute;padding:0;margin:0;border:0;'];if(this._config.clickable){ag.push("cursor:pointer;")}ag.push("background:url('http://map.baidu.com/iknow/styles/bmap/blank.gif');");ag.push("width:"+ah.width+"px;");ag.push("height:"+ah.height+"px;");ag.push("left:"+af+"px;");ag.push("top:"+ak+"px;");ag.push('"></div>');this.iconArea=M(this.domElement,ag.join(""));var ag=['<div style="position:absolute;padding:0;margin:0;border:0;overflow:hidden;'];ag.push("width:"+ah.width+"px;");ag.push("height:"+ah.height+"px;");ag.push("left:"+af+"px;");ag.push("top:"+ak+'px;"');if(this.iconClassName!="none"){ag.push(' class="'+this.iconClassName+'"')}ag.push(">");ag.push(ah.getHTML());ag.push("</div>");this.iconDom=M(this.siblingElement,ag.join(""));this.iconDom.galleryImg=false}},setIconClassName:function(af){if(this.iconDom){this.iconDom.className=af}},getIcon:function(){if(!this._config.icon||this._config.icon&&this._config.icon.toString()!="Icon"){return}else{return this._config.icon}},setLabel:function(af){if(!af||af&&af.toString()!="Label"){return}this._config.label=af;this.map.addOverlay(af);if(af.getDom()){this.siblingElement.appendChild(af.getDom())}else{af.domElement=M(this.domElement,af.render());af.domElement.hashCode=af.getHashCode()}af.domElement.style.left=(af._config.offset[0])+"px";af.domElement.style.top=(af._config.offset[1])+"px"},getLabel:function(){if(this._config.label&&this._config.label.toString()=="Label"){return this._config.label}else{return}},enableDraging:function(ag){this.isDraging=ag;if(!this.domElement){return}var aj=this;var af=0;var am=0;var ah=0;var ai=false;var al={x:0,y:0};this.dragStart=function(ao){ai=true;var an=aj.map.pointToPixel(aj.point);af=ao.clientX-an.x;am=ao.clientY-an.y;ah=new Date().getTime();j.on(document,"mousemove",aj.dragIng);j.on(document,"mouseup",aj.dragEnd);if(aj.domElement&&aj.domElement.setCapture){aj.domElement.setCapture()}if(j.Browser.ie){aj.dispatchEvent(G(ao,new ab("ondragstart").inherit(ao)))}else{aj.dispatchEvent(new ab("ondragstart").inherit(m(ao)))}};this.dragEnd=function(an){if(aj.domElement&&aj.domElement.releaseCapture){aj.domElement.releaseCapture()}ai=false;j.un(document,"mousemove",aj.dragIng);j.un(document,"mouseup",aj.dragEnd);af=am=0;if((new Date()).getTime()-ah>=100&&(al.x>2||al.y>2)){if(j.Browser.ie){aj.dispatchEvent(G(an,new ab("ondragend").inherit(an)))}else{aj.dispatchEvent(new ab("ondragend").inherit(m(an)))}}};this.dragIng=function(ap){if(ai==false){return}var ao=new p((ap.clientX-af),(ap.clientY-am));al=ao;if((ao.x>15&&ao.x<map.width-15)&&(ao.y>30&&ao.y<map.height-15)){var an=aj.map.pixelToPoint(ao);aj.setPoint(an)}if(j.Browser.ie){aj.dispatchEvent(G(ap,new ab("ondraging").inherit(ap)))}else{aj.dispatchEvent(new ab("ondraging").inherit(m(ap)))}};if(ag==true){j.on(this.domElement,"mousedown",this.dragStart)}else{try{j.un(this.domElement,"mousedown",this.dragStart)}catch(ak){}}},setTop:function(ag,af){if(ag){this._config.isTop=true}else{this._config.isTop=false}this.setZIndex(af)},setPoint:function(af,ag){X.prototype.setPoint.call(this,af);this.setZIndex()},setZIndex:function(ag){var af=this;if(af._config.zIndexFixed==false){af.zIndex=af._config.baseZIndex+2*af._elemTop+(af._config.isTop?ag||1000000:0)}else{af.zIndex=af._config.baseZIndex+(af._config.isTop?ag||1000000:0)}if(af.domElement&&af.domElement.style){af.domElement.style.zIndex=af.zIndex}if(af.siblingElement){af.siblingElement.style.zIndex=af.zIndex}}});function t(af,ag){V.call(this,ag);this.points=af.slice(0);this.pixels=null;this.map=null;this.domElement=null}t.inherits(V,"Polygon");j.extend(t.prototype,{render:function(){var af=[""];return af.join("")},afterZoom:function(){},initialize:function(af){this.map=af;this.createPalette();this.domElement=this.polyline(this.points,true);this.domElement.hashCode=this.getHashCode();this.setLineColor(this._config.lineColor);this.setLineStroke(this._config.weight);this.setLineStyle(this._config.lineStyle);this.setFillColor(this._config.fillColor);this.setOpacity(this._config.opacity)},getPoint:function(){},getPoints:function(){return this.points},setPoint:function(af){}});function v(af,ag){V.call(this,ag);this.points=af.slice(0);this.pixels=null;this.map=null;this.domElement=null}v.inherits(V,"Polyline");j.extend(v.prototype,{render:function(){var af=[""];return af.join("")},afterZoom:function(){},initialize:function(af){this.map=af;this.createPalette();this.domElement=this.polyline(this.points);this.domElement.hashCode=this.getHashCode();this.setTypeNS(this.domElement,"filled",false);this.setLineColor(this._config.lineColor);this.setLineStroke(this._config.weight);this.setLineStyle(this._config.lineStyle);this.setOpacity(this._config.opacity)},getPoints:function(){return this.points},remove:function(){var af=this.domElement._arrow;this.domElement._arrow=null;if(af){af.parentNode.removeChild(af);af=null}V.prototype.remove.call(this)}});function d(){this.map=null;this.lengthMax=200;this.cacheBox=null}u.register(function(ag){var af=new d();af.map=ag;ag.overlayCache=af;af.cacheBox=document.createElement("div");ag.addEventListener("load",function(ah){af.district();af.zoom(ah)});ag.addEventListener("moveend",function(ah){af.district();af.zoom(ah)});ag.addEventListener("dragend",function(ah){af.district();af.zoom(ah)});ag.addEventListener("zoomend",function(ah){af.district();af.zoom(ah)});ag.addEventListener("onclearoverlays",function(al){var ak=ag.overlayDiv.childNodes;for(var ai=0;ai<ak.length;ai++){var aj=ak[ai];if(aj.getAttribute("type")!="system"){if(aj.getAttribute("hashCode")){j.I(aj.getAttribute("hashCode")).remove()}else{}ai--}else{var am=aj.childNodes;for(var ah=0;ah<am.length;ah++){if(am[ah].hashCode!=null){j.I(am[ah].hashCode).remove()}else{am[ah].parentNode.removeChild(am[ah]);if(am[ah]){am[ah]=null}}ah--}}}ag.infoWindow=ag.temp.infoWin=ag.temp.pop=ag.temp.shadow=null;ak=null});ag.addEventListener("oninfowindowopen",function(ai){var ah=this.map.infoWindow;j.hide(ah.popDom);j.hide(ah.shadowDom)})});d.prototype.zoom=function(aq){var ar=this.map.temp.overlayDiv.childNodes;var am=this.map.temp.markerDiv.childNodes;var ap=this.map.temp.labelDiv.childNodes;for(var ao=0;ao<ar.length;ao++){if(ar[ao].tagName=="svg"){continue}var an=j.I(ar[ao].hashCode);if(an&&an.point){if(an.point.toString()=="Point"){an.setPoint(an.point)}}}this.revisePoint(am);this.revisePoint(ap);if(this.map.temp.infoWin){this.map.temp.infoWin.setPosition()}if(this.map.palette){var ai=this.map.palette;var ag=ai.childNodes;if((ai.tagName!="svg"&&(aq.type=="ondragend"||aq.type=="onmoveend"))){var af=this.map.temp.drawView;if(af==null){return}var ah=this.map.pointToPixel(af.point);var ak=af.margin;if(Math.abs(ah.x-this.map.width/2)<ak&&Math.abs(ah.y-this.map.height/2)<ak){return}}for(var ao=0;ao<ag.length;ao++){if(ag[ao].tagName=="shape"||ag[ao].tagName=="path"){var aj=j.I(ag[ao].hashCode);if(aj&&aj.points){if(ag[ao].tagName=="shape"){ag[ao].setAttribute("path","m0 0")}aj.setPolylinePoint(ag[ao],aj.points)}}}if(aj&&ai.tagName=="svg"){var al=j.I(aj.hashCode);aj.setPalette()}}};d.prototype.revisePoint=function(ah){for(var ag=0;ag<ah.length;ag++){var af=j.I(ah[ag].hashCode);if(af&&af.point){if(af.point.toString()=="Point"){af.setPoint(af.point)}}}};d.prototype.district=function(){var ah=this.map;var am=ah.overlayDiv.childNodes;var ao=ah.markerDiv.childNodes;var ai=this.cacheBox.childNodes;var ap=ah.pixelToPoint(new p(-ah.width/2,ah.height*3/2));var an=ah.pixelToPoint(new p(ah.width*3/2,-ah.height/2));var ag=new k(ap.lng,ap.lat,an.lng,an.lat);for(var al=0;al<ai.length;al++){var af=ai[al];if(!af.hashCode){continue}var ak=j.I(af.hashCode);if(!ak.point){continue}if(ag.containsPoint(ak.point)){ah.addOverlay(ak)}}if(am.length<4000){return}if(ao.length<4000){return}for(var al=0;al<am.length;al++){var af=am[al];if(!af.hashCode){continue}var ak=j.I(af.hashCode);if(!ak.point){continue}if(!ag.containsPoint(ak.point)){this.cacheBox.appendChild(af)}}for(var al=0;al<ao.length;al++){var aq=ao[al];if(!aq.hashCode){continue}var aj=j.I(aq.hashCode);if(!aj.point){continue}if(!ag.containsPoint(aj.point)){this.cacheBox.appendChild(aq);this.cacheBox.appendChild(aj.siblingElement)}}};d.prototype.addCache=function(af){this.cacheBox.appendChild(af);if(this.cacheBox.childNodes.length>this.lengthMax){this.remove(this.cacheBox.firstChild)}};d.prototype.addMap=function(af){this.map.addOverlay(af)};d.prototype.remove=function(af){af.domElement.parentNode.removeChild(af.domElement)};d.prototype.clear=function(){this.cacheBox.innerHTML=""};function p(af,ag){af=isNaN(af)?0:parseFloat(af);ag=isNaN(ag)?0:parseFloat(ag);this[0]=this["x"]=af;this[1]=this["y"]=ag}p.inherits(n,"Pixel");function ad(){}j.extend(ad,{EARTHRADIUS:6370996.81,MCBAND:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND:[75,60,45,30,15,0],MC2LL:[[1.410526172116255e-8,0.00000898305509648872,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-0.03801003308653,17337981.2],[-7.435856389565537e-9,0.000008983055097726239,-0.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,0.00000898305509983578,0.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,0.32710905363475,6856817.37],[-1.981981304930552e-8,0.000008983055099779535,0.03278182852591,40.31678527705744,0.65659298677277,-4.44255534477492,0.85341911805263,0.12923347998204,-0.04625736007561,4482777.06],[3.09191371068437e-9,0.000008983055096812155,0.00006995724062,23.10934304144901,-0.00023663490511,-0.6321817810242,-0.00663494467273,0.03430082397953,-0.00466043876332,2555164.4],[2.890871144776878e-9,0.000008983055095805407,-3.068298e-8,7.47137025468032,-0.00000353937994,-0.02145144861037,-0.00001234426596,0.00010322952773,-0.00000323890364,826088.5]],LL2MC:[[-0.0015702102444,111320.7020616939,1704480524535203,-10338987376042340,26112667856603880,-35149669176653700,26595700718403920,-10725012454188240,1800819912950474,82.5],[0.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[0.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[0.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-0.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-0.0003218135878613132,111320.7020701615,0.00369383431289,823725.6402795718,0.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,0.37238884252424,7.45]],getDistanceByMC:function(ak,ai){if(!ak||!ai){return 0}var ag,aj,af,ah;ak=this.convertMC2LL(ak);if(!ak){return 0}ag=this.toRadians(ak[0]);aj=this.toRadians(ak[1]);ai=this.convertMC2LL(ai);if(!ai){return 0}af=this.toRadians(ai[0]);ah=this.toRadians(ai[1]);return this.getDistance(ag,af,aj,ah)},getDistanceByLL:function(ak,ai){if(!ak||!ai){return 0}var ag,af,aj,ah;ag=this.toRadians(ak[0]);aj=this.toRadians(ak[1]);af=this.toRadians(ai[0]);ah=this.toRadians(ai[1]);return this.getDistance(ag,af,aj,ah)},convertMC2LL:function(af){var ag,ai;ag=new w(Math.abs(af[0]),Math.abs(af[1]));for(var ah=0;ah<this.MCBAND.length;ah++){if(ag[1]>this.MCBAND[ah]){ai=this.MC2LL[ah];break}}return this.convertor(af,ai)},convertLL2MC:function(af){var ag,ai;ag=new w(Math.abs(af[0]),Math.abs(af[1]));for(var ah=0;ah<this.LLBAND.length;ah++){if(ag[1]>this.LLBAND[ah]){ai=this.LL2MC[ah];break}}return convertor(af,ai)},convertor:function(ag,ah){if(!ag||!ah){return}var ai=new w();ai[0]=ah[0]+ah[1]*Math.abs(ag[0]);var af=Math.abs(ag[1])/ah[9];ai[1]=ah[2]+ah[3]*af+ah[4]*af*af+ah[5]*af*af*af+ah[6]*af*af*af*af+ah[7]*af*af*af*af*af+ah[8]*af*af*af*af*af*af;ai[0]*=(ag[0]<0?-1:1);ai[1]*=(ag[1]<0?-1:1);return ai},getDistance:function(ag,af,ai,ah){return this.EARTHRADIUS*Math.acos((Math.sin(ai)*Math.sin(ah)+Math.cos(ai)*Math.cos(ah)*Math.cos(af-ag)))},toRadians:function(af){return Math.PI*af/180},toDegrees:function(af){return(180*af)/Math.PI}});function c(ai,aj,ag,af){j.BaseClass.call(this);this.mgr=ai;this.name=ai.getTileName(af);this.info=af;var ah=document.createElement("img");O(ah,[ai.tileSize,ai.tileSize]);K(ah);P(ah).position="absolute";ah.galleryImg=false;Z(ah,ag);this.img=ah;this._bind();ah.src=aj}c.inherits(n,"Tile");j.extend(c.prototype,{_bind:function(){var ag=this;j.on(ag.img,"load",ah);j.on(ag.img,"error",af);function ah(ao){j.un(ag.img,"load",ah);j.un(ag.img,"error",af);if(!ag.mgr){return}var aj=ag.mgr;var ai=aj.bufferTiles;ai[ag.name]=ag;ai.push(ag.name);var al=ai.length-aj.bufferNumber;for(var am=0;al>0&&am<ai.length;am++){var an=ai[am];if(!aj.mapTiles[an]){if(ai[an]){ai[an].mgr=null;var ak=ai[an].img;if(ak.parentNode){ak.parentNode.removeChild(ak)}delete ai[an]}ai.splice(am,1);am--;al--}}ag.loaded=true;aj.imgNumber++;if(!z(ag.img)){aj.tilesDiv.appendChild(ag.img)}}function af(aj){j.un(ag.img,"load",ah);j.un(ag.img,"error",af);if(!ag.mgr){return}var ai=ag.mgr;ag.error=true;ai.imgErrorNumber++;if(ai.errorUrl){ag.img.src=ai.errorUrl}if(!z(ag.img)){ai.tilesDiv.appendChild(ag.img)}}}});function J(af){this.cacheDiv=null;this.map=af;this.bufferNumber=500;this.mapTiles=[];this.bufferTiles=[];this.imgNumber=0;this.imgErrorNumber=0;this.slideMaxZoom=4;this.config=F[af.mapType];this.errorUrl=this.config.errorUrl;this.tileSize=this.config.tileSize;this.baseUnits=this.config.baseUnits;this.minZoomLevel=this.config.zoomLevelMin;this.maxZoomLevel=this.config.zoomLevelMax;this.tileURLs=this.config.tileUrls;this.temp={}}u.register(function(ag){var af=ag.tileMgr=new J(ag);ag.addEventListener("ondragstart",function(ah){af.dragStart(ah)});ag.addEventListener("ondragend",function(ah){af.dragEnd(ah)});ag.addEventListener("onclick",function(ah){af.click(ah)});ag.addEventListener("onmousewheel",function(ah){af.mouseWheel(ah)});ag.addEventListener("ondblclick",function(ah){af.dblClick(ah)});ag.addEventListener("onload",function(ah){af.loadTiles()});ag.addEventListener("onzoomstart",function(ah){af._zoom()});ag.addEventListener("onmoving",function(ah){af.mend(ah)});ag.addEventListener("onmapcontainerresize",function(ah){af.resizeMap(ah)})});j.extend(J.prototype,{mend:function(af){this.moveGridTiles(true)},_zoom:function(ag){var af=this;if((af.map.currentOperation&f.mousewheel)!=0||(af.map.currentOperation&f.dblclick)!=0){return}setTimeout(function(){af.moveGridTiles(true);af.map.dispatchEvent(new ab("onzoomend"))},10)},resizeMap:function(ai){this.loaded=false;var ah=this.map;var af;if(!this.loaded){this.initialize();af=true}if(j.Browser.ie){try{document.execCommand("BackgroundImageCache",false,true)}catch(ag){}}this.moveGridTiles(true)},zoom:function(am,at,ar){at=at||0;ar=ar||0;var ag=this.map;var ai=am?new p(am.offsetX,am.offsetY):new p(ag.width/2,ag.height/2);var ap=this;if(this._mst){window.clearTimeout(this._mst);this._mst=null}this._mst=window.setTimeout(function(){ap.moveGridTiles(true)},500);if(ag.overlayDiv){ag.overlayDiv.style.display="none"}if(ag.markerDiv){ag.markerDiv.style.display="none"}if(!this.zoomsDiv){this.zoomsDiv=this.tilesDiv.cloneNode(true);ag.platform.insertBefore(this.zoomsDiv,ag.platform.firstChild)}var af={x:ai.x-parseInt(this.tilesDiv.style.left)-ag.offsetX,y:ai.y-parseInt(this.tilesDiv.style.top)-ag.offsetY};var aj=[];var ao=ag.zoomLevel-ag.lastLevel;var an=Math.pow(2,ao);var al=this.zoomsDiv.childNodes.length;for(var ak=al-1;ak>-1;ak--){var ah={};var aq=this.zoomsDiv.childNodes[ak].style;ah.top=parseInt(aq.top)||0;ah.left=parseInt(aq.left)||0;ah.width=parseInt(aq.width);ah.height=parseInt(aq.height);ah.dw=ah.width*an-ah.width;ah.dh=ah.height*an-ah.height;ah.dx=(ah.left-af.x)*an-(ah.left-af.x);ah.dy=(ah.top-af.y)*an-(ah.top-af.y);aj[ak]=ah}this.zoomsDiv._ol=parseInt(this.zoomsDiv.style.left);this.zoomsDiv._ot=parseInt(this.zoomsDiv.style.top);if(this._zTimeLine!=null){return}this._zTimeLine=new j.TimeLine({interval:60,duration:ag.config.zoomerDuration,render:function(aw){aw=Math.pow(aw,3);for(var av=aj.length-1;av>-1;av--){var ax=aj[av];if(ap.zoomsDiv&&ap.zoomsDiv.childNodes[av]){var au=ap.zoomsDiv.childNodes[av].style;au.top=Math.round(ax.top+ax.dy*aw)+"px";au.left=Math.round(ax.left+ax.dx*aw)+"px";au.width=Math.ceil(ax.width+ax.dw*aw)+"px";au.height=Math.ceil(ax.height+ax.dh*aw)+"px";if(at||ar){ap.zoomsDiv.style.left=ap.zoomsDiv._ol-(at*aw)+"px";ap.zoomsDiv.style.top=ap.zoomsDiv._ot-(ar*aw)+"px"}if(aw==1){ap.zoomsDiv.style.display="none";ap.tilesDiv.style.display="block";ap.moveGridTiles(true);if(ap.zoomsDiv){ag.platform.removeChild(ap.zoomsDiv);ap.zoomsDiv=null}if(ag.overlayDiv){ag.overlayDiv.style.display="block"}if(ag.markerDiv){ag.markerDiv.style.display="block"}ap._zTimeLine=null;break}}}},finish:function(){ap._zTimeLine=null;if(ap.zoomsDiv){ag.platform.removeChild(ap.zoomsDiv);ap.zoomsDiv=null}ap.tilesDiv.style.display="block";ag.dispatchEvent(new ab("onzoomend"))}});this.tilesDiv.style.display="none"},showTile:function(ak,aj,an,ao){this.centerPos=aj;var ah=this.getTileName(ak);var ai=(ak[0]*this.tileSize)+Math.round(aj[0]);var ag=(-1-ak[1])*this.tileSize+Math.round(aj[1]);var al=[ai,ag];var am=this.mapTiles[ah];if(am){if(an){Z(am.img,al)}return}am=this.bufferTiles[ah];if(am){this.tilesDiv.insertBefore(am.img,this.tilesDiv.lastChild);this.mapTiles[ah]=am;Z(am.img,al);this.imgNumber++;return}else{var af=this.getTilesUrl(ak[0],ak[1],ak[2],null,ao);am=new c(this,af,al,ak);this.mapTiles[ah]=am}},getTileName:function(af){return"TILE_"+af[0]+"_"+af[1]+"_"+af[2]},hideTile:function(ah){var ag=false;var af=ah.img;if(z(af)){if(ah.loaded){this.imgNumber--;ag=true}af.parentNode.removeChild(af)}if(ah.error){this.imgErrorNumber--}delete this.mapTiles[ah.name];if(!ag){if(af.parentNode){af.parentNode.removeChild(af)}ah.mgr=null}},getTilesUrl:function(aq,aj,ah,am,ap){var ak=200;var ai=200;var ao=Math.floor(aq/ak);var an=Math.floor(aj/ai);var al=this.tileURLs;if(am!=null){if(F[am]){al=F[am].tileUrl}else{al=am}}var ag="";ag=al[Math.abs(aq+aj)%al.length];var af=ag+"u=x="+aq+";y="+aj+";z="+ah+";v=001;type=web&fm=40";af=af.replace(/-(\d+)/gi,"M$1");return af},initialize:function(){var ai=Math.ceil(this.map.width/this.tileSize);var ah=Math.ceil(this.map.height/this.tileSize);ai+=1;ah+=1;var ag=[ai,ah];var af=[];for(var ai=0;ai<ag[0];ai++){for(var ah=0;ah<ag[1];ah++){af.push([ai,ah])}}af.sort(this.getSorter([Math.floor(ag[0]/2),Math.floor(ag[1]/2)]));this.tileOrder=af;this.mapGrid=ag;this.loaded=true},getSorter:function(af){return function(ag,ah){return(Math.abs(ag[0]-af[0])+Math.abs(ag[1]-af[1]))-(Math.abs(ah[0]-af[0])+Math.abs(ah[1]-af[1]))}},loadTiles:function(){var ah=this.map;var af;if(!this.loaded){this.initialize();af=true}if(j.Browser.ie){try{document.execCommand("BackgroundImageCache",false,true)}catch(ag){}}if(!this.tilesDiv){ah.temp.titlesDiv=this.tilesDiv=M(ah.platform,'<font style="position:absolute;"></font>')}this.tilesDiv.style.display="";this.tilesDiv.style.left=Math.ceil(-ah.offsetX+ah.width/2)+"px";this.tilesDiv.style.top=Math.ceil(-ah.offsetY+ah.height/2)+"px";this.moveGridTiles(true)},getCell:function(aj,ai){var af=this.baseUnits*Math.pow(2,(this.maxZoomLevel-ai));var ah=parseInt(aj[0]/af);var ag=parseInt(aj[1]/af);return[ah,ag,af*(ah+0.5),af*(ag+0.5)]},moveGridTiles:function(au){var az=this.map;var aq=az.zoomLevel;var av=az.centerPoint;this.mapCenterPoint=av;var an=az.getZoomUnits(az.zoomLevel);var ar=this.mapGrid;var ap=this.baseUnits*Math.pow(2,(this.maxZoomLevel-aq));var ao=parseInt(av[0]/ap);if(av[0]<0){ao-=1}var aj=parseInt(av[1]/ap);if(av[1]<0){aj-=1}var ag=[ao,aj,ap*(ao+0.5),ap*(aj+0.5)];var ai=(ar[0]%2==0)?((ag[2]>av[0])?ar[0]/2:ar[0]/2-1):(ar[0]-1)/2;var aB=(ar[1]%2==0)?((ag[3]>av[1])?ar[1]/2-1:ar[1]/2):(ar[1]-1)/2;var al=[ai,aB];if(au){this.areaCenter=new w(Math.round(av[0]),Math.round(av[1]))}var af=this.mapTiles;var am=-Math.round(this.areaCenter[0]/an);var ak=Math.round(this.areaCenter[1]/an);var ax=[am,ak];var ah=this.tileOrder;var at=ah.length;for(var ay in af){var aA=af[ay];if(!aA.info){continue}if(aA.info[2]==az.zoomLevel&&!(aA.info[0]-ag[0]>=-al[0]&&aA.info[0]-ag[0]<ar[0]-al[0]&&aA.info[1]-ag[1]<al[1]-ar[1]&&aA.info[1]-ag[1]>=al[1])){this.hideTile(aA)}else{if(aA.info[2]!=az.zoomLevel){this.hideTile(aA)}else{if(aA.info[2]==az.lastLevel){this.showTile(aA.info,[ax[0]*Math.pow(2,az.zoomLevel-az.lastLevel),ax[1]*Math.pow(2,az.zoomLevel-az.lastLevel)],au)}}}}this.tilesDiv.style.left=Math.ceil(-az.offsetX+az.width/2)+"px";this.tilesDiv.style.top=Math.ceil(-az.offsetY+az.height/2)+"px";for(var aw=0;aw<at;aw++){this.showTile([ag[0]-al[0]+ah[aw][0],ag[1]+al[1]-ah[aw][1],az.zoomLevel],ax,au,aw)}this.centerBox=ag;this.centerNum=al;return},dragStart:function(af){this.temp.pps={x:this.map.offsetX,y:this.map.offsetY}},dragEnd:function(af){this.temp.ppe={x:this.map.offsetX,y:this.map.offsetY}},click:function(ag){if(!this.map.config.enableClickPan){return}var af=this.temp;if(this.map.currentOperation==0&&!af.ppe&&!af.pps||(af.ppe&&af.pps&&(af.ppe.x-af.pps.x==0&&af.ppe.y-af.pps.y==0))){this.map.panBy(this.map.width/2-ag.offsetX,this.map.height/2-ag.offsetY)}af.pps=null;af.ppe=null},mouseWheel:function(aj){if(!this.map.config.enableWheelZoom){return}var ai=this.map;ai.dispatchEvent(new ab("onzoomstart"));var ak=F[ai.mapType];ai.zoomLevel=ai.zoomLevel+(aj.trend==true?1:-1);if(ai.zoomLevel>ak.zoomLevelMax){ai.zoomLevel=ak.zoomLevelMax;return}if(ai.zoomLevel<ak.zoomLevelMin){ai.zoomLevel=ak.zoomLevelMin;return}if(aj){var af=new p(aj.offsetX,aj.offsetY);var ag=ai.pixelToPoint(af,ai.lastLevel);var ah=ai.getZoomUnits(ai.zoomLevel);ai.centerPoint=new w(ag.lng+ah*(ai.width/2-af.x),ag.lat-ah*(ai.height/2-af.y));ai.lastPoint=ai.centerPoint;this.zoom(aj)}else{var ai=this;setTimeout(function(){ai.moveGridTiles(true)},10)}},dblClick:function(ai){if(!this.map.config.enableDblclickZoom){return}var aj=this.map;var am=new p(ai.offsetX,ai.offsetY);var ag=aj.pixelToPoint(am);var ak=F[aj.mapType].zoomLevelMax;if(aj.zoomLevel<ak){aj.dispatchEvent(new ab("onzoomstart"));aj.lastLevel=aj.zoomLevel;aj.zoomLevel++;var ah=aj.getZoomUnits(aj.zoomLevel);aj.centerPoint=new w(ag.lng,ag.lat);var af=(aj.getZoomUnits(aj.zoomLevel-1))/ah*0.5;var an=am.x-Math.round(aj.width/2)*af;var al=am.y-Math.round(aj.height/2)*af;this.zoom(ai,an,al)}else{aj.panTo(ag)}}});function a(){n.call(this);this._map=null;this._toolbarContainer;this._container;this._opts={tips:"",cursor:"default",isCheckButton:true,visible:true};this._type="toolbarItem"}a.inherits(n,"ToolbarItem");j.extend(a.prototype,{initialize:function(ag,af){if(this._container&&af.getDom()){af.getDom().appendChild(this._container);return false}this._map=ag;this._toolbarContainer=af;return true},_render:function(){this._container=M(this._toolbarContainer.getDom(),"<div></div>");j.ac(this._container,"BMap_titem");this._container.title=this._opts.tips;if(!this._opts.visible){this._container.style.display="none"}return this._container},_bind:function(){var af=this;j.on(af._container,"mouseover",function(ag){af._onItemMouseOver(ag)});j.on(af._container,"mouseout",function(ag){af._onItemMouseOut(ag)});j.on(af._container,"mousedown",function(ag){af._onItemMouseDown(ag)});j.on(af._container,"mouseup",function(ag){af._onItemMouseUp(ag,af)});j.on(af._container,"click",function(ag){af._onItemClick(ag)})},remove:function(){if(this._toolbarContainer.getDom()){this._toolbarContainer.getDom().removeChild(this._container)}},getTips:function(){return this._opts.tips},setTips:function(af){this._opts.tips=this._checkStr(af+"");if(this._container){this._container.setAttribute("title",af)}},getDom:function(){return this._container},btnClick:function(){if(!this._map){return}this._onItemClickFunc()},show:function(){this._opts.visible=true;if(this._container){this._container.style.display="block"}},hide:function(){this._opts.visible=false;if(this._container){this._container.style.display="none"}},isVisible:function(){return this._opts.visible},_onItemMouseOver:function(af){j.ac(this._container,"BMap_msover")},_onItemMouseOut:function(af){j.rc(this._container,"BMap_msover")},_onItemMouseDown:function(af){j.ac(this._container,"BMap_msdown");ac(af)},_onItemMouseUp:function(ag,af){j.rc(this._container,"BMap_msdown");if(af._map.currentOperation&f.drag==0){ac(ag)}},_onItemClick:function(af){if(this._opts.isCheckButton==true){this._toolbarContainer.unCheckOthers(this)}this._onItemClickFunc();ac(af)},_onItemClickFunc:function(){this._checked=!this._checked;if(this._checked==true){this._map.currentOperation|=f.toolbarOperation}else{this._map.currentOperation&=~f.toolbarOperation}if(this._checked){j.ac(this._container,"BMap_itemChecked");if(this._opts.followText){var af=this.followTitle=new I(this._opts.followText,{offset:[10,-10]});this._map.addOverlay(af);af.hide()}}else{j.rc(this._container,"BMap_itemChecked");this.followTitle&&this.followTitle.remove()}},setCursor:function(af){this._opts.cursor=af;if(af.search(/\//)>=0||af.search(/\./)>=0){this._opts.cursor="url("+af+"), default"}else{this._opts.cursor=af}},getCursor:function(){return this._opts.cursor},_checkStr:function(ag){var af=ag.replace("<","&lt;");af=af.replace(">","&gt;");return af}});function q(af){a.call(this);this._opts=j.extend(j.extend(this._opts,{autoClear:false,tips:"测距",followText:"单击确定起点",unit:"metric",showResult:true,lineColor:"blue",lineStroke:2,opacity:1,lineStyle:"solid",cursor:"styles/bmap/ruler.cur",styleCodes:{lnCode:0,spCode:0,slCode:0,tlCode:0}}),af);if(this._opts.showResult==false){if(af&&!af.followText){this._opts.followText="单击确定起点，双击结束绘制"}if(!af.tips){this._opts.tips="绘制折线"}}if(this._opts.lineStroke<=0){lineStroke=2}if(this._opts.opacity>1){this._opts.opacity=1}else{if(this._opts.opacity<0){this._opts.opacity=0}}if(this._opts.lineStyle!="solid"&&this._opts.lineStyle!="dashed"){this._opts.lineStyle="solid"}this._checked=false;this._drawing=null;this.followTitle=null;this._totalDis={};this._points=[];this._paths=[];this._dots=[];this._segDistance=[];this._overlays=[];this._units={metric:{name:"metric",conv:1,incon:1000,u1:"米",u2:"公里"},us:{name:"us",conv:3.2808,incon:5279.856,u1:"英尺",u2:"英里"}};if(!this._units[this._opts.unit]){this._opts.unit="metric"}this._dLineColor="#ff6319";this._dLineStroke=3;this._dOpacity=0.8;this._dLineStyle="solid";this._dCursor="styles/bmap/ruler.cur";this._followTextS="单击确定起点";this._followTextM="单击确定地点，双击结束";this._movingTimerId=null}q.inherits(a,"PolylineTItem");j.extend(q.prototype,{initialize:function(ah,af){if(a.prototype.initialize.call(this,ah,af)==false){return}this._render();this._bind();var ag=this;ah.addEventListener("moving",function(){ag._hideCurrent()})},_bind:function(){a.prototype._bind.call(this);var af=this;this.setCursor(this._opts.cursor);j.on(this._map.container,"mousemove",function(ai){if(!af._checked){return}ai=window.event||ai;var ag=ai.target||ai.srcElement;if(ag!=i.getDom(af._map)){af.followTitle.hide();return}if(!af._mapMoving){af.followTitle.show()}var ah=i.getDrawPoint(ai,true);af.followTitle.setPoint(ah)});j.on(i.getDom(af._map),"mousedown",function(ag){if(af._map.config.enableKeyboard==true){af._map.temp.canKeyboard=true;ac(ag)}})},_onItemClickFunc:function(){a.prototype._onItemClickFunc.call(this);this._formatTitle();if(this._mapMoving){delete this._mapMoving}var am=this;var ag=function(au){if(am._map.currentOperation&f.toolbarOperation==0||!am._checked){return}au=window.event||au;var aq=i.getDrawPoint(au,true);if(!am._isPointValid(aq)){return}am._bind.initX=au.pageX||au.clientX||0;am._bind.initY=au.pageY||au.clientY||0;if(am._points.length>0){var ax=map.pointToPixel(am._points[am._points.length-1]);var ap=map.pointToPixel(aq);var at=Math.sqrt(Math.pow(ax.x-ap.x,2)+Math.pow(ax.y-ap.y,2));if(at<5){return}}am._bind.x=au.layerX||au.offsetX||0;am._bind.y=au.layerY||au.offsetY||0;am._points.push(aq);if(am._opts.showResult){am._addSecPoint(aq)}if(am._opts.showResult&&am._paths.length==0){am._formatTitle(1,am._followTextM,am.getTotalDistance())}if(am._opts.showResult&&am._paths.length>0){am._paths[am._paths.length-1].setOpacity(am._dOpacity);am._paths[am._paths.length-1].show()}var aA=new v([aq,aq]);am._map.addOverlay(aA);aA._stCode=am._opts.styleCodes.lnCode;am._paths.push(aA);am._overlays.push(aA);if(am._opts.showResult){aA.setLineStroke(am._dLineStroke);aA.setLineColor(am._dLineColor);aA.setOpacity(am._dOpacity/2);aA.setLineStyle(am._dLineStyle)}else{aA.setLineStroke(am._opts.lineStroke);aA.setLineColor(am._opts.lineColor);aA.setOpacity(am._opts.opacity);aA.setLineStyle(am._opts.lineStyle)}if(am._mapMoving){aA.hide()}if(am._opts.showResult){var av="";if(am._points.length>1){var ar=am._paths[am._points.length-2];ar.setPath(aq,1);var ay=am._setSegDistance(am._points[am._points.length-2],am._points[am._points.length-1]);var aw=am.getTotalDistance();av=am._formatDisStr(aw)}else{av="起点"}var az=new I(av,{color:"#333",borderColor:"#ff0103",offset:[10,-5]});az._stCode=am._opts.styleCodes.slCode;am._map.addOverlay(az);am._formatSegLabel(az,av);am._overlays.push(az);aq.disLabel=az;az.setPoint(aq)}};var an=function(au){if(!am._checked){return}if(am._paths.length>0){au=window.event||au;var aq=au.pageX||au.clientX||0;var ap=au.pageY||au.clientY||0;if(typeof am._bind.initX=="undefined"){am._bind.x=au.layerX||au.offsetX||0;am._bind.y=au.layerY||au.offsetY||0;am._bind.initX=aq;am._bind.initY=ap}var aw=am._bind.x+aq-am._bind.initX;var av=am._bind.y+ap-am._bind.initY;var az=am._paths[am._paths.length-1];var ar=am._map.pixelToPoint(new p(aw,av));az.setPath(ar,1);if(!am._mapMoving){az.show()}var aA=0;var ay=0;if(aw<6){aA=80}else{if(aw>am._map.width-5){aA=-80}}if(av<6){ay=80}else{if(av>am._map.height-5){ay=-80}}if(aA!=0||ay!=0){if(!an._movingTimerId){am._mapMoving=true;an._movingTimerId=setInterval(function(){am._map.panBy(aA,ay,30)},60);am._movingTimerId=an._movingTimerId;az.hide();am.followTitle.hide()}}else{if(an._movingTimerId){setTimeout(function(){var aC=am._paths[am._paths.length-1];var aB=am._map.pixelToPoint(new p(aw,av));if(!aC){return}aC.setPath(aB,1);aC.show();am.followTitle.setPoint(aB);am.followTitle.show();delete am._mapMoving},400);clearInterval(an._movingTimerId);delete an._movingTimerId;am._movingTimerId=null}}if(am._opts.showResult){var at=am.getTotalDistance();dis=ad.getDistanceByMC(am._points[am._points.length-1],ar);am._updateInstDis(am.followTitle.getDom(),at+dis)}}else{au=window.event||au;var ax=au.target||au.srcElement;am.followTitle.show();if(ax!=i.getDom()){am.followTitle.hide()}}};var ak=function(av){if(!am._checked){return}j.un(i.getDom(am._map),"click",ag);j.un(document,"mousemove",an);j.un(i.getDom(am._map),"dblclick",ak);if(am._opts.showResult&&am._points.length>0){var au=am._points[am._points.length-1];au.disLabel.remove();delete au.disLabel}if(am._paths.length>0){var at=am._paths[am._paths.length-1];var ar=am._map.pointToPixel(am._points[am._points.length-1]);var aq=am._map.pointToPixel(am._points[am._points.length-2]);if(ar&&aq){var ap=Math.round(Math.sqrt((ar.x-aq.x)*(ar.x-aq.x)+(ar.y-aq.y)*(ar.y-aq.y)));if(ap<5){at.remove();am._paths.length=am._paths.length-1}if(am._opts.showResult&&am._paths.length>0){am._processLastOp()}}}else{if(am._opts.showResult==true&&am._paths.length<1){am._clearThis()}}am.dispatchEvent(new ab("ondrawended"));setTimeout(function(){if(am._checked==true){am.btnClick()}},50)};var ah=function(ap){ap=window.event||ap;if(ap.keyCode==27){am._clearThis();am.dispatchEvent(new ab("ondrawended"));setTimeout(function(){if(am._checked==true){am.btnClick()}},50)}};var af=function(ap){ap=window.event||ap;if(j.Browser.ie&&ap.button!=1||ap.button==2){if(am._checked==true){am.dispatchEvent(new ab("ondrawended"));am.btnClick()}}};if(this._checked==true){am._initArrays();var al=this._drawing=new V();al.map=this._map;this._map.addOverlay(al);al.createPalette();i.show(this._map);this.setCursor(this._opts.cursor);j.on(i.getDom(this._map),"click",ag);j.on(document,"mousemove",an);j.on(i.getDom(this._map),"dblclick",ak);j.on(document,"keydown",ah);j.on(i.getDom(this._map),"mouseup",af);this.bindFunc=[{elem:i.getDom(this._map),type:"click",func:ag},{elem:i.getDom(this._map),type:"dblclick",func:ak},{elem:document,type:"mousemove",func:an},{elem:document,type:"keydown",func:ah},{elem:i.getDom(this._map),type:"mouseup",func:af}];this.dispatchEvent(new ab("ondrawstarted"))}else{if(am._points.length<2){am._clearThis()}else{am._paths[am._paths.length-1].remove();am._paths[am._paths.length-1]=null;am._paths.length=am._paths.length-1;var ao=am._points[am._points.length-1];if(ao.disLabel){ao.disLabel.remove()}am._processLastOp()}i.hide();for(var aj=0,ai=this.bindFunc.length;aj<ai;aj++){j.un(this.bindFunc[aj].elem,this.bindFunc[aj].type,this.bindFunc[aj].func)}if(am._movingTimerId){clearInterval(am._movingTimerId);delete an._movingTimerId;am._movingTimerId=null}}this.dispatchEvent(new ab("onclick"))},_clearThis:function(){for(var ag=0,af=this._points.length;ag<af;ag++){if(this._points[ag].disLabel){this._points[ag].disLabel.remove()}}for(var ag=0,af=this._paths.length;ag<af;ag++){this._paths[ag].remove()}for(var ag=0,af=this._dots.length;ag<af;ag++){this._dots[ag].remove()}this._initArrays()},_initArrays:function(){this._points.length=0;this._paths.length=0;this._segDistance.length=0;this._dots.length=0},_updatePoi:function(ag,ah){var af=this._points[this._points.length-1];this._drawing.setPolylinePoint(ag,[af,ah])},_setSegDistance:function(ag,af){if(!ag||!af){return}dis=ad.getDistanceByMC(ag,af);this._segDistance.push(dis);return dis},getTotalDistance:function(){var ah=0;for(var ag=0,af=this._segDistance.length;ag<af;ag++){ah+=this._segDistance[ag]}return ah},_convertUnit:function(af,ag){ag=ag||"metric";if(this._units[ag]){return af*this._units[ag].conv}return af},_addSecPoint:function(ah){var ag=new l("http://map.baidu.com/iknow/styles/bmap/mapctrls.png",{width:11,height:11,imgOffset:[-26,-313]});var af=new C(ah,{icon:ag,clickable:false,baseZIndex:3500000,zIndexFixed:true});af._stCode=this._opts.styleCodes.spCode;map.addOverlay(af);this._dots.push(af)},_formatDisStr:function(ai){var ag=this._opts.unit;var ah=this._units[ag].u1;var af=this._convertUnit(ai,ag);if(af>this._units[ag].incon){af=af/this._units[ag].incon;ah=this._units[ag].u2;af=af.toFixed(1)}else{af=af.toFixed(0)}return af+ah},setLineColor:function(af){if(af&&typeof af=="string"){this._opts.lineColor=af}},setLineStroke:function(af){if(Math.round(af)>0){this._opts.lineStroke=Math.round(af)}},setOpacity:function(af){if(af>=0&&af<=1){this._opts.opacity=af}},setLineStyle:function(af){if(af=="solid"||af=="dashed"){this._opts.lineStyle=af}},clear:function(){for(var ag=0,af=this._overlays.length;ag<af;ag++){if(this._overlays[ag]&&this._overlays[ag].remove){this._overlays[ag].remove()}}this._overlays.length=0;for(var ag=0,af=this._dots.length;ag<af;ag++){if(this._dots[ag]&&this._dots[ag].parentNode){this._dots[ag].parentNode.removeChild(this._dots[ag])}}this._dots.length=0},setCursor:function(af){a.prototype.setCursor.call(this,af);if(this._opts.showResult==true){i.setCursor("url("+this._dCursor+"), crosshair")}else{i.setCursor(this._opts.cursor)}},getCursor:function(){return this._opts.cursor},showResult:function(af){this._opts.showResult=!!af},_formatSegLabel:function(af,ah){var ag=af.getDom();ag.style.border="none";ag.style.padding="0";ag.innerHTML="<span class='BMap_diso'><span class='BMap_disi'>"+ah+"</span></span>"},_processLastOp:function(){var aj=this;delete aj._bind.x;delete aj._bind.y;delete aj._bind.initX;delete aj._bind.initY;if(aj._paths.length>aj._points.length-1){var ah=aj._paths.length-1;aj._paths[ah].remove();aj._paths[ah]=null;aj._paths.length=ah}if(!aj._opts.showResult){return}var af=aj._totalDis[aj._points[0].getHashCode()]={};af.points=aj._points.slice(0);af.paths=aj._paths.slice(0);af.dots=aj._dots.slice(0);af.segDis=aj._segDistance.slice(0);var ak=aj._map.pointToPixel(af.points[af.points.length-1]);var ai=aj._map.pointToPixel(af.points[af.points.length-2]);var al=[0,0];var ag=[0,0];if(ak.y-ai.y>=0){ag=[-5,11]}else{ag=[-5,-35]}if(ak.x-ai.x>=0){al=[14,0]}else{al=[-14,0]}var ao=af.points[af.points.length-1];ao.disLabel=new I("",{color:"#333",borderColor:"#ff0103",offset:[-15,-40]});ao.disLabel._stCode=aj._opts.styleCodes.tlCode;aj._map.addOverlay(ao.disLabel);ao.disLabel.setOffset(ag[0],ag[1]);ao.disLabel.setPoint(ao);aj._formatTitle(2,"","",ao.disLabel);var an=new l("http://map.baidu.com/iknow/styles/bmap/mapctrls.gif",{height:12,width:12,imgOffset:[0,-14]});af.closeBtn=new C(af.points[af.points.length-1],{icon:an,offset:al,baseZIndex:3600000});map.addOverlay(af.closeBtn);af.closeBtn.getDom().title="清除本次测距";af.closeBtn.addEventListener("click",function(at){var aq=af.points[0].getHashCode();for(var ar=0,ap=af.points.length;ar<ap;ar++){af.points[ar].disLabel.remove();af.points[ar].disLabel=null}for(var ar=0,ap=af.paths.length;ar<ap;ar++){af.paths[ar].remove();af.paths[ar]=null}for(var ar=0,ap=af.dots.length;ar<ap;ar++){af.dots[ar].remove();af.dots[ar]=null}af.closeBtn.remove();af.closeBtn=null;delete aj._totalDis[aq];ac(at)});var am=af.dots[af.dots.length-1];if(am&&am._bind!=true){am._bind=true;am.getDom().style.cursor="pointer";am.addEventListener("click",function(au){aj.btnClick();aj._points=af.points.slice(0);aj._paths=af.paths.slice(0);aj._dots=af.dots.slice(0);aj._segDistance=af.segDis.slice(0,af.points.length-1);var av=aj._points[aj._points.length-1];var at=new v([av,av]);at._stCode=aj._opts.styleCodes.lnCode;aj._map.addOverlay(at);aj._paths.push(at);aj._overlays.push(at);at.setLineStroke(aj._dLineStroke);at.setLineColor(aj._dLineColor);at.setOpacity(aj._dOpacity/2);at.setLineStyle(aj._dLineStyle);var aw=aj._map.pointToPixel(aj._points[aj._points.length-1]);aj._formatTitle(1,aj._followTextM,aj.getTotalDistance());af.closeBtn.remove();af.points[af.points.length-1].disLabel.remove();var aq=aj.getTotalDistance();var ar=aj._formatDisStr(aq);var ap=new I(ar,{color:"#333",borderColor:"#ff0103",offset:[10,-5]});ap._stCode=aj._opts.styleCodes.slCode;aj._map.addOverlay(ap);aj._formatSegLabel(ap,ar);aj._overlays.push(ap);af.points[af.points.length-1].disLabel=ap;ap.setPoint(av);am.removeEventListener("click",arguments.callee);am._bind=false;am.getDom().style.cursor="url("+aj._map.config.defaultCursor+"), move"})}aj._initArrays()},_formatTitle:function(ai,ao,af,ak){var aj=ak||this.followTitle;if(!aj){return}var ah=aj.getDom();j.ac(ah,"BMap_disLabel");var aq=ah.style;var ap=aj.content;aq.zIndex="85";aq.padding="3px 5px";var am=[];if(ai==1){aj.setOffset(0,25);var an=this._opts.unit;var al=this._units[an].u1;var ag=this._convertUnit(af,an);if(ag>this._units[an].incon){ag=ag/this._units[an].incon;al=this._units[an].u2;ag=ag.toFixed(1)}else{ag=ag.toFixed(0)}am.push("<span>总长：<span class='BMap_disBoxDis'>"+ag+"</span>"+al+"</span><br />");am.push("<span style='color:#7a7a7a'>"+ao+"</span>")}else{if(ai==2){var an=this._opts.unit;var al=this._units[an].u1;var ag=this._convertUnit(this.getTotalDistance(),an);if(ag>this._units[an].incon){ag=ag/this._units[an].incon;al=this._units[an].u2;ag=ag.toFixed(1)}else{ag=ag.toFixed(0)}am.push("总长：<span class='BMap_disBoxDis'>"+ag+"</span>"+al);aj.content="总长："+ag+al}else{aj.setOffset(0,25);am.push(ap)}}ah.innerHTML=am.join("")},_updateInstDis:function(ah,af){var ag=this._opts.unit;var ai=this._units[ag].u1;if(af>this._units[ag].incon){af=af/this._units[ag].incon;ai=this._units[ag].u2;af=af.toFixed(1)}else{af=af.toFixed(0)}ah.children[0].innerHTML="总长：<span class='BMap_disBoxDis'>"+af+"</span>"+ai},_hideCurrent:function(){if(!this._checked){return}if(this._paths.length>0){var af=this._paths[this._paths.length-1];af.hide()}this.followTitle.hide()},_isPointValid:function(af){if(!af){return false}if(af.lng<F[this._map.mapType].bounds[0]||af.lng>F[this._map.mapType].bounds[2]||af.lat<F[this._map.mapType].bounds[1]||af.lat>F[this._map.mapType].bounds[3]){return false}return true}});function h(){}function Q(ag,af,ai){var ah=document.createElement("div");if(ag>0){P(ah).position=(ag==2)?"relative":"absolute"}if(af){Z(ah,af)}if(ai){b(ah,ai)}return ah}function P(af){return af.style}function b(af,ag){P(af).zIndex=ag}function Z(ag,af){P(ag).left=U(af[0]);P(ag).top=U(af[1])}function S(ah,ag){var af=P(ah);af.opacity=ag;af.MozOpacity=ag;af.KhtmlOpacity=ag;af.filter="alpha(opacity="+(ag*100)+")";af=null}function U(ah){if(typeof ah=="number"){return ah+"px"}else{if(typeof ah=="string"){var ag=/"\\s","g"/;var ai=/"^\\d+(px|%)+$","i"/;var af=ah.replace(ag,"");if(ai.exec(af)){return af}var aj=new RegExp("^\\d+$");if(aj.exec(af)){return af+"px"}return"0px"}}}function K(af){if(j.Browser.ie>0){af.unselectable="on";af.selectstart=function(){return false}}else{P(af).MozUserSelect="none"}}function O(ag,af){P(ag).width=U(af[0]);P(ag).height=U(af[1])}function N(ah){var ag=[ah.offsetWidth,ah.offsetHeight];if(ah==document.body&&!document.all){ag[1]=ah.clientHeight}if(!ag[0]){ag[0]=ah.clientWidth}if(!ag[0]){ag[0]=parseInt(P(ah).width)}if(!ag[1]){ag[1]=ah.clientHeight}if(!ag[1]){ag[1]=parseInt(P(ah).height)}if(!ag[0]||!ag[1]){var af=ah.parentElement;while(af){if(!ag[0]&&af.offsetWidth){ag[0]=af.offsetWidth}if(!ag[1]&&af.offsetHeight){ag[1]=af.offsetHeight}if(ag[0]&&ag[1]){break}af=af.parentElement}}return ag}function z(af){return af.parentNode&&af.parentNode.nodeType!=11}function M(ag,af){ag.insertAdjacentHTML("beforeEnd",af);return ag.lastChild}function B(af,ag){if(af.lng<ag.minX||af.lng>ag.maxX||af.lat<ag.minY||af.lat>ag.maxY){return false}else{return true}}function ac(af){var af=window.event||af;af.stopPropagation?af.stopPropagation():af.cancelBubble=true}function L(af){var af=window.event||af;af.preventDefault?af.preventDefault():af.returnValue=false;return false}function G(aj,ah){aj=aj||window.event;var af=aj.clientX||aj.pageX;var al=aj.clientY||aj.pageY;var ag=aj.target||aj.srcElement;if(aj&&ah&&af&&al&&ag&&j.I(ag.hashCode)){var ai=j.I(ag.hashCode).map;var ak=j.Dom.getOffset(ai.container);ah.point=ai.pixelToPoint(new p(af-ak.left,al-ak.top));return ah}else{return ah}}function m(ah){if(ah&&ah.clientX&&ah.clientY&&ah.target&&j.I(ah.target.hashCode)){var ag=j.I(ah.target.hashCode).map;var ai=j.Dom.getOffset(ag.container);var af=ah.clientX||ah.x;var aj=ah.clientY||ah.y;ah.point=ag.pixelToPoint(new p(af-ai.left,aj-ai.top));return ah}else{return ah}}function Y(af){this._container=null;this._map=af}u.register(function(ag){if(ag.config&&ag.config.isOverviewMap){return}var af=new Y(ag);ag.container.insertAdjacentHTML("beforeEnd",af.render());af._container=ag.container.lastChild;ag.addEventListener("onmousewheel",function(ah){af.action(ah,ag)})});Y.prototype.render=function(){var af=['<div id=zoomer style="position:absolute; z-index:0; top:0px; left:0px;overflow:hidden; visibility: hidden; ">'];af.push('<div class="BMap_zoomer" style="top:0;left:0;"></div>');af.push('<div class="BMap_zoomer" style="top:0;right:0;"></div>');af.push('<div class="BMap_zoomer" style="bottom:0;left:0;"></div>');af.push('<div class="BMap_zoomer" style="bottom:0;right:0;"></div>');af.push("</div>");return af.join("")};Y.prototype.action=function(ao){if(Y._timeline){return}var am=this._container;if(!am){return}var ag=ao.currentTarget;var aw=ao.trend;if(ao.oldZoomLevel==ag.zoomLevel||ag.lastLevel==F[ag.mapType].zoomLevelMin&&!aw||ag.lastLevel==F[ag.mapType].zoomLevelMax&&aw){return}var ai=ag.config.zoomerSizeMin||60;var av=ag.config.zoomerSizeMax||120;var ap=ag.width/ag.height;var an=ap>=1;var ak=Math.ceil((aw?ai:av)/2);var al=Math.max(15,(an?ak/ap:ak*ap));am.style[(an?"width":"height")]=ak*2+"px";am.style[(an?"height":"width")]=al*2+"px";am.style.visibility="visible";var ar=am.children;if(aw){ar[0].style.backgroundPosition="0 0";ar[1].style.backgroundPosition="-7px 0";ar[2].style.backgroundPosition="0 -7px";ar[3].style.backgroundPosition="-7px -7px"}else{ar[0].style.backgroundPosition="-7px -7px";ar[1].style.backgroundPosition="0 -7px";ar[2].style.backgroundPosition="-7px 0";ar[3].style.backgroundPosition="0 0"}ar=null;var au=ao.offsetX-(an?ak:al);var at=ao.offsetY-(an?al:ak);if(isNaN(au)||isNaN(at)){return}am.style.left=au+"px";am.style.top=at+"px";var ah=Math.ceil((aw?av:ai)/2);var aj=Math.max(15,(an?ah/ap:ah*ap));ah=ah-ak;aj=Math.ceil(aj-al);var aq=this;var af=aq._container.style;if(Y._timeline){Y._timeline.end()}setTimeout(function(){Y._timeline=new j.TimeLine({interval:60,duration:aq._map.config.zoomerDuration,render:function(ay){ay=Math.pow(ay,3);var az=Math.ceil(ah*ay);var ax=Math.ceil(aj*ay);af[an?"width":"height"]=(ak+az)*2+"px";af[an?"height":"width"]=(al+ax)*2+"px";af[an?"left":"top"]=((an?au:at)-az)+"px";af[an?"top":"left"]=((an?at:au)-ax)+"px"},finish:function(){Y._timeline=false;setTimeout(function(){am.style.visibility="hidden"},60)}})},30)};window.BMap=u;u.Map=s;u.Point=w;u.Pixel=p;u.Overlay=X;u.Draw=V;u.Control=x;u.ControlAnchor=e;u.StandardMapControl=T;u.OverviewMapControl=ae;u.CopyrightControl=r;u.ScaleControl=y;u.ToolbarControl=g;u.ToolbarItem=a;u.PolylineTItem=q;u.Label=I;u.Marker=C;u.Icon=l;u.Polyline=v;u.Polygon=t;u.InfoWindow=H;u.MapType=F;u.ContextMenu=E;u.MenuItem=D;u.Util=h;u.OperationMask=i;u.Bounds=k;u.Project=ad})();var areaUID="中国|1,安徽|23,福建|16,甘肃|6,广东|7,广西|17,贵州|24,海南|21,河北|25,黑龙江|2,河南|30,湖北|15,湖南|26,江苏|18,江西|31,吉林省|9,辽宁|19,内蒙古|,宁夏|20,青海|11,山东|8,山西|10,陕西|27,四川|32,新疆|12,西藏|13,云南|28,浙江|29,北京|131,天津|332,石家庄|150,唐山|265,秦皇岛|148,邯郸|151,邢台|266,保定|307,张家口|264,承德|207,沧州|149,廊坊|191,衡水|208,太原|176,大同|355,阳泉|357,长治|356,晋城|290,朔州|237,晋中|238,运城|328,忻州|367,临汾|368,吕梁|327,呼和浩特|321,包头|229,乌海|123,赤峰|297,通辽|64,鄂尔多斯|283,呼伦贝尔|61,巴彦淖尔|169,乌兰察布|168,兴安盟|62,锡林郭勒盟|63,阿拉善盟|230,沈阳|58,大连|167,鞍山|320,抚顺|184,本溪|227,丹东|282,锦州|166,营口|281,阜新|59,辽阳|351,盘锦|228,铁岭|60,朝阳|280,葫芦岛|319,长春|53,吉林市|55,四平|56,辽源|183,通化|165,白山|57,松原|52,白城|51,延边朝鲜族自治州|54,哈尔滨|48,齐齐哈尔|41,鸡西|46,鹤岗|43,双鸭山|45,大庆|50,伊春|40,佳木斯|42,七台河|47,牡丹江|49,黑河|39,绥化|44,大兴安岭地区|38,上海|289,南京|315,无锡|317,徐州|316,常州|348,苏州|224,南通|161,连云港|347,淮安|162,盐城|223,扬州|346,镇江|160,泰州|276,宿迁|277,杭州|179,宁波|180,温州|178,嘉兴|334,湖州|294,绍兴|293,金华|333,衢州|243,舟山|245,台州|244,丽水|292,合肥|127,芜湖|129,蚌埠|126,淮南|250,马鞍山|358,淮北|253,铜陵|337,安庆|130,黄山|252,滁州|189,阜阳|128,宿州|370,巢湖|251,六安|298,亳州|188,池州|299,宣城|190,福州|300,厦门|194,莆田|195,三明|254,泉州|134,漳州|255,南平|133,龙岩|193,宁德|192,南昌|163,景德镇|225,萍乡|350,九江|349,新余|164,鹰潭|279,赣州|365,吉安|318,宜春|278,抚州|226,上饶|364,济南|288,青岛|236,淄博|354,枣庄|172,东营|174,烟台|326,潍坊|287,济宁|286,泰安|325,威海|175,日照|173,莱芜|124,临沂|234,德州|372,聊城|366,滨州|235,菏泽|353,郑州|268,开封|210,洛阳|153,平顶山|213,安阳|267,鹤壁|215,新乡|152,焦作|211,濮阳|209,许昌|155,漯河|344,三门峡|212,南阳|309,商丘|154,信阳|214,周口|308,驻马店|269,武汉|218,黄石|311,十堰|216,宜昌|270,襄樊|156,鄂州|122,荆门|217,孝感|310,荆州|157,黄冈|271,咸宁|362,随州|371,恩施土家族苗族自治州|373,仙桃|1713,潜江|1293,天门|2654,神农架林区|2734,长沙|158,株洲|222,湘潭|313,衡阳|159,邵阳|273,岳阳|220,常德|219,张家界|312,益阳|272,郴州|275,永州|314,怀化|363,娄底|221,湘西土家族苗族自治州|274,广州|257,韶关|137,深圳|340,珠海|140,汕头|303,佛山|138,江门|302,湛江|198,茂名|139,肇庆|338,惠州|301,梅州|141,汕尾|339,河源|200,阳江|199,清远|197,东莞|119,中山|187,潮州|201,揭阳|259,云浮|258,南宁|261,柳州|305,桂林|142,梧州|304,北海|295,防城港|204,钦州|145,贵港|341,玉林|361,百色|203,贺州|260,河池|143,来宾|202,崇左|144,海口|125,三亚|121,五指山|1644,琼海|2358,儋州|1215,文昌|2758,万宁|1216,东方|2634,定安|1214,屯昌|1641,澄迈|2757,临高|2033,白沙黎族自治|2359,昌江黎族自治|1642,乐东黎族自治|2032,陵水黎族自治|1643,保亭黎族苗族自治|1217,琼中黎族苗族自治|2031,重庆|132,成都|75,自贡|78,攀枝花|81,泸州|331,德阳|74,绵阳|240,广元|329,遂宁|330,内江|248,乐山|79,南充|291,眉山|77,宜宾|186,广安|241,达州|369,雅安|76,巴中|239,资阳|242,阿坝藏族羌族自治州|185,甘孜藏族自治州|73,凉山彝族自治州|80,贵阳|146,六盘水|147,遵义|262,安顺|263,铜仁地区|205,黔西南布依族苗族自治州|343,毕节地区|206,黔东南苗族侗族自治州|342,黔南布依族苗族自治州|306,昆明|104,曲靖|249,玉溪|106,保山|112,昭通|336,丽江|114,临沧|110,楚雄彝族自治州|105,红河哈尼族彝族自治州|107,文山壮族苗族自治州|177,普洱|108,西双版纳傣族自治州|109,大理白族自治州|111,德宏傣族景颇族自治州|116,怒江傈僳族自治州|113,迪庆藏族自治州|115,拉萨|100,昌都地区|99,山南地区|97,日喀则地区|102,那曲地区|101,阿里地区|103,林芝地区|98,西安|233,铜川|232,宝鸡|171,咸阳|323,渭南|170,延安|284,汉中|352,榆林|231,安康|324,商洛|285,兰州|36,嘉峪关|33,金昌|34,白银|35,天水|196,武威|118,张掖|117,平凉|359,酒泉|37,庆阳|135,定西|136,陇南|256,临夏回族自治州|182,甘南藏族自治州|247,西宁|66,海东地区|69,海北藏族自治州|67,黄南藏族自治州|70,海南藏族自治州|68,果洛藏族自治州|72,玉树藏族自治州|71,海西蒙古族藏族自治州|65,银川|360,石嘴山|335,吴忠|322,固原|246,中卫|181,乌鲁木齐|92,克拉玛依|95,吐鲁番地区|89,哈密地区|91,昌吉回族自治州|93,博尔塔拉蒙古自治州|88,巴音郭楞蒙古自治州|86,阿克苏地区|85,克孜勒苏柯尔克孜自治州|84,喀什地区|83,和田地区|82,伊犁哈萨克自治州|90,塔城地区|94,阿勒泰地区|96,石河子|770,阿拉尔|731,图木舒克|792,五家渠|789,香港特別行政区|2912,澳门特別行政区|2911".split(",");var AID=[];(function(){for(var c=0;c<areaUID.length;c++){var b=areaUID[c].split("|");AID[b[0]]=b[1]}})();if(AID["中国"]!=null){AID["全国"]=AID["中国"]}var Fe=Fe||{version:"20080809",emptyFn:function(){}};Fe.Ajax=function(b){this.url="";this.data="";this.async=true;this.duration=-1;this.overtime=false;this.username="";this.password="";this.method="GET";if(typeof b=="object"&&b){for(var a in b){this[a]=b[a]}}};(function(){Fe.Ajax.prototype.request=function(d,j){var h=this,f=b(),k=f.xhr;f.active=true;h.url=d;if(typeof j=="string"&&j){h.data=j}if(typeof h.onexecute=="function"){h.onexecute(k)}try{if(!h.username){k.open(h.method,h.url,h.async)}else{k.open(h.method,h.url,h.async,h.username,h.password)}if(h.async){k.onreadystatechange=g}if(h.method.toUpperCase()=="POST"){k.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}h.beginTime=new Date().getTime();if(h.duration>0){i()}k.send(h.data)}catch(e){if(typeof h.onerror=="function"){h.onerror(e)}}if(!h.async){g()}function g(){if(k.readyState==4){try{k.status}catch(l){if(typeof h.ondisconnect=="function"){h.ondisconnect(k)}f.active=false;return}h.duration=-1;if(!h.overtime){if(typeof h["on"+k.status]=="function"){h["on"+k.status](k)}if(k.status==200&&k.statusText.toLowerCase()=="ok"){if(typeof h.onsuccess=="function"){h.onsuccess(k)}}else{if(typeof h.onfailure=="function"){h.onfailure(k)}}}f.active=false;k.onreadystatechange=function(){}}}function i(){if(h.duration==-1){return}if(new Date().getTime()-h.beginTime>h.duration){h.duration=-1;try{k.abort()}catch(l){}h.overtime=true;f.active=false;if(typeof h.ontimeout=="function"){h.ontimeout(k)}}setTimeout(function(){i()},10)}};var c=[];function b(){var f=c;for(var e=null,d=0;d<f.length;d++){e=f[d];if(!e.active){break}}if(d>=f.length){e={active:false,xhr:a()};f[f.length]=e}return e}function a(){if(window.XMLHttpRequest){return new XMLHttpRequest()}else{if(window.ActiveXObject){var f=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"];for(var e=0;f[e];e++){try{return new ActiveXObject(f[e])}catch(d){}}throw new Error("Your browser do not support XMLHttp")}}}})();Fe.Ajax.get=function(a,b){return this.request(a,b)};Fe.Ajax.request=function(b,c,a){if(typeof c=="object"&&c){a=c;c=null}else{if(typeof c=="function"){a=a||{};a.onsuccess=c;c=null}}var d=new Fe.Ajax(a);d.request(b,c);return d};(function(){Fe._log=[];var a=0;var b={};Fe.BaseClass=function(c){b[(this.hashCode=(c||Fe.BaseClass.guid()))]=this};Fe.BaseClass.guid=function(){return"mz_"+(a++).toString(36)};Fe.BaseClass.create=function(){var d=new Fe.BaseClass();d.decontrol();return d};window.Instance=Fe.instance=Fe.I=function(c){return b[c]};Fe.BaseClass.prototype.dispose=function(){if(this.hashCode){delete b[this.hashCode]}for(var c in this){if(typeof this[c]!="function"){delete this[c]}}};Fe.BaseClass.prototype.getHashCode=function(){if(!this.hashCode){b[(this.hashCode=Fe.BaseClass.guid())]=this}return this.hashCode};Fe.BaseClass.prototype.decontrol=function(){delete b[this.hashCode]};Fe.BaseClass.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};Fe.BaseClass.prototype._wlog=function(d,e){var c=Fe._log;if(c.length>100){c.reverse().length=50;c.reverse()}c[c.length]="["+d+"]["+(this._className||"Object")+" "+this.hashCode+"] "+e}})();Function.prototype.inherits=function(c,b){var a,d,f=this.prototype,e=function(){};e.prototype=c.prototype;d=this.prototype=new e();if(typeof(b)=="string"){d._className=b}for(a in f){d[a]=f[a]}this.prototype.constructor=f.constructor;f=e=null;return d};Fe.Browser=(function(){var c=navigator.userAgent;var g=0,a=0,f=0,e=0;var d=0,h=0,b=0;if(typeof(window.opera)=="object"&&/Opera(\s|\/)(\d+(\.\d+)?)/.test(c)){a=parseFloat(RegExp.$2)}else{if(/MSIE (\d+(\.\d+)?)/.test(c)){g=parseFloat(RegExp.$1)}else{if(/Firefox(\s|\/)(\d+(\.\d+)?)/.test(c)){e=parseFloat(RegExp.$2)}else{if(navigator.vendor=="Netscape"&&/Netscape(\s|\/)(\d+(\.\d+)?)/.test(c)){b=parseFloat(RegExp.$2)}else{if(c.indexOf("Safari")>-1&&/Version\/(\d+(\.\d+)?)/.test(c)){f=parseFloat(RegExp.$1)}}}}}if(c.indexOf("Gecko")>-1&&c.indexOf("KHTML")==-1&&/rv\:(\d+(\.\d+)?)/.test(c)){h=parseFloat(RegExp.$1)}return{ie:g,firefox:e,gecko:h,netscape:b,opera:a,safari:f}})();window.FeBrowser=Fe.Browser;Fe.copy=function(b){var a=Fe.copy._node;if(!a){a=Fe.copy._node=document.createElement("DIV");a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a)}a.innerHTML=["<embed ",'src="http://map.baidu.com/iknow/img/clipboard.swf" ','FlashVars="clipboard=',encodeURIComponent(String(b)),'" ','width="0" ','height="0" ','type="application/x-shockwave-flash"></embed>'].join("")};Fe.G=function(){for(var b=[],c=arguments.length-1;c>-1;c--){var d=arguments[c];b[c]=null;if(typeof d=="object"&&d&&d.dom){b[c]=d.dom}else{if((typeof d=="object"&&d&&d.tagName)||d==window||d==document){b[c]=d}else{if(typeof d=="string"&&(d=document.getElementById(d))){b[c]=d}}}}return b.length<2?b[0]:b};if(typeof(HTMLElement)!="undefined"&&!window.opera&&window.FeBrowser.ie<9&&HTMLElement.prototype.__defineGetter__){HTMLElement.prototype.__defineGetter__("children",function(){for(var c=[],d=0,f,e=0,b=this.childNodes.length;e<b;e++){f=this.childNodes[e];if(f.nodeType==1){c[d++]=f;if(f.name){if(!c[f.name]){c[f.name]=[]}c[f.name][c[f.name].length]=f}if(f.id){c[f.id]=f}}}return c})}Fe.ac=function(a,b){if(!(a=this.G(a))){return}b=this.trim(b);if(!new RegExp("(^| )"+b.replace(/(\W)/g,"\\$1")+"( |$)").test(a.className)){a.className=a.className.split(/\s+/).concat(b).join(" ")}};Fe.addClassName=Fe.ac;Fe.extend=function(f,d){if(f&&d&&typeof(d)=="object"){for(var e in d){f[e]=d[e]}var c=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];for(var a=0,b;a<c.length;a++){b=c[a];if(Object.prototype.hasOwnProperty.call(d,b)){f[b]=d[b]}}}return f};Fe.on=function(c,b,a){if(!(c=Fe.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c[b+a]=function(){a.call(c,window.event)};c.attachEvent("on"+b,c[b+a])}else{c.addEventListener(b,a,false)}return c};Fe.un=function(c,b,a){if(!(c=Fe.G(c))){return c}b=b.replace(/^on/,"").toLowerCase();if(c.attachEvent){c.detachEvent("on"+b,c[b+a]);c[b+a]=null}else{c.removeEventListener(b,a,false)}return c};Fe.rc=function(a,b){if(!(a=this.G(a))){return}b=this.trim(b);var d=a.className.replace(new RegExp("(^| +)"+b.replace(/(\W)/g,"\\$1")+"( +|$)","g"),"$2");if(a.className!=d){a.className=d}};Fe.removeClassName=Fe.rc;Fe.trim=function(a){return a.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"")};Fe.copy=function(b){var a=Fe.copy._node;if(!a){a=Fe.copy._node=document.createElement("DIV");a.style.position="absolute";a.style.top="-1000px";a.style.left="-1000px";document.body.appendChild(a)}a.innerHTML=["<embed ",'src="http://map.baidu.com/iknow/img/clipboard.swf" ','FlashVars="clipboard=',encodeURIComponent(String(b)),'" ','width="0" ','height="0" ','type="application/x-shockwave-flash"></embed>'].join("")};Fe.Array={};Fe.Array.indexOf=function(d,a,b){var c=d.length,e=Number(b)||0;e=(e<0)?Math.ceil(e):Math.floor(e);if(e<0){e+=c}for(;e<c;e++){if(e in d&&d[e]===a){return e}}return -1};Fe.Array.contains=function(a,b){return Fe.Array.indexOf(a,b)>=0};Fe.Array.unique=function(b){var c=[];for(var a=0;a<b.length;a++){if(!Fe.Array.contains(c,b[a])){c.push(b[a])}}return c};Fe.Cookie=function(b){var a="";b=b||{};if(/https?:\/\/[^\/]+([^\?]+)/i.test(location.href)){a=RegExp.$1}this.path=(b.path||a||"/").replace(/(\/)[^\/]*$/,"$1");this.expires=b.expires||"";this.domain=b.domain||document.domain||"";this.secure=b.secure||""};Fe.Cookie.set=function(c,d,a){if(/;=/g.test(c)){throw new Error('Invalid cookie name "'+c+'"')}if(/;/g.test(d)){throw new Error('Invalid cookie value "'+d+'"')}var b=new Fe.Cookie(a);b.set(c,d);return b};Fe.Cookie.prototype.set=function(b,c){var a=new Date();if(typeof(this.expires)=="number"){a.setTime(a.getTime()+this.expires)}document.cookie=b+"="+escape(c)+";expires="+a.toGMTString()+";path="+this.path+(this.domain==""?"":("; domain="+this.domain))+(this.secure?"; secure":"")};Fe.Cookie.add=function(a,b,c){return Fe.Cookie.set(a,b,c)};Fe.Cookie.remove=function(a){return Fe.Cookie.set(a,"",{expires:-1*57005*57005})};Fe.Cookie.get=function(b){var c=new RegExp("(^| )"+b+"=([^;]*)(;|$)");var a=document.cookie.match(c);if(a){return unescape(a[2])}return null};var _EXT_CHARS_=["=",".","-","*"];if(typeof GEO_TYPE_AREA=="undefined"){var GEO_TYPE_AREA=0}if(typeof GEO_TYPE_LINE=="undefined"){var GEO_TYPE_LINE=1}if(typeof GEO_TYPE_POINT=="undefined"){var GEO_TYPE_POINT=2}var _MAX_DELTA_=1<<23;function decode_geo_diff(k){var h=_decode_type(k.charAt(0));var b=k.substr(1);var n=0;var a=b.length;var o=[];var f=[];var g=[];while(n<a){if(b.charAt(n)==_EXT_CHARS_[0]){if((a-n)<13){return 0}g=_decode_6byte_(b.substr(n,13),o);if(g<0){return 0}n+=13}else{if(b.charAt(n)==";"){f.push(o.slice(0));o.length=0;++n}else{if((a-n)<8){return 0}g=_decode_4byte_(b.substr(n,8),o);if(g<0){return 0}n+=8}}}for(var e=0,c=f.length;e<c;e++){for(var d=0,m=f[e].length;d<m;d++){f[e][d]/=100}}return{geoType:h,geo:f}}function _decode_type(b){var a=-1;if(b==_EXT_CHARS_[1]){a=GEO_TYPE_POINT}else{if(b==_EXT_CHARS_[2]){a=GEO_TYPE_LINE}else{if(b==_EXT_CHARS_[3]){a=GEO_TYPE_AREA}}}return a}function _decode_6byte_(d,b){var a=0;var f=0;var e=0;for(var c=0;c<6;c++){e=_char2num_(d.substr(1+c,1));if(e<0){return -1-c}a+=e<<(6*c);e=_char2num_(d.substr(7+c,1));if(e<0){return -7-c}f+=e<<(6*c)}b.push(a);b.push(f);return 0}function _decode_4byte_(e,c){var b=c.length;if(b<2){return -1}var a=0;var g=0;var f=0;for(var d=0;d<4;d++){f=_char2num_(e.substr(d,1));if(f<0){return -1-d}a+=f<<(6*d);f=_char2num_(e.substr(4+d,1));if(f<0){return -5-d}g+=f<<(6*d)}if(a>_MAX_DELTA_){a=_MAX_DELTA_-a}if(g>_MAX_DELTA_){g=_MAX_DELTA_-g}c.push(c[b-2]+a);c.push(c[b-1]+g);return 0}function _char2num_(b){var a=b.charCodeAt(0);if(b>="A"&&b<="Z"){return a-"A".charCodeAt(0)}else{if(b>="a"&&b<="z"){return(26+a-"a".charCodeAt(0))}else{if(b>="0"&&b<="9"){return(52+a-"0".charCodeAt(0))}else{if(b=="+"){return 62}else{if(b=="/"){return 63}}}}}return -1}if(typeof console=="undefined"){window.console={};window.console.log=function(){}}
var modelConfig={MODEL_URL:"html/map/component/",DATA_URL:"http://map.baidu.com/?newmap=1&qt=",
MAIN_BOX:"MapInfo",tpl:{},cityName:"全国",cityCode:AID["全国"],cityType:0,dataEditTime:"",upCityid:AID["全国"],supBus:0,defalutCityCode:null,enableMapMove:true,level:{country:4,province:11,city:12,area:13}};var temp={};var mainAjax=new Fe.Ajax();var subAjax=new Fe.Ajax();var ModelMgr={models:{},nowModel:null,run:function(){if(this.nowModel!=null){return}for(var a in this.models){var b=this.models[a];this.nowModel=b.url;new Model(b.url,b.opts);return}},del:function(a){delete this.models[a];this.nowModel=null;this.run()},register:function(a,b){modelConfig.tpl[a]=b},showLoad:function(a){showLoading()},hideLoad:function(){hideLoading()},mainModel:null};function go(a,b){if((b&&b.dom&&b.dom!=Fe.G(modelConfig.MAIN_BOX))||typeof(b)=="function"){var c=ModelMgr.models;if(!ModelMgr.models[a]){ModelMgr.models[a]={url:a,opts:b};ModelMgr.run()}return}if((!b||!b.dom||b.dom==Fe.G(modelConfig.MAIN_BOX))&&typeof(b)!="function"){searchInViewCtrl.exit()}new Model(a,b)}function Model(b,c){Fe.BaseClass.call(this);this.url=b;this.opts=c||{};this.opts.json=null;this.opts.tpl=null;this.queryString=null;this.modelType=null;this.dataUrl=null;this.tplUrl=null;this.modelObject=null;this.mainDiv=false;this.cityInfo={};this.startCity={name:modelConfig.cityName,code:modelConfig.cityCode};if(Fe.G("curCity")){this.cityInfo.cityName=Fe.G("curCity").innerHTML;this.cityInfo.cityCode=modelConfig.cityCode}if(typeof(this.opts)=="function"){this.ajax=subAjax}else{if(this.opts.dom==null||this.opts.dom==Fe.G(modelConfig.MAIN_BOX)){this.ajax=mainAjax;this.mainDiv=true;this.opts.dom=Fe.G(modelConfig.MAIN_BOX)}else{this.ajax=subAjax;this.opts.dom=Fe.G(this.opts.dom)}}if(b.indexOf("tpl:")>-1){b=b.slice(4);this.queryString="";if(b.indexOf("?")>-1){var a=b.split("?");b=a[0];this.queryString=a[1]}this.modelType="active";this.tplUrl=b;this.loadTpl(b)}else{this.modelType="passive";this.loadData(b)}}Model.inherits(Fe.BaseClass,"Model");Fe.extend(Model.prototype,{loadData:function(url){var me=this;this.ajax.success=function(json){try{me.opts.json=json;ModelMgr.hideLoad();if(me.mainDiv&&me.opts.json.current_city){var json=me.opts.json;var city=me.opts.json.current_city;setCurCity(city.name,city.code,city.type);if(city.sup_bus!=null){modelConfig.supBus=city.sup_bus}if(city.up_cityid){modelConfig.upCityid=city.up_cityid}else{modelConfig.upCityid=city.code}}}catch(ex){ModelMgr.showLoad("JSON数据错误");return}if(typeof(me.opts)=="function"){me.opts(me.opts.json);ModelMgr.del(me.url)}else{if(modelConfig.tpl[me.tplUrl]){me.instance(me.tplUrl)}else{if(me.opts.json.result&&me.opts.json.result&&me.opts.json.result.type&&modelCode[me.opts.json.result.type]){me.loadTpl(modelCode[me.opts.json.result.type])}}}var json=me.opts.json;if(json.result.type){if(json.result.type==14||json.result.type==20||(json.result.type==10&&ModelMgr.mainModel._className=="PoiSearch")){pageComm.doFun("insertTxtStatu",false)}else{pageComm.doFun("insertTxtStatu",true)}}if(json.hot_city&&_OLR){_OLR.hot_city=json.hot_city}if(!json.result){return}if(me.mainDiv){if(json.result.type==11){if(json.result.type!=21&&!json.center||json.result.type==23){document.fmwd.word.value=json.result.wd;switchTab(1)}}else{if(json.result.type==19||json.result.type==20||json.result.type==29){var strSta="",strEnd="";if(json.result.type==20){strSta=json.result.start.wd?json.result.start.wd:"";strEnd=json.result.end[json.result.end.length-1].wd?json.result.end[json.result.end.length-1].wd:""}else{if(json.result.type==19){strSta=json.result.s_wd?json.result.s_wd:"";strEnd=json.result.e_wd?json.result.e_wd:""}}document.fmnav.word_from.value=strSta;document.fmnav.word_to.value=strEnd;switchTab(3)}else{if(json.result.type==13||json.result.type==14||json.result.type==24){if(json.result.type==13){document.fmbus.word_from.value=json.result.s_wd==null?"":json.result.s_wd;document.fmbus.word_to.value=json.result.e_wd==null?"":json.result.e_wd}else{if(json.result.type==24){}else{document.fmbus.word_from.value=json.result.start.wd==null?"":json.result.start.wd;document.fmbus.word_to.value=json.result.end.wd==null?"":json.result.end.wd}}switchTab(2)}}}}};this.ajax.onfailure=function(xhr){ModelMgr.showLoad("数据请求失败");return};if(this.mainDiv){ModelMgr.showLoad("数据加载中..")}var format="";if(document.location.href.indexOf("format=1")>-1){format="&format=1"}var bound=map.getBounds();var zoomLevel="&l="+map.zoomLevel;if(url.indexOf("&l=")>-1){zoomLevel=""}url=url.replace(/%3C/gi,encodeURIComponent(" ")).replace(/%3E/gi,encodeURIComponent(" "));baidu.sio.callByServer(modelConfig.DATA_URL+url+format+"&ie=utf-8"+zoomLevel+"&b=("+bound.minX+","+bound.minY+";"+bound.maxX+","+bound.maxY+")&t="+new Date().getTime(),this.ajax.success)},loadTpl:function(a){var b=this;if(!modelConfig.tpl[a]){this.ajax.onsuccess=function(d){var h=d.responseText;var c=/<script[^>]*>([\s\S]*)<\/script>/igm;var g=c.exec(h);if(g&&g[1]){try{b.exec(g[1],a);ModelMgr.hideLoad()}catch(f){ModelMgr.showLoad("组件语法错误");return}}modelConfig.tpl[a]=h.replace(c,"");b.loadTpl(a)};this.ajax.onfailure=function(c){ModelMgr.showLoad("组件请求失败")};ModelMgr.showLoad("组件加载中..");this.ajax.request("http://"+location.host+"/"+modelConfig.MODEL_URL+a+".html?t="+new Date().getTime());return}if(this.ajax==mainAjax&&Fe.G("MapInfo")){if(a.indexOf("BusTrans")>-1){Fe.G("MapInfo").style.overflowY="hidden"}else{Fe.G("MapInfo").style.overflowY="auto"}}this.instance(a)},exec:function(js,modelCode){if(window.execScript){window.execScript(js)}else{window.eval(js)}if(!window[modelCode]){var script=document.createElement("SCRIPT");script.type="text/javascript";document.body.appendChild(script);script.appendChild(document.createTextNode(js))}},instance:function(e){var g=this.opts;if(!this.modelObject){this.modelObject=new window[e]();this.modelObject.container=g.dom;if(g.cinfo){this.modelObject.cinfo=g.cinfo}}var c=this.modelObject;c.modelQuery=this.url;c.isMain=false;if(this.mainDiv){Share.listIndex=null;Share.popIndex=null;c.isMain=true}if(c.cinfo==null){c.cinfo={}}if(c.cinfo.city==null||c.cinfo.city.name==null){var b=this.startCity;c.cinfo.startCity={name:b.name,code:b.code}}c.cityInfo=this.cityInfo;if(this.modelType=="active"&&this.dataUrl==null&&c.loadData){this.dataUrl=c.loadData(this.queryString);if(this.dataUrl!=null&&this.dataUrl!="undefined"){this.loadData(this.dataUrl);return}}if(!this.mainDiv){ModelMgr.del(this.url)}if(this.mainDiv){if(ModelMgr.mainModel){if(typeof(ModelMgr.mainModel.unload)=="function"){ModelMgr.mainModel.unload()}if(typeof(g.onunload)=="function"){g.onunload()}}ModelMgr.mainModel=this.modelObject}if(typeof(g.begin)=="function"){g.begin()}if(this.mainDiv&&map){if(closeOtherOps){closeOtherOps()}map.clearOverlays()}if(setSearchResult){setSearchResult("")}var d=c.render(modelConfig.tpl[e].replace(/#hashCode#/gi,c.hashCode),g.json);if(!d||d.indexOf("{")==0){return}g.dom.innerHTML=d;if(this.mainDiv&&c.json&&c.json.result&&(c.json.result.type==11||c.json.result.type==1||c.json.result.type==2)){modelConfig.enableMapMove=false;if(window.mapMoveTimer){clearTimeout(window.mapMoveTimer)}window.mapMoveTimer=setTimeout(function(){modelConfig.enableMapMove=true},4000)}else{if(this.mainDiv){if(window.mapMoveTimer){clearTimeout(window.mapMoveTimer)}modelConfig.enableMapMove=true}}c.initialize();if(c.json==null){c.json=g.json}if(typeof(g.onload)=="function"){g.onload()}if(typeof(c.load)=="function"){c.load()}if(this.mainDiv){var f=document.fmHistory;var a=escape(this.url);History.nowTpl=a;f.url.value=a;if(g.history!=true){if(Fe.Browser.ie>0){Fe.G("wHistory").src="history.html?url="+escape(a)}else{f.submit()}History.tplOpts[a]=this.opts}searchInViewCtrl.exit();if(map.fullScreenMode){fullScCtrl.returnFullSrc(true)}if(window.temp.cityPop){window.temp.cityPop.close()}}}});var History={nowTpl:null,tplOpts:{}};var Share={mapInfo:{},getLink:function(){this.getMap();this.getBubble();this.getList();this.getPopList();this.getComponent();var b=[];for(var a in this.mapInfo){if(this.mapInfo[a]!=null){b.push(a+"="+this.mapInfo[a])}}return"http://"+location.host+location.pathname+"?"+b.join("&")+"&t="+new Date().getTime()},getMap:function(){this.mapInfo.l=map.zoomLevel;this.mapInfo.t=map.mapType;var a=map.centerPoint;this.mapInfo.c=a.lng+","+a.lat},getComponent:function(){if(ModelMgr.mainModel){this.mapInfo.s=escape(ModelMgr.mainModel.modelQuery)}},getList:function(){if(this.listIndex!=null){this.mapInfo.i=this.listIndex}else{this.mapInfo.i=null}},getPopList:function(){if(this.popIndex!=null){this.mapInfo.pi=this.popIndex}else{this.mapInfo.pi=null}},listIndex:null,getBubble:function(){if(map.temp.infoWin&&map.temp.infoWin.isOpen()){var b=map.temp.infoWin.overlay;var a=b.getPoint();this.mapInfo.b=a.lng+","+a.lat}}};var MapRevert={revert:function(){var a=location.href;var b=getParam(a);if(b==null||!b.s){return false}this.setModel(b);return true},setModel:function(e){var h=this;var a={cinfo:{cityInit:1},onload:function(){var m=e.t;if(e.l!=null&&typeof(parseInt(e.l))=="number"||e.c!=null){var o=e.c.split(",");if(o.length==2){var l=parseFloat(o[0]);var n=parseFloat(o[1]);var k=new BMap.Point(parseFloat(o[0]),parseFloat(o[1]));map.centerAndZoom(k,parseInt(e.l))}}}};if(e.l!=null&&typeof(parseInt(e.l))=="number"){a.cinfo._maplevel=parseInt(e.l)}if(e.c!=null){var d=e.c.split(",");if(d.length==2){var i=parseFloat(d[0]);var g=parseFloat(d[1]);var j=new BMap.Point(d[0],d[1]);a.cinfo._centerPoint=j}}var f=e.i;if(f!=null){a.cinfo._index=f;a.cinfo.index=f}var b=e.pi;if(b!=null){a.cinfo._popIndex=parseInt(b)}var c=e.b;if(c!=null){var d=c.split(",");if(d.length==2){var i=parseFloat(d[0]);var g=parseFloat(d[1]);var j=new BMap.Point(d[0],d[1]);a.cinfo._popPoint=j}}go(unescape(e.s),a)}};var modelCode={"37":"Clarify","38":"PoiSearch","36":"PoiSearch","11":"PoiSearch","12":"Pcity","18":"BusLines","5":"BusStops","6":"Detail","13":"BusAddr","14":"BusTrans","22":"BusTrans","7":"Clarify","19":"NavAddr","20":"NavTrans","21":"SearchInView","23":"SelAddr","24":"BusAddr","29":"NavAddr","99":"DataError","3":"NavQuery","15":"LinesQuery","26":"SpecialPoi","28":"District","1":"City","2":"City"};function beforeEndHTML(b,a){b.insertAdjacentHTML("beforeEnd",a);return b.lastChild}function getParam(c,a){var h={};if(!a){var b=c.indexOf("?");if(b==-1){return}var f=c.slice(c.indexOf("?")+1);if(f==""){return}var g=f.split("&");for(var d=0;d<g.length;d++){var e=g[d].split("=");h[e[0]]=e[1]}}else{var g=c.split("&");for(var d=0;d<g.length;d++){var e=g[d].split("=");h[e[0]]=e[1]}}return h}function getPosition(a){var b={left:0,top:0};while(a&&a.offsetParent){b.left+=a.offsetLeft;b.top+=a.offsetTop;a=a.offsetParent}return b}function getXY(a){return getPosition(a)}function getPix(b){var d={x:0,y:0};var c=b.srcElement||b.target;var a=b.offsetX||b.layerX||0;var e=b.offsetY||b.layerY||0;while(c&&c!=map.container){if(!(c.clientWidth==0&&c.clientHeight==0&&c.offsetParent&&c.offsetParent.nodeName=="TD")&&c.namespaceURI!="http://www.w3.org/2000/svg"){a+=c.offsetLeft||0;e+=c.offsetTop||0}else{if(c.namespaceURI=="http://www.w3.org/2000/svg"){if(navigator.userAgent.indexOf("Safari")>-1&&c.tagName!="svg"){c=map.palette}if(map.palette){a+=parseFloat(map.palette.style.left)+map.offsetX;e+=parseFloat(map.palette.style.top)+map.offsetY}}}c=c.offsetParent}d.x=a;d.y=e;return d}function getClientSize(){if(window.innerHeight){return{width:window.innerWidth,height:window.innerHeight}}else{if(document.documentElement&&document.documentElement.clientHeight){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}else{return{width:document.body.clientWidth,height:document.body.clientHeight}}}}function geoToPoint(e){var c=e.split("|");if(c[0]==1){var d=c[1].split(",");var b=new BMap.Point(parseFloat(d[0]),parseFloat(d[1]));return b}else{return}}function parseGeo(f){if(typeof(f)!="string"){return}var b=f.split("|");var l=parseInt(b[0]);var c=b[1];var p=b[2];var e=p.split(";");var h=[];switch(l){case 1:h.push(e[0]);break;case 2:case 3:for(var g=0;g<e.length-1;g++){var o=e[g];var k=[];var a=o.split(",");for(var d=0;d<a.length;d+=2){var n=a[d];var m=a[d+1];k.push(n+","+m)}h.push(k.join(";"))}break}if(h.length<=1){h=h.toString()}return{type:l,bound:c,points:h}}function getPointByStr(a){if(typeof a!="string"){return}var b=a.split(",");if(b.length<2){return}return new BMap.Point(b[0],b[1])}function searchWord(c,a){if(typeof(c)=="object"){var b=encodeURIComponent(c.innerHTML)}else{var b=encodeURIComponent(c)}if(!a){a=modelConfig.cityCode}if(a){go("s&addr=0&wd="+b+"&c="+a)}else{go("s&addr=0&wd="+b)}}function cnameSearch(a,b,e){var d=encodeURIComponent(a);if(!e){e=0}var f=b||modelConfig.cityCode;go("con&wd="+d+"&pn=0&c="+f+"&src="+e)}function stopBubble(a){var a=window.event||a;a.stopPropagation?a.stopPropagation():a.cancelBubble=true}function preventDefault(a){var a=window.event||a;a.preventDefault?a.preventDefault():a.returnValue=false;return false}function trim(a){return a.replace(/(^\s*)|(\s*$)/g,"")}function setCurCity(a,c,b){if(!Fe.G("curCity")){return}if(a==""||a==null||c==""||c==null){return}Fe.G("supBus").innerHTML="";if(a=="中国"){a="全国"}if(Fe.G("curCityText")){if(a=="全国"){Fe.G("curCityText").innerHTML="选择城市";modelConfig.cityType=0}else{Fe.G("curCityText").innerHTML="更换城市"}}Fe.G("curCity").innerHTML=a;modelConfig.cityCode=c;modelConfig.cityName=a;if(b!=null&&b!=""){modelConfig.cityType=b}}function getXhr(){if(window.XMLHttpRequest){var c=new XMLHttpRequest();Fe.on(window,"onunload",function(){c.abort()});return c}else{if(window.ActiveXObject){var d=["MSXML2.XMLHttp.6.0","MSXML2.XMLHttp.3.0","MSXML2.XMLHttp.5.0","MSXML2.XMLHttp.4.0","Msxml2.XMLHTTP","MSXML.XMLHttp","Microsoft.XMLHTTP"];for(var b=0;d[b];b++){try{var c=new ActiveXObject(d[b]);Fe.on(window,"onunload",function(){c.abort()});return c}catch(a){}}throw new Error("Your browser do not support XMLHttp")}}}function historyUrl(a,c){var b=document.fmHistory;var a=escape(a);History.nowTpl=a;b.url.value=a;b.submit();History.tplOpts[a]=this.opts}function scriptRequest(url,echo,id,charset){var isIe=/msie/i.test(window.navigator.userAgent);if(isIe&&Fe.G("_script_"+id)){var script=Fe.G("_script_"+id)}else{if(Fe.G("_script_"+id)){Fe.G("_script_"+id).parentNode.removeChild(Fe.G("_script_"+id))}var script=document.createElement("script");if(charset!=null){script.charset=charset}if(id!=null&&id!=""){script.setAttribute("id","_script_"+id)}script.setAttribute("type","text/javascript");document.body.appendChild(script)}var t=new Date();if(url.indexOf("?")>-1){url+="&t="+t.getTime()}else{url+="?t="+t.getTime()}var _complete=function(){if(!script.readyState||script.readyState=="loaded"||script.readyState=="complete"){if(typeof(echo)=="function"){echo()}else{eval(echo)}}};if(isIe){script.onreadystatechange=_complete}else{script.onload=_complete}script.setAttribute("src",url)}function getBPoints(e){if(!e||e.length==0){return}var d=[];for(var c=0;c<e.length;c++){if(e[c]){var f=e[c].split(";");for(var b=0;b<f.length;b++){var a=getPointByStr(f[b]);d.push(a)}}}return d}function parse2Geo(g,o){o=!o?0:o;o=o<0.5?0:o<1?1:o;o=o>=32?32:o;var l=g.split("|");if(l.length==1){var k=decode_geo_diff(l[0]);return{type:k.type,bound:"",points:k.geo.join(",")}}else{if(l.length>1){var b=g.split(";.=");var m=[];var p=[];var h=0;var q=b.length;for(var f=0;f<q;f++){var d=b[f];if(q>1){if(f==0){d=d+";"}if(f>0&&f<q-1){d=".="+d+";"}if(f==q-1){d=".="+d}}var c=d.split("|");var j=decode_geo_diff(c[0]);var e=decode_geo_diff(c[1]);m.push(j.geo.join(","));m.push(e.geo.join(","));var k=decode_geo_diff(c[2]);h=k.type;var a=k.geo.join(",");a=a.replace(/([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*)(,)/g,"$1,$2;");if(o>0){var n=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+o+"}","ig");a=a.replace(n,"$1")}p.push(a)}if(q<=1){p=p.join(";")}return{type:h,bound:m.join(";"),points:p}}}}function cutPoints(c,b){b=!b?0:b;b=b<0.5?0:b<1?1:b;b=b>=32?32:b;if(!c||typeof c!="string"){return}var d=new RegExp("(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);)(((-?\\d+)(\\.\\d+)?),((-?\\d+)(\\.\\d+)?);){"+b+"}","ig");var a=c.replace(d,"$1");return a}function CreateFlash(c,a,b,d,f){var e='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=7,0,0,0" width="'+b+'" height="'+d+'" id="'+c+'" align="middle">';e+='<param name="allowScriptAccess" value="always">';e+='<param name="quality" value="high">';e+='<param name="movie" value="'+a+'">';e+='<param name="flashvars" value="'+f+'">';e+='<embed src="'+a+'" flashvars="'+f+'" quality="high" width="'+b+'" height="'+d+'" name="'+c+'" align="middle" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer">';e+="</object>";return e}var STAT_INF_NORMAL=1;var STAT_INF_STOP=2;var STAT_BUS_UNFOLD=3;var STAT_BUS_THUMB=4;var STAT_DRV_UNFOLD=5;var STAT_SUGG_COUNT=6;function addStat(a){if(!a){return}if(Fe.G("statImg")){Fe.G("statImg").src="";setTimeout(function(){Fe.G("statImg").src="http://map.baidu.com/iknow/img/transparent.gif?t="+(new Date()).getTime()+"&code="+a},50)}}function strB(a){return a.replace(/\*/g," ").replace(/[^\x00-\xff]/g,"**").length}function isInteger(a){return/^\+?[1-9][0-9]*$/.test(a)}function lastString(b){var a=b.substring(b.length-1);if(a=="站"){return true}return false}function Popup(a){Fe.BaseClass.call(this);this.visible=false;this.config=a;if(!this.config){return}this.config.addDom=this.config.addDom?Fe.G(this.config.addDom):document.body;if(a.clickClose!=null&&a.clickClose==false){this.config.clickClose=false}else{this.config.clickClose=true}this.connectDom=new Array()}Fe.extend(Popup.prototype,{render:function(){var b=this.config;this.main=beforeEndHTML(b.addDom,'<div class="map_popup" style="width:390px;display:none"></div>');var a=this.popBox=beforeEndHTML(this.main,'<div class="popup_main"></div>');if(b.isTitle!=false){this.title=beforeEndHTML(a,'<div class="title">系统信息</div>')}this.content=beforeEndHTML(a,'<div class="content"></div>');this.button=beforeEndHTML(a,"<button></button>");this.shadow=beforeEndHTML(this.main,'<div class="poput_shadow"></div>');this.addConnectDom(this.main);this.initialize()},initialize:function(){var b=this.config;this.setTitle(b.title);this.setContent(b.content);this.setWidth(b.width);this.setHeight(b.height);this.show();var c=this;var a=function(g){var d=g.srcElement||g.target;while(d){var h=c.connectDom;for(var f=0;f<h.length;f++){if(d==h[f]){return}}if(d==document.body){c.close();return}d=d.parentNode}};if(this.config.clickClose){Fe.on(document.body,"mousedown",a)}Fe.on(this.button,"click",function(d){if(c.config.clickClose){Fe.un(document.body,"mousedown",a)}c.main.parentNode.removeChild(c.main);c.visible=false;if(c.config.close&&typeof(c.config.close)=="function"){c.config.close()}if(this.resizeTimer){window.clearInterval(this.resizeTimer);this.resizeTimer=null}if(Fe.G("supBus11")){if(Fe.G("supBus11").style.display=="none"){Fe.G("supBus11").style.display=""}else{Fe.G("supBus11").style.display="none"}}});if(b.open&&typeof(b.open)=="function"){b.open()}},setTitle:function(a){if(a&&this.title){this.title.innerHTML=a;this.config.title=a}},setContent:function(a){if(a){if(typeof(a)=="string"){this.content.innerHTML=a}else{this.content.innerHTML="";this.content.appendChild(a)}this.config.content=a}},setWidth:function(a){if(a){this.main.style.width=(a-8)+"px";this.config.width=a}},setHeight:function(a){if(this.resizeTimer){window.clearInterval(this.resizeTimer);this.resizeTimer=null}if(a){this.main.style.height=this.shadow.style.height=(a-9)+"px";this.config.height=a;if(this.config.isTitle==false){this.content.style.height=(a-2)+"px"}else{this.content.style.height=(a-24-9)+"px"}this.content.style.overflowY="auto"}else{this.content.style.height="auto";this.resize()}},hide:function(){this.main.style.display="none";this.visible=false},show:function(){this.main.style.display="block";this.popBox.scrollTop=0;this.visible=true;if(Fe.G("supBus11")){if(Fe.G("supBus11").style.display=="none"){Fe.G("supBus11").style.display=""}else{Fe.G("supBus11").style.display="none"}}},getDom:function(){return this.main},resize:function(){var a=this;var b=function(){var c=a.content.offsetHeight+24;if(a.mainHeight){if(a.mainHeight!=c){a.mainHeight=c}}a.popBox.style.height=a.shadow.style.height=a.main.style.height=c+"px";a.popBox.scrollTop=0};if(this.resizeTimer){window.clearInterval(this.resizeTimer);this.resizeTimer=null}this.resizeTimer=window.setInterval(b,50)},close:function(){this.button.click()},addConnectDom:function(a){this.connectDom.push(a)}});function MapCenter(){Fe.BaseClass.call(this);this.startPoint=map.centerPoint;this.unit=10000;this.url="/?qt=cen";this.level=0}Fe.extend(MapCenter.prototype,{getBound:function(){var a=map.getBounds();var c=function(b){return parseInt(b/1000)*1000};return c(a.minX)+","+c(a.minY)+";"+c(a.maxX)+","+c(a.maxY)},request:function(){if(modelConfig.enableMapMove==false){return}var d=map.zoomLevel;if(d<=7){setCurCity("全国","1",0);return}var a=map.centerPoint;var c=this.startPoint;var b=Math.sqrt((c.lng-a.lng)*(c.lng-a.lng)+(c.lat-a.lat)*(c.lat-a.lat));if(b>this.unit||this.level!=d){this.level==d;this.startPoint=a;scriptRequest(this.url+"&b="+this.getBound()+"&l="+d,this.curCity,"_MAP_CENTER_","gbk")}},curCity:function(){if(modelConfig.enableMapMove==false){return}try{if(!_mapCenter){return}var a=_mapCenter;var b=a.content;if(!b){return}setCurCity(b.name,b.uid,b.type);if(b.sup_bus!=null){modelConfig.supBus=b.sup_bus}if(a.hot_city&&_OLR){_OLR.hot_city=a.hot_city}}catch(c){}}});function loadBody(){initMapSize();parentFullScr();mapInit();Fe.G("wHistory").src="about:blank";if(!MapRevert.revert()){go("dec&newmap=1");try{document.fmwd.word.focus()}catch(d){}}var b=Fe.G("form1");for(var c=0,a=b.childNodes.length;c<a;c++){if(b.childNodes[c].nodeName.toLowerCase()=="input"){Fe.on(b.childNodes[c],"mousedown",function(){closeMeasure()})}}var f=Fe.G("form2");for(var c=0,a=f.childNodes.length;c<a;c++){if(f.childNodes[c].nodeName.toLowerCase()=="input"){Fe.on(f.childNodes[c],"mousedown",function(){closeMeasure()})}}var e=Fe.G("form3");for(var c=0,a=e.childNodes.length;c<a;c++){if(e.childNodes[c].nodeName.toLowerCase()=="input"){Fe.on(e.childNodes[c],"mousedown",function(){closeMeasure()})}}processMapSize()}function initMapSize(){var b=Fe.G("MapHolder");var a=Fe.G("resPanel");var c=getClientSize().height-75;var d=c;c=c<0?0:c;b.style.height=c+"px";d=d<0?0:d;a.style.height=d+"px"}function processMapSize(){var a=Fe.G("MapHolder");var b=Fe.G("shad_v");b.style.height=parseInt(a.style.height)+"px";Fe.G("shad_h").style.width=parseInt(a.offsetWidth)+"px";Fe.on(window,"resize",function(){if(a._resizeTimer){return}a._resizeTimer=setTimeout(function(){if(window.iknInsertFlg){var e=getClientSize().height;e=e<0?0:e;a.style.height=e+"px";var d=getClientSize().width;d=d<0?0:d;a.style.width=d+"px"}else{var e=getClientSize().height-75;var f=e;e=e<0?0:e;f=f<0?0:f;a.style.height=e+"px";Fe.G("resPanel").style.height=f+"px"}var c=parseInt(a.style.height);c=c<0?0:c;b.style.height=c+"px";Fe.G("shad_h").style.width=parseInt(a.offsetWidth)+"px";a._resizeTimer=null},100)})}function getClientSize(){if(window.innerHeight){return{width:window.innerWidth,height:window.innerHeight}}else{if(document.documentElement&&document.documentElement.clientHeight){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}}else{return{width:document.body.clientWidth,height:document.body.clientHeight}}}}function mapInit(){window.map=new BMap.Map("MapHolder");map.enableScrollWheelZoom(false);var a=new BMap.Point(8866529.48,2608329.5949999997);map.centerAndZoom(a,10);window.stdMapCtrl=new BMap.StandardMapControl({type:1});map.addControl(window.stdMapCtrl);if(window.iknInsertFlg){window.scaleCtrl=new BMap.ScaleControl({offsetY:20});map.addControl(window.scaleCtrl)}else{window.scaleCtrl=new BMap.ScaleControl({offsetY:5});map.addControl(window.scaleCtrl)}var c=[];var d="",b="";if(window.iknInsertFlg){d="&copy;2012 Baidu";b="<a target='_blank' id='mainurl' href='http://map.baidu.com/"+location.search+"'><img border='0' style='margin-bottom:0px;' src='http://map.baidu.com/iknow/img/detaillogo.gif' /></a>"}window.copyCtrl=new BMap.CopyrightControl({content:d,anchor:BMap.ControlAnchor.ANCHOR_BOTTOM_LEFT});window.copyCtrl1=new BMap.CopyrightControl({content:b,anchor:BMap.ControlAnchor.ANCHOR_BOTTOM_RIGHT});map.addControl(window.copyCtrl);map.addControl(window.copyCtrl1);if(window.iknInsertFlg&&modelConfig.dataEditTime!=""){window.copyCtrl1=new BMap.CopyrightControl({content:modelConfig.dataEditTime,anchor:BMap.ControlAnchor.ANCHOR_TOP_RIGHT});map.addControl(window.copyCtrl1)}Fe.on(map.platform,"mousedown",function(){if(document.getElementById("form1")&&document.getElementById("form1").word){document.getElementById("form1").word.blur()}})}function switchTab(g){if(g<1||g>3){return}var c=switchTab._curSelIndex;if(c==g){return}switchTab._curSelIndex=g;for(var b=1;b<=3;b++){Fe.G("r"+b).checked=false;Fe.G("form"+b).style.display="none"}Fe.G("r"+g).checked=true;Fe.G("form"+g).style.display="block";if(g==1){try{Fe.G("form1").word.focus()}catch(d){}}else{try{Fe.G("form"+g).word_from.focus()}catch(d){}}if(c!=1){var e=Fe.trim(Fe.G("form"+c).word_from.value);var a=Fe.trim(Fe.G("form"+c).word_to.value);if(g!=1){setQValue(e,g,0);setQValue(a,g,1)}}}switchTab._curSelIndex=1;function setQValue(a,b,c){if(!a){a=""}if(!b){b=1}if(b<1||b>3){return}if(b==1){Fe.G("form1").word.value=a}else{if(b==2){if(c==0){Fe.G("form2").word_from.value=a}else{if(c==1){Fe.G("form2").word_to.value=a}}}else{if(c==0){Fe.G("form3").word_from.value=a}else{if(c==1){Fe.G("form3").word_to.value=a}}}}}function mapRevert(){var a=location.href;var b=getParam(a);if(b==null){return false}if(b.s){}}function addMapCenter(){if(!map||!MapCenter){return}var a=new MapCenter();map.addEventListener("dragend",function(b){a.request()})}ModelMgr.register("City",'<div class="mapinfo_con">			<b>搜索示例：</b>			<p style="padding-left:12px;display:#sample_poi_none#">找地点？您可以输入：<br>"<a href="javascript:void(0)" onclick="Instance(\'#hashCode#\').searchWord(this)">#sample_poi#</a>"</p>			<p  style="padding-left:12px;padding-top:8px;display:#sample_route_none#">#sample_route_info#<br>"<a href="javascript:void(0)" onclick="Instance(\'#hashCode#\').#function#(this)">#sample_route#</a>"</p>			<br>			<div id="setDefCity_#hashCode#" style="padding-top:10px;height:28px"></div>			<p id="searchCity_#hashCode#" style="display:none">您是否要<a href="javascript:void(0)" onclick="cnameSearch(\'#tips#\',\'#city_code#\')">在<b>#search_city#</b>找名称中含有"<b>#tips#</b>"的地点</a>			<br></p>		</div>');function City(){Fe.BaseClass.call(this);this.type="city";this.config={cPoint:[12957320,4825100]};this.defaultPage=false;this.curCity={}}City.inherits(Fe.BaseClass,"City");Fe.extend(City.prototype,{render:function(html,json){if(!json&&_OLR){eval("var defData ="+_OLR.index);json=defData;_OLR.hot_city=json.hot_city;this.defaultPage=true;if(json.content&&json.content.code){modelConfig.defalutCityCode=json.content.code}}this.json=json;switch(json.content.city_type){case 0:html=this.setCountry();break;case 1:html=this.setProvince();break;case 2:html=this.setCity(html);break;case 3:html=this.setArea();break;default:break}if(this.cinfo&&this.cinfo.setDefCity){modelConfig.defalutCityCode=this.json.content.code}return html},initialize:function(){this.setMap();if(!this.json||!this.json.content){return}var f=this.json.content;if(this.json.content.cname&&this.json.content.if_current==1){Fe.G("curCity").innerHTML=f.cname;modelConfig.cityName=f.cname;if(f.if_current==1&&f.code){this.curCity={name:f.cname,code:f.code};setCurCity(f.cname,f.code,f.city_type)}else{setCurCity(modelConfig.cityName,modelConfig.cityCode)}}else{if(f.if_current==0&&f.pccode&&f.pcname){this.curCity={name:f.pcname,code:f.pccode};setCurCity(f.pcname,f.pccode,f.city_type)}}if(this.json.result.wd!=null){if(this.json&&this.json.result&&this.json.result.jump_back==1&&this.cinfo&&this.cinfo.cityInit!=1&&this.cinfo.defCity!="setDef"){if(Fe.G("searchCity_"+this.hashCode)){Fe.G("searchCity_"+this.hashCode).style.display="block"}}}var g=Fe.G("ditie_"+this.hashCode);if(g&&this.json.content){var e=[];e[AID["北京"]]="北京市|beijing";e[AID["上海"]]="上海市|shanghai";e[AID["广州"]]="广州市|guangzhou";var c=this.json.content.code;if(e[c]){var i=e[c].split("|");var b="subways/index.html?c="+i[1];g.innerHTML='<a href="'+b+'" target="_blank">'+i[0]+"轨道交通示意图</a>";g.style.display=""}}this.setBaike();if(this.defaultPage||(this.cinfo.defCity!=null&&this.cinfo.defCity=="setDef")){this.setAsDefCityHtml()}else{var j=Fe.G("setDefCity_"+this.hashCode);if(j){j.style.display="none"}}if(this.json.content.city_type==CITY_TYPE_PROV||this.json.content.city_type==CITY_TYPE_DIST){var h=this;var d=this.json.content.uid;if(!d){return}if(window.mapMoveTimer){clearTimeout(window.mapMoveTimer)}modelConfig.enableMapMove=false;go("ext&num=1000&l=10&uid="+d,function(s){if(h.hashCode!=ModelMgr.mainModel.hashCode){return}modelConfig.enableMapMove=true;if(s.content&&s.content.geo){var k=parseGeo(s.content.geo);var u=0;if(s.content.city_type==CITY_TYPE_PROV){u=AREA_TYPE_PROV}if(s.content.city_type==CITY_TYPE_DIST){u=AREA_TYPE_DIST}var r=k.points;if(typeof r=="string"){if(h.type=="province"){addArea(r,u,500)}else{addArea(r,u)}}else{for(var m=0,a=r.length;m<a;m++){if(!r[m]){continue}if(h.type=="province"){if(h.json.content.code==AID["福建"]||h.json.content.code==AID["浙江"]){addArea(r[m],u)}else{addArea(r[m],u,300)}}else{addArea(r[m],u)}}}var n=k.bound.split(";");var p=new Array();var q=n[0].split(",");var o=n[1].split(",");p.push(new BMap.Point(q[0],q[1]));p.push(new BMap.Point(o[0],o[1]));modelConfig.enableMapMove=false;if(window.mapMoveTimer){clearTimeout(window.mapMoveTimer)}window.mapMoveTimer=setTimeout(function(){modelConfig.enableMapMove=true},4000);if(h.cinfo._maplevel!=null&&h.cinfo._centerPoint!=null){map.centerAndZoom(h.cinfo._centerPoint,h.cinfo._maplevel)}else{map.getBestMap(p)}}})}},selCity:function(a){go("cur&wd="+encodeURIComponent(a.innerHTML),{cinfo:{cityInit:1}})},setMap:function(){if(this.cinfo._maplevel!=null&&this.cinfo._centerPoint!=null){map.centerAndZoom(this.cinfo._centerPoint,this.cinfo._maplevel)}else{var b=modelConfig.level[this.type];if(this.json.content.level){b=parseInt(this.json.content.level)}if(this.type=="country"){b=4}var a=geoToPoint(this.json.content.geo);map.centerAndZoom(a,b)}},setCity:function(e){var d=this.json;this.type="city";var f=d.content;if(f&&f.error==0){return"未查找到相关数据！"}e=e.replace(/#cname#/gi,f.cname);e=e.replace(/#tips#/gi,f.tips);if(this.cinfo.startCity){e=e.replace(/#search_city#/gi,this.cinfo.startCity.name);e=e.replace(/#city_code#/gi,this.cinfo.startCity.code)}if(f.sample&&f.sample.poi){e=e.replace(/#sample_poi#/gi,f.sample.poi)}else{e=e.replace(/#sample_poi_none#/gi,"none")}if(f.sample&&f.sample.route){e=e.replace(/#sample_route#/gi,f.sample.route)}else{e=e.replace(/#sample_route_none#/gi,"none")}if(!d.current_city||d.current_city.sup_bus==1){e=e.replace(/#sample_route_info#/gi,"找公交换乘或驾车路线？您可以输入：");e=e.replace(/#function#/gi,"searchWord")}else{e=e.replace(/#sample_route_info#/gi,"找驾车路线？您可以输入：");e=e.replace(/#function#/gi,"searchBus")}if((d.content&&d.content.code&&modelConfig.defalutCityCode==d.content.code)||(this.cinfo.defCity!=null&&this.cinfo.defCity=="setDef")){e=e.replace("#setCity_none#","none")}var a=[];var h=false;if(f.sample&&f.sample.other){h=f.sample.other}if(h){for(var c=0;c<h.length;c++){var g=h[c];for(var b=0;b<g.length;b++){if(!g[b].name||g[b].name==""||!g[b].id){continue}a.push('<a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').searchWord(this)\">"+g[b].name+"</a>&nbsp;&nbsp;")}a.push("<br/>")}}if(a.length==0){e=e.replace("#none#","none")}e=e.replace("#sample_other#",a.join(""));return e},setProvince:function(){this.type="province";var e=this.provinceHtml();var d=this.json;e=e.replace(/#province_name#/gi,d.content.cname);e=e.replace(/#cur_kw#/gi,d.result.wd);var f=d.content.province;var g="";if(f!=null){for(var c=0;c<f.length;c++){var b=f[c];var a=Math.ceil(strB(b)/10)*50;g+='<li style="width:'+a+'px"><a href="javascript:void(0)" class="switchCity" onclick="go(\'cur&wd='+encodeURIComponent(b)+"',{cinfo:{cityInit:1}})\">"+b+"</a></li>"}}else{e=e.replace(/#none#/gi,"none")}if(this.cinfo.cityInit==1||d.result.wd==null){e=e.replace(/#searchCity_none#/gi,"none")}if(this.cinfo.startCity){e=e.replace(/#search_city#/gi,this.cinfo.startCity.name);e=e.replace(/#city_code#/gi,this.cinfo.startCity.code)}e=e.replace(/#city_list#/gi,g);return e},provinceHtml:function(){var a='<table width="200" style="margin-right:10px;display:inline" cellspacing="0" cellpadding="0" border="0" align="left">					<tr>						<td height="25" valign="top"><strong style="font-size:14px;line-height:17px">#province_name#</strong></td>					</tr>					<tr>						<td>							<p id="searchCity_'+this.hashCode+'"" style="display:#searchCity_none#">您是否要<a href="javascript:void(0)" onclick="cnameSearch(\'#cur_kw#\',\'#city_code#\')">在<b>#search_city#</b>找名称中含有"<b>#cur_kw#</b>"的地点</a></p>						</td>					</tr>					<tr height="20">						<td>							<br/><span class="f13" style="display:#none#">百度地图搜索当前支持“<font color="#c60a00">#province_name#</font>”以下城市：</span>						</td>					</tr>					<tr>						<td class="city_list">							<ul>#city_list#</ul>						</td>					</tr>				</table>';return a},setCountry:function(){this.type="country";var a=this.countryHtml();a=a.replace(/#city_search#/gi,'href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').selCity(this)\"");a=a.replace(/#search_word#/gi,'href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').searchWord(this)\"");return a},countryHtml:function(){var a=['<div class="mapinfo_con country">'];a.push("<b>热点城市:</b>");a.push('<table style="width:190px;margin-left:10px"><tr>');a.push("<td><a #city_search#>北京</a></td>");a.push("<td><a #city_search#>上海</a></td>");a.push("<td><a #city_search#>广州</a></td>");a.push("<td><a #city_search#>深圳</a></td>");a.push("<td><a #city_search#>成都</a></td>");a.push("</tr><table>");a.push("<b>全国:</b>");a.push('<table style="width:190px;margin-left:10px;line-height:14px;margin-bottom:8px">');a.push("<tr><td><a #city_search#>北京</a></td>");a.push("<td><a #city_search#>上海</a></td>");a.push("<td><a #city_search#>天津</a></td>");a.push('<td colSpan="2"><a #city_search#>重庆</a></td></tr>');a.push('<tr><td style="width:20%"><a #city_search#>安徽</a></td>');a.push('<td style="width:20%"><a #city_search#>福建</a></td>');a.push('<td style="width:20%"><a #city_search#>甘肃</a></td>');a.push('<td style="width:20%"><a #city_search#>广东</a></td>');a.push('<td style="width:20%"><a #city_search#>广西</a></td></tr>');a.push("<tr><td><a #city_search#>贵州</a></td>");a.push("<td><a #city_search#>海南</a></td>");a.push("<td><a #city_search#>河北</a></td>");a.push("<td><a #city_search#>河南</a></td>");a.push("<td><a #city_search#>黑龙江</a></td></tr>");a.push("<tr><td><a #city_search#>湖北</a></td>");a.push("<td><a #city_search#>湖南</a></td>");a.push("<td><a #city_search#>吉林</a></td>");a.push("<td><a #city_search#>江苏</a></td>");a.push("<td><a #city_search#>江西</a></td></tr>");a.push("<tr><td><a #city_search#>辽宁</a></td>");a.push("<td><a #city_search#>内蒙古</a></td>");a.push("<td><a #city_search#>宁夏</a></td>");a.push("<td><a #city_search#>青海</a></td>");a.push("<td><a #city_search#>山东</a></td></tr>");a.push("<tr><td><a #city_search#>山西</a></td>");a.push("<td><a #city_search#>陕西</a></td>");a.push("<td><a #city_search#>四川</a></td>");a.push("<td><a #city_search#>西藏</a></td>");a.push("<td><a #city_search#>新疆</a></td></tr>");a.push("<tr><td><a #city_search#>云南</a></td>");a.push('<td colSpan="4"><a #city_search#>浙江</a></td></tr>');a.push('<tr><td><a href="javascript:void(0)" onclick="go(\'s&wd='+encodeURIComponent("台湾")+"')\">台湾</a></td>");a.push("<td><a #city_search#>香港</a></td>");a.push('<td colSpan="3"><a #city_search#>澳门</a></td></tr>');a.push("</table>");a.push('<div id="setDefCity_'+this.hashCode+'"></div>');a.push("</div>");return a.join("")},setArea:function(){this.type="area";var c=this.json;var b=this.areaHtml();var a=c.content.cname;b=b.replace(/#cname#/gi,a);b=b.replace(/#cur_kw#/gi,c.result.wd);if((a.indexOf("县")==-1)||(c.content&&c.content.code&&modelConfig.defalutCityCode==c.content.code)||(this.cinfo.defCity!=null&&this.cinfo.defCity=="setDef")){b=b.replace("#setCity_none#","none")}if((c.result&&c.result.jump_back!=1)||this.cinfo.cityInit==1||c.result.wd==null){b=b.replace(/#searchCity_none#/gi,"none")}if(this.cinfo.startCity){b=b.replace(/#search_city#/gi,this.cinfo.startCity.name);b=b.replace(/#city_code#/gi,this.cinfo.startCity.code)}return b},areaHtml:function(){var a='<div style="padding:0 10px;line-height: 140%;" id="baike_'+this.hashCode+'">					<div style="border-bottom: 1px solid rgb(207, 207, 207); height: 28px; line-height: 28px; font-size: 14px; font-weight: bold; margin-bottom: 5px;">								<strong style="font-size: 14px;">#cname#</strong>							</div>					</div>					<p id="searchCity_'+this.hashCode+'"" style="display:#searchCity_none#;padding:10px">您是否要<a href="javascript:void(0)" onclick="cnameSearch(\'#cur_kw#\',\'#city_code#\')">在<b>#search_city#</b>找名称中含有"<b>#cur_kw#</b>"的地点</a></p>					<div id="setDefCity_'+this.hashCode+'" style="padding: 0 0 10px 10px"></div>';return a},setDefCity:function(b,d){var c=this;var a=b;go("def&wd="+encodeURIComponent(a),function(e){if(e.content!=null&&e.content.error!=null&&e.content.error==1){if(c.json&&c.json.content&&c.json.content.code){modelConfig.defalutCityCode=c.json.content.code;d.parentNode.parentNode.innerHTML="已设置成功！"}else{d.parentNode.parentNode.innerHTML="默认城市设置失败"}}else{d.parentNode.parentNode.innerHTML="默认城市设置失败"}})},setAsDefCityHtml:function(){var a=Fe.G("setDefCity_"+this.hashCode);if(a){this.setDefHtml(0);a.style.display=""}},setDefHtml:function(d){var e=this;var c=new Array();c[0]='<font style="vertical-align:-2px"><b>默认城市：</b>'+this.json.content.cname+'&nbsp; <a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').setDefHtml(1)\">修改</a></font>";c[1]="<form onsubmit=\"Instance('"+this.hashCode+'\').updateDefCity();return false">						<b style="*vertical-align:4px">默认城市：</b>						<input type="text" style="width:70px" value="'+this.json.content.cname+'" id="defCityWd_'+this.hashCode+'"/>						<input type="submit" style="padding:0 2px" value="确定"/>						<input type="button" style="padding:0 2px" value="取消" onclick="Instance(\''+this.hashCode+'\').setDefHtml(0)"/>						<div style="color:#d81221;text-indent:70px" id="error_info_'+this.hashCode+'"></div>					</form>';var b=Fe.G("setDefCity_"+this.hashCode);b.innerHTML=c[d];var a=Fe.G("defCityWd_"+this.hashCode);if(a){setTimeout(function(){try{if(window.city_sg2){city_sg2.disposeSug()}var g=Fe.G("defCityWd_"+e.hashCode).value;window.city_sg2=new bdMapSuggest({inputid:"defCityWd_"+e.hashCode,qType:1,closeB:1});city_sg2.setValue(g);a.focus();a.select()}catch(f){}},100);return}},updateDefCity:function(){var a=Fe.G("defCityWd_"+this.hashCode);if(a.value==""){Fe.G("error_info_"+this.hashCode).innerHTML="请输入正确的城市名";a.focus();return}else{var b=this;go("def&wd="+encodeURIComponent(a.value),function(c){if(c.content!=null&&c.content.error!=null&&c.content.error==1){if(c.result&&c.result.wd!=null){var d=encodeURIComponent(c.result.wd);go("cur&wd="+d,{cinfo:{defCity:"setDef",setDefCity:true}})}else{Fe.G("error_info_"+b.hashCode).innerHTML="请输入正确的城市名"}}else{Fe.G("error_info_"+b.hashCode).innerHTML="请输入正确的城市名"}})}},delDefCity:function(){var a=this;go("def&wd="+encodeURIComponent("全国"),function(b){a.setDefHtml(0)})},searchWord:function(c){if(typeof(c)=="object"){var b=encodeURIComponent(c.innerHTML)}else{var b=encodeURIComponent(c)}var a=this.curCity.code;if(a){go("s&addr=0&wd="+b+"&c="+a)}else{go("s&addr=0&wd="+b)}},searchBus:function(c){var b=this.json.content.code;var a=c.innerHTML.replace("从","").split("到");go("nav&c="+b+"&sy=1&sc="+b+"&ec="+b+"&sn=2$$$$$$"+encodeURIComponent(a[0])+"$$&en=2$$$$$$"+encodeURIComponent(a[1])+"$$")},setBaike:function(){var d=Fe.G("baike_"+this.hashCode);if(d!=null){var b=this.json.content.gbk_name;if(b==null){return}b=b.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+$)/g,"");var a=this.json.content.baike;if(a!=1){return}var c=function(){if(typeof(baikeRes)!="undefined"&&baikeRes.list[0].abs!=null){var e=['<div style="height:28px;line-height:28px;font-size:14px;font-weight:bold;border-bottom:1px solid #cfcfcf;margin-bottom:5px">'];e.push('<strong style="font-size:14px">'+baikeRes.keyword+"</strong></div>");e.push('<font style="color:#666">'+baikeRes.list[0].abs.replace(/<[^>].*?>/g,"")+"</font><div>");e.push('<div style="text-align:right">来自 <a href="'+baikeRes.list[0].url+'" target="_blank">百度百科</a><div>');d.innerHTML=e.join("")}};scriptRequest("http://baike.baidu.com/w?ct=17&lm=31&tn=baiduFinance&pn=0&rn=10&ss=map&word="+b,c,"baike_info","gb2312")}}});ModelMgr.register("NavQuery",'<div class="mapinfo_con">			 <div class="drive">				请输入起点和终点，如：				<form onsubmit="Instance(\'#hashCode#\').submit(this);return false">				<dl>					<dt class="which_1">						<span class="city"><input id="scity" name="scity" type="text" value="#startCity#" /></span>						<span class="addr"><a href="javascript:void(0)" onclick="Instance(\'#hashCode#\').setAddr(this,0)">添加具体地点</a></span>					</dt>				</dl>				<dl>					<dt class="which_2">						<span class="city"><input id="ecity" name="ecity" type="text" value="#endCity#" /></span>						<span class="addr"><a href="javascript:void(0)"  onclick="Instance(\'#hashCode#\').setAddr(this,1)">添加具体地点</a></span>					</dt>				</dl>			 <div class="subm"><input type="submit"  value="搜索"/></div>			 </form>			</div>		 </div>');function NavQuery(){Fe.BaseClass.call(this);this.startCity="北京";this.endCity="上海"}Fe.extend(NavQuery.prototype,{render:function(b,a){b=b.replace(/#startCity#/gi,this.startCity);b=b.replace(/#endCity#/gi,this.endCity);return b},initialize:function(){this.scityid=0;this.ecityid=0;this.sg1=new bdMapSuggest({inputid:"scity",closeB:1,qType:1});this.sg2=new bdMapSuggest({inputid:"ecity",closeB:1,qType:1});this.sg3=new bdMapSuggest({inputid:"saddr",cityid:this.scityid,closeB:1,qType:0});this.sg4=new bdMapSuggest({inputid:"eaddr",cityid:this.ecityid,closeB:1,qType:0})},setAddr:function(d,b){var c=d.parentNode;var a=b==0?"saddr":"eaddr";c.innerHTML="<input id="+a+' name="'+a+'" type="text" value="" />'},submit:function(c){var b=trim(c.scity.value);var e=trim(c.ecity.value);var d="",a="";if(c.saddr){d=trim(c.saddr.value)}if(c.eaddr){a=trim(c.eaddr.value)}if(b==""){c.scity.focus();alert("请输入起点城市名!");return false}else{if(e==""){c.ecity.focus();alert("请输入终点城市名!");return false}else{if(c.saddr&&(b!=""&&e!="")&&(d=="")){c.saddr.focus();alert("请输入起点具体地址");return false}else{if(c.eaddr&&(b!=""&&e!="")&&(a=="")){c.eaddr.focus();alert("请输入终点具体地址");return false}}}}go("")}});function addMapControls(){map.addControl(searchInViewCtrl);map.addControl(fullScCtrl);map.temp.toolsElement=[];map.temp.toolsElement.push(searchInViewCtrl.getDom());console.log(map.temp.toolsElement)}var fullScCtrl=new BMap.Control();fullScCtrl.initialize=function(f){BMap.Control.prototype.initialize.call(this,f);BMap.Control.prototype._render.call(this);f.fullScreenMode=false;this.elem2BHidden=[];var a=["header","search","tools","MapInfo","shad"];for(var b=0,h=a.length;b<h;b++){if(Fe.G(a[b])){this.elem2BHidden.push(Fe.G(a[b]))}}var e=f.container;var g=this._container;var d=this;g.id="fullSc_"+this.hashCode;g.title="进入全屏状态";g.className="map_ctrl";g.style.width="51px";g.style.backgroundPosition="0 -309px";g.style.zIndex="800";g.onmouseover=function(){if(f.fullScreenMode!=true){g.style.backgroundPosition="0 -329px";g.style.width="51px"}else{g.style.backgroundPosition="-51px -329px";g.style.width="75px"}};g.onmouseout=function(){if(f.fullScreenMode!=true){g.style.backgroundPosition="0 -309px";g.style.width="51px"}else{g.style.backgroundPosition="-51px -309px";g.style.width="75px"}};Fe.on(g,"mousedown",function(c){c=c||window.event;if(c.button==2){return}if(Fe.Browser.ie&&c.button!=1){return}if(f.fullScreenMode==false){g.style.backgroundPosition="0 -349px";g.style.width="51px"}else{g.style.backgroundPosition="-51px -349px";g.style.width="75px"}c.returnValue=false});g.onclick=function(){f.enableDoubleClickZoom(false);if(f.fullScreenMode==false){d.toFullSrc()}else{d.returnFullSrc()}setTimeout(function(){f.enableDoubleClickZoom(true)},300)};Fe.on(document,"keydown",function(c){c=window.event||c;if(c.keyCode==27&&f.fullScreenMode){setTimeout(function(){d.returnFullSrc()},100)}})};fullScCtrl.remove=function(){var a=document.getElementById("fullSc"+this.hashCode);if(a&&a.parentNode){a.onclick=null;a.parentNode.removeChild(a)}};fullScCtrl.toFullSrc=function(b){var f=map.container;var g=this._container;var e=this;for(var d=0,a=e.elem2BHidden.length;d<a;d++){e.elem2BHidden[d].style.display="none"}f.style.marginRight="0";f.style.height=getClientSize().height+"px";Fe.G("MapInfo").style.height=f.style.height;g.style.backgroundPosition="-51px -309px";g.style.width="75px";g.title="退出全屏状态";map.fullScreenMode=true;for(var d=0,a=map.temp.toolsElement.length;d<a;d++){map.temp.toolsElement[d].style.right=parseInt(map.temp.toolsElement[d].style.right)+24+"px"}if(b==null){historyUrl("isfullScreen=true");History.nowTpl=escape("isfullScreen=true")}};fullScCtrl.returnFullSrc=function(d){var g=map.container;var h=this._container;var f=this;for(var e=0,b=f.elem2BHidden.length;e<b;e++){f.elem2BHidden[e].style.display="block"}g.style.marginRight="280px";g.style.height=getClientSize().height-119+"px";Fe.G("MapInfo").style.height=g.style.height;var a=0;Fe.G("shad_v").style.height=parseInt(g.style.height)-a+"px";h.style.backgroundPosition="0 -309px";h.style.width="51px";h.title="进入全屏状态";for(var e=0,b=map.temp.toolsElement.length;e<b;e++){map.temp.toolsElement[e].style.right=parseInt(map.temp.toolsElement[e].style.right)-24+"px"}map.fullScreenMode=false;if(d==null){historyUrl("isfullScreen=false");History.nowTpl=escape("isfullScreen=false")}};fullScCtrl.setAnchor(BMap.ControlAnchor.ANCHOR_TOP_RIGHT);fullScCtrl.setOffset(10,10);var searchInViewCtrl=new BMap.Control();searchInViewCtrl.initialize=function(a){BMap.Control.prototype.initialize.call(this,a);BMap.Control.prototype._render.call(this);this.isOpen=false;this.hasResult=false;this.curKw="";this.minZoomLv=14;this.listeners=[];this.resultCount=50;this.reqObj=null;this.curSearchCPt=null;var b=this._container;b.id="searchInView_"+this.hashCode;b.className="map_ctrl";b.style.width="85px";b.style.backgroundPosition="-156px -249px";b.style.zIndex="800";b.title="在当前视野内进行搜索";this.bind()};searchInViewCtrl.bind=function(){var a=this;var b=a._container;b.onmouseover=function(){if(a.isOpen!=true){b.style.backgroundPosition="-156px -269px"}};b.onmouseout=function(){if(a.isOpen!=true){b.style.backgroundPosition="-156px -249px"}};Fe.on(b,"mousedown",function(c){c=c||window.event;if(c.button==2){return}if(Fe.Browser.ie&&c.button!=1){return}b.style.backgroundPosition="-156px -289px";c.returnValue=false});b.onclick=function(){if(a.isOpen==false){a.prepare()}else{a.exit()}};map.addEventListener("mapcontainerresize",function(){if(!a.sivPop){return}if(map.fullScreenMode){a.sivPop.getDom().style.right=a._getRightPos()+"px"}else{a.sivPop.getDom().style.right=a._getRightPos()+280+"px"}})};searchInViewCtrl.remove=function(){var a=document.getElementById("searchInView"+this.hashCode);if(a&&a.parentNode){a.onclick=null;a.parentNode.removeChild(a)}};searchInViewCtrl.setResult=function(a){this.hasResult=!!a.hasResult;this.curKw=a.kw;this.curSearchCPt=a.cpt};searchInViewCtrl.checkNeed2Go=function(){if(!this.curKw){return false}if(!this.curSearchCPt){return false}if(map.zoomLevel<this.minZoomLv){return false}var d=map.pointToPixel(this.curSearchCPt);var c=map.pointToPixel(map.centerPoint);var b=Math.abs(d.x-c.x);var a=Math.abs(d.y-c.y);if(b>=0.3*map.width||a>=0.3*map.height){return true}return false};searchInViewCtrl.rego=function(){var b=map.getBounds();var bs="("+b.minX+","+b.minY+";"+b.maxX+","+b.maxY+")";if(this.curKw){var url=window.location.pathname+modelConfig.DATA_URL+"bd&c="+modelConfig.cityCode+"&format=1&ie=utf-8&pn=0&rn="+this.resultCount+"&wd="+encodeURIComponent(this.curKw)+"&ar="+bs+"&b="+bs+"&l="+map.zoomLevel;if(this.reqObj){this.reqObj.abort();this.reqObj=null}this.reqObj=getXhr();var me=this;this.reqObj.onreadystatechange=function(){if(map.zoomLevel<me.minZoomLv){return}if(me.reqObj.readyState==4&&me.reqObj.status==200){var json;try{eval("json="+me.reqObj.responseText)}catch(e){}if(me.inViewHashCode&&json){var inViewComponent=Instance(me.inViewHashCode);if(inViewComponent){if(!inViewComponent.cinfo){inViewComponent.cinfo={}}inViewComponent.cinfo.rego=true;inViewComponent.cinfo.isPos=false;me.sivPop.content.innerHTML=inViewComponent.render(null,json);inViewComponent.initialize()}}}};this.reqObj.open("GET",url+"&t"+(new Date().getTime()),true);this.reqObj.send(null)}};searchInViewCtrl.exit=function(){var e=this;var f=e._container;if(e.sivPop){e.sivPop.close();e.sivPop=null}if(e.hasResult){map.closeInfoWindow();Instance(e.inViewHashCode).clearMarkers();e.hasResult=false}e.curKw="";e.curSearchCPt=null;e.isOpen=false;if(f){f.style.backgroundPosition="-156px -249px"}if(e.listeners){for(var d=0,a=e.listeners.length;d<a;d++){var b=e.listeners[d];if(b.obj.removeEventListener){b.obj.removeEventListener(b.type,b.cbk)}}}};searchInViewCtrl.getResultCount=function(){return this.resultCount};searchInViewCtrl.isInUse=function(){return !!this.curKw};searchInViewCtrl.getPreModelName=function(){return this.preModel&&this.preModel._className};searchInViewCtrl.getPreModel=function(){return this.preModel};searchInViewCtrl.prepare=function(){var e=this;var h=e._container;if(!e.sivPop){e.sivPop=new Popup({title:"在屏幕范围内查看",content:"",width:229,addDom:"wrapper",close:function(){e.sivPop=null;e.exit()},clickClose:false});e.sivPop.render();if(!map.fullScreenMode){e.sivPop.getDom().style.right=e._getRightPos()+280+"px"}else{e.sivPop.getDom().style.right=e._getRightPos()+"px"}e.sivPop.getDom().style.top="33px";e.sivPop.getDom().style.zIndex=1;e.sivPop.content.style.paddingLeft="8px";e.sivPop.content.style.paddingBottom="8px";searchInViewCtrl.sivPop=e.sivPop}e.sivPop.show();this.setPopupHeight();e.preModel=ModelMgr.mainModel;go("tpl:SearchInView",{dom:e.sivPop.content,cinfo:{isPos:true,container:e.sivPop.content,resultCount:e.resultCount}});e.isOpen=true;h.style.backgroundPosition="-156px -289px";var b=function(){if(!e.sivPop){return}if(map.zoomLevel<e.minZoomLv){map.closeInfoWindow();Instance(e.inViewHashCode).clearMarkers();go("tpl:SearchInView",{dom:e.sivPop.content,cinfo:{isPos:true,container:e.sivPop.content,resultCount:e.resultCount}})}else{if(e.curKw){var c=Instance(e.inViewHashCode);if(c){e.sivPop.content.innerHTML=c.getResultHTML(e.curKw);e.setPopupHeight(true)}e.rego()}else{go("tpl:SearchInView",{dom:e.sivPop.content,cinfo:{isPos:true,container:e.sivPop.content,resultCount:e.resultCount}})}}};var f=function(){if(!e.sivPop){return}if(map.zoomLevel<e.minZoomLv){map.closeInfoWindow();Instance(e.inViewHashCode).clearMarkers();go("tpl:SearchInView",{dom:e.sivPop.content,cinfo:{isPos:true,container:e.sivPop.content,resultCount:e.resultCount}})}else{if(e.curKw){var c=Instance(e.inViewHashCode);if(c){e.sivPop.content.innerHTML=c.getResultHTML(e.curKw);e.setPopupHeight(true)}e.rego()}else{go("tpl:SearchInView",{dom:e.sivPop.content,cinfo:{isPos:true,container:e.sivPop.content,resultCount:e.resultCount}})}}};var g=function(){if(e.checkNeed2Go()==true){e.rego()}};var d=function(){if(e.checkNeed2Go()==true){e.rego()}};map.addEventListener("load",f);map.addEventListener("dragend",g);map.addEventListener("zoomend",b);map.addEventListener("moveend",d);e.listeners.push({obj:map,type:"load",cbk:f});e.listeners.push({obj:map,type:"dragend",cbk:g});e.listeners.push({obj:map,type:"zoomend",cbk:b});e.listeners.push({obj:map,type:"moveend",cbk:d});var a=function(){if(e._resizeTimer){return}e._resizeTimer=setTimeout(function(){e.rego();e._resizeTimer=null},300)};map.addEventListener("mapcontainerresize",a);e.listeners.push({obj:map,type:"mapcontainerresize",cbk:a})};searchInViewCtrl.search=function(d){this.prepare();var n=d.split("&");var c=map.zoomLevel;var a=map.centerPoint;for(var g=0,f=n.length;g<f;g++){if(n[g].indexOf("l=")==0){var m=n[g].substring(2);c=parseInt(m)}if(n[g].indexOf("ar=(")==0){var h=n[g].substring(4);var e=parseFloat(h.split(";")[0].split(",")[0]);var k=parseFloat(h.split(";")[0].split(",")[1]);var b=parseFloat(h.split(";")[1].split(",")[0]);var j=parseFloat(h.split(";")[1].split(",")[1])}}a=new BMap.Point((e+b)/2,(k+j)/2);map.setCenter(a);if(c<this.minZoomLv){return}map.zoomTo(c);go(d,{dom:this.sivPop.content,cinfo:{reqData:true}})};searchInViewCtrl._getRightPos=function(){var a=18;if(Fe.Browser.ie&&document.compatMode=="BackCompat"){a=12}return a};searchInViewCtrl.setPopupHeight=function(b){var c=100;var a=370;var d=65;if(!this.sivPop){return}if(b){this.sivPop.setHeight(d);return}if(map.zoomLevel<this.minZoomLv){this.sivPop.setHeight(c)}else{if(this.curKw==""){this.sivPop.setHeight(a)}else{this.sivPop.setHeight(d)}}};searchInViewCtrl.hidePopup=function(){if(this.sivPop){this.sivPop.hide()}};searchInViewCtrl.showPopup=function(){if(this.sivPop){this.sivPop.show()}};searchInViewCtrl.setAnchor(BMap.ControlAnchor.ANCHOR_TOP_RIGHT);searchInViewCtrl.setOffset(64,10);function adjustBUS(c){if(window.temp.busPop){return}var d={title:"公交调优",content:"",height:250,width:420,close:function(){delete window.temp.busPop}};var a=window.temp.busPop=new Popup(d);a.render();a.hide();for(var b in c){d[b]=c[b]}if(d&&typeof d.right!="undefined"){a.getDom().style.right=d.right+"px"}else{if(d&&typeof d.left!="undefined"){a.getDom().style.left=d.left+"px"}else{a.getDom().style.left="6px"}}if(d&&typeof d.top!="undefined"){a.getDom().style.top=d.top+"px"}else{if(d&&typeof d.bottom!="undefined"){a.getDom().style.top=d.bottom+"px"}else{a.getDom().style.top="115px"}}go("tpl:AdjustBUS",{dom:a.content,onload:function(){a.show()}})}function selectCity(e,c){if(window.temp.cityPop){return}var d={title:"城市列表",content:"",height:250,width:250,right:10,top:80,close:function(){delete window.temp.cityPop}};for(var b in c){d[b]=c[b]}var a=window.temp.cityPop=new Popup(d);a.addConnectDom(e);a.render();a.hide();if(d&&typeof d.right!="undefined"){a.getDom().style.right=d.right+"px"}else{if(d&&typeof d.left!="undefined"){a.getDom().style.left=d.left+"px"}else{a.getDom().style.left="6px"}}if(d&&typeof d.top!="undefined"){a.getDom().style.top=d.top+"px"}else{if(d&&typeof d.bottom!="undefined"){a.getDom().style.top=d.bottom+"px"}else{a.getDom().style.top="115px"}}go("tpl:SelectCity",{dom:a.content,cinfo:c,onload:function(){a.show()}})}function navQuery(){go("tpl:NavQuery")}function lineQuery(){if(setBusInfo()){go("tpl:LinesQuery")}}function setBusInfo(){if(modelConfig.supBus==0){if(modelConfig.cityType<2||modelConfig.cityCode==AID["全国"]){Fe.G("supBus").innerHTML="请选择您要查询的城市"}else{Fe.G("supBus").innerHTML="抱歉，该城市不支持公交查询"}return false}else{Fe.G("supBus").innerHTML="";return true}}function qSearch(b,a){switch(a){case"loc":b.word.value=b.word.value.replace(/[\uac00-\ud7a3]/g,"");if(b.word.value==""){b.word.focus();return false}if(modelConfig.cityCode){go("s&addr=0&wd="+encodeURIComponent(b.word.value)+"&c="+modelConfig.cityCode+"&src=0")}else{go("s&addr=0&wd="+encodeURIComponent(b.word.value)+"&c=1&src=0")}break;case"bt":b.word_from.value=b.word_from.value.replace(/[\uac00-\ud7a3]/g,"");b.word_to.value=b.word_to.value.replace(/[\uac00-\ud7a3]/g,"");if(b.word_from.value==""){b.word_from.focus();return false}if(b.word_to.value==""){b.word_to.focus();return false}if(setBusInfo()){go("bt&c="+modelConfig.cityCode+"&sn=2$$$$$$"+encodeURIComponent(b.word_from.value)+"$$&en=2$$$$$$"+encodeURIComponent(b.word_to.value)+"$$")}break;case"nav":b.word_from.value=b.word_from.value.replace(/[\uac00-\ud7a3]/g,"");b.word_to.value=b.word_to.value.replace(/[\uac00-\ud7a3]/g,"");if(b.word_from.value==""){b.word_from.focus();return false}if(b.word_to.value==""){b.word_to.focus();return false}go("nav&c="+modelConfig.cityCode+"&sy=0&sc="+modelConfig.cityCode+"&ec="+modelConfig.cityCode+"&sn=2$$$$$$"+encodeURIComponent(b.word_from.value)+"$$&en=2$$$$$$"+encodeURIComponent(b.word_to.value)+"$$");break}}function getLink(e){closeOtherOps();if(getLink._open){if(window.temp.linkPop){window.temp.linkPop.close();delete window.temp.linkPop}getLink._open=false;return}Fe.ac(Fe.G("link"),"selected");if(window.temp.linkPop){return}var d={title:"获取链接",content:"",height:88,width:390,close:function(){delete window.temp.linkPop;Fe.rc(Fe.G("link"),"selected");getLink._open=false}};var a=window.temp.linkPop=new Popup(d);a.addConnectDom(Fe.G("link"));a.render();a.getDom().style.right="295px";a.getDom().style.top="115px";var c=beforeEndHTML(a.content,'<div style="padding:7px 0 0 6px"></div>');var b=beforeEndHTML(c,'<span style="color:#999;padding-bottom:3px">您可将链接复制，保存或发送给他人。</span><input type="text" style="width:305px;margin-top:5px">');if(Fe.Browser.ie){var g=beforeEndHTML(c,'<input type="button" style="margin-left:5px" value="复制"/>');g.onclick=function(){if(window.clipboardData){window.clipboardData.clearData();window.clipboardData.setData("Text",b.value);alert("复制成功")}else{try{Fe.copy(b.value);alert("复制成功")}catch(h){}}}}else{var f=CreateFlash("flashClipBoard","img/clipboard.swf",42,21,"method=setFlashClipContent");var g=beforeEndHTML(c,'<div style="width:42px;height:21px;position:absolute;right:20px;top:45px">'+f+"</div>")}if(navigator.userAgent.indexOf("Safari")>-1){g.style.top="48px"}if(Fe.Browser.opera){g.style.top="50px"}b.value=Share.getLink();b.select();b.onmouseover=b.onmouseout=b.onmousedown=b.onmouseup=function(){this.select()};window.setFlashClipContent=function(){setTimeout(function(){alert("复制成功")},50);return b.value};getLink._open=true}function doMeasure(){endCaptureMap();var a=window;BMap.OperationMask.show(map);BMap.OperationMask.setCursor("url("+distanceControl.getCursor()+"), crosshair");if(!doMeasure._initialized){if(a.distanceControl){a.distanceControl.addEventListener("drawstarted",function(){Fe.ac(Fe.G("measure"),"selected")});a.distanceControl.addEventListener("drawended",function(){Fe.rc(Fe.G("measure"),"selected")})}doMeasure._initialized=true}if(a.distanceControl){if(!a.distanceControl._checked){a.distanceControl.btnClick()}else{closeMeasure()}}}function closeMeasure(){var a=window;if(a.distanceControl){if(a.distanceControl._checked==true){a.distanceControl.btnClick()}Fe.rc(Fe.G("measure"),"selected")}}function printMap(){closeOtherOps();window.print()}function captureMap(){closeMeasure();if(!captureCtrl._initialized){captureCtrl.initialize(map);captureCtrl._initialized=true}if(!captureCtrl._inUse){captureCtrl.beginCapture()}else{captureCtrl.endCapture()}}function endCaptureMap(){if(captureCtrl._initialized){captureCtrl.endCapture()}}var captureCtrl=new BMap.Control();captureCtrl.initialize=function(b){BMap.Control.prototype.initialize.call(this,b);this._opts={lineStroke:1,lineColor:"black",lineStyle:"solid",opacity:0.05,fillColor:"#2319dc"};this.inUse=false;this.ctrlNeed2Hide=[searchInViewCtrl,fullScCtrl,window.stdMapCtrl,window.copyCtrl,window.scaleCtrl];this.handlerCursors=["n-resize","e-resize","s-resize","w-resize","nw-resize","ne-resize","se-resize","sw-resize"];this._temp={};this._handlers=[];this._bindFuncs=[];this.capSizePx=[0,0];this.busStopMkrs=[];this.normMkrs=[];this.roundMkrs=[];this.destLbls=[];this.lbls=[];this.lines=[];this.areas=[];var a=this;Fe.on(document,"keydown",function(c){c=c||window.event;if(c.keyCode==27){a.endCapture()}})};captureCtrl.beginCapture=function(){this._hideCtrls();trafficExit();captureCtrl._inUse=true;Fe.ac(Fe.G("capture"),"selected");BMap.OperationMask.show(map);BMap.OperationMask.setCursor("url(http://map.baidu.com/iknow/img/crosshair.cur), crosshair");this.tipsLabel=tl=new BMap.Label("按住鼠标左键拖选截图区域<br />点击右键或按ESC键退出",{zIndex:9000000,padding:2,offset:[0,0],borderColor:"#555",color:"#555",background:"#ffffe1"});map.addOverlay(tl);tl.getDom().zIndex=9000000;tl.hide();var d=this;var e=function(g){if(g&&g.button==2){d.endCapture()}return preventDefault(g)};Fe.on(BMap.OperationMask.getDom(map),"mouseup",e);this._bindFuncs.push({element:BMap.OperationMask.getDom(map),type:"mouseup",handler:e});var c=function(h){h=h||window.event;var g=h.target||h.srcElement;if(g!==BMap.OperationMask.getDom(map)){tl.hide();return}tl.show();var i=BMap.OperationMask.getDrawPoint(h,false,{x:8,y:8});tl.setPoint(i)};Fe.on(document,"mousemove",c);this._bindFuncs.push({element:document,type:"mousemove",handler:c});var b=function(h){h=window.event||h;if(h.button!=0&&!Fe.Browser.ie||Fe.Browser.ie&&h.button!=1){return}if(BMap.OperationMask.getDom(map).setCapture){BMap.OperationMask.getDom(map).setCapture()}if(d.tipsLabel){d.tipsLabel.remove()}if(Fe.G("cap_size")){Fe.G("cap_size").parentNode.removeChild(Fe.G("cap_size"))}var g=Fe.G("cap_btn_container");if(g){g.parentNode.removeChild(g)}if(d._fDiv){d._fDiv.parentNode.removeChild(d._fDiv);d._fDiv=null}Fe.on(document,"mousemove",a);Fe.on(document,"mouseup",f);d._bindFuncs.push({element:document,type:"mousemove",handler:a});d._bindFuncs.push({element:document,type:"mouseup",handler:f});var h=window.event||h;d._temp.mx=h.layerX||h.offsetX||0;d._temp.my=h.layerY||h.offsetY||0;d._temp.mx=d._temp.mx;d._temp.my=d._temp.my;d._temp.ix=h.pageX||h.clientX||0;d._temp.iy=h.pageY||h.clientY||0;BMap.OperationMask.getDom(map).insertAdjacentHTML("beforeBegin",d._generateHTML());d._fDiv=BMap.OperationMask.getDom(d._map).previousSibling;d._fDiv.style.width="0";d._fDiv.style.height="0";d._fDiv.style.left=d._temp.mx+"px";d._fDiv.style.top=d._temp.my+"px";d._handlers.length=0;d._handlers.push(Fe.G("cap_h_t"));d._handlers.push(Fe.G("cap_h_r"));d._handlers.push(Fe.G("cap_h_b"));d._handlers.push(Fe.G("cap_h_l"));d._handlers.push(Fe.G("cap_h_tl"));d._handlers.push(Fe.G("cap_h_tr"));d._handlers.push(Fe.G("cap_h_br"));d._handlers.push(Fe.G("cap_h_bl"));stopBubble(h);return preventDefault(h)};var a=function(k){k=window.event||k;var i=k.pageX||k.clientX||0;var g=k.pageY||k.clientY||0;var j=i-d._temp.ix;var h=g-d._temp.iy;if(!d._fDiv){return}d._fDiv.style.width=Math.abs(j)+"px";d._fDiv.style.height=Math.abs(h)+"px";if(j>=0){d._fDiv.style.right="auto";d._fDiv.style.left=d._temp.mx+"px";if(d._temp.mx+j>map.width-9){d._fDiv.style.width=map.width-d._temp.mx-9+"px"}}else{d._fDiv.style.left="auto";d._fDiv.style.right=map.width-d._temp.mx-1+"px";if(d._temp.mx+j<5){d._fDiv.style.width=d._temp.mx-5+"px"}}if(h>=0){d._fDiv.style.bottom="auto";d._fDiv.style.top=d._temp.my+"px";if(d._temp.my+h>map.height-5){d._fDiv.style.height=map.height-d._temp.my-5+"px"}}else{d._fDiv.style.top="auto";d._fDiv.style.bottom=map.height-d._temp.my-1+"px";if(d._temp.my+h<9){d._fDiv.style.height=d._temp.my-9+"px"}}d._updateCapSize();d._updateHandlersPosition();stopBubble(k);return preventDefault(k)};var f=function(s){s=window.event||s;if(s.button!=0&&!Fe.Browser.ie||Fe.Browser.ie&&s.button!=1){return}Fe.un(document,"mousemove",a);Fe.un(document,"mouseup",f);Fe.un(BMap.OperationMask.getDom(map),"mousedown",b);if(BMap.OperationMask.getDom(map).releaseCapture){BMap.OperationMask.getDom(map).releaseCapture()}if(!d._fDiv){return}if(d._fDiv&&parseInt(d._fDiv.style.width)==0){d._fDiv.style.width="1px"}if(d._fDiv&&parseInt(d._fDiv.style.height)==0){d._fDiv.style.height="1px"}d._updateCapSize();d.capSizePx=[parseInt(d._fDiv.style.width),parseInt(d._fDiv.style.height)];d._unifyPos();var g=function(i){i=i||window.event;if(i.button==2){return}if(Fe.Browser.ie&&i.button!=1){return}if(d._fDiv.setCapture){d._fDiv.setCapture()}Fe.on(document,"mousemove",q);Fe.on(document,"mouseup",h);g._initX=parseInt(d._fDiv.style.left);g._initY=parseInt(d._fDiv.style.top);if(isNaN(g._initX)){g._initX=map.width-parseInt(d._fDiv.style.right)-parseInt(d._fDiv.style.width)}if(isNaN(g._initY)){g._initY=map.height-parseInt(d._fDiv.style.bottom)-parseInt(d._fDiv.style.height)}g._x1=i.pageX||i.clientX||0;g._y1=i.pageY||i.clientY||0;i.returnValue=false};var q=function(y){y=y||window.event;var v=y.pageX||y.clientX||0;var l=y.pageY||y.clientY||0;var x=v-g._x1;var u=l-g._y1;if(!d._fDiv){return}if(g._initX+x>=4&&g._initX+x+parseInt(d._fDiv.style.width)+9<=map.width){d._fDiv.style.left=g._initX+x+"px"}else{if(g._initX+x<4){d._fDiv.style.left="3px"}else{d._fDiv.style.left=map.width-parseInt(d._fDiv.style.width)-9+"px"}}if(g._initY+u>=9&&g._initY+u+parseInt(d._fDiv.style.height)+4<=map.height){d._fDiv.style.top=g._initY+u+"px"}else{if(g._initY+u<9){d._fDiv.style.top="7px"}else{d._fDiv.style.top=map.height-parseInt(d._fDiv.style.height)-5+"px"}}var i=Fe.G("cap_size");i.style.left=parseInt(d._fDiv.style.left)+2+"px";i.style.top=parseInt(d._fDiv.style.top)-23+"px";if(parseInt(i.style.top)<0){i.style.top=parseInt(d._fDiv.style.top)+2+"px"}var w=Fe.G("cap_btn_container");w.style.left=parseInt(d._fDiv.style.left)+d.capSizePx[0]-88+"px";w.style.top=parseInt(d._fDiv.style.top)+d.capSizePx[1]+7+"px";if(map.height-parseInt(w.style.top)<26){w.style.top=parseInt(w.style.top)-35+"px";w.style.left=parseInt(w.style.left)-2+"px"}};var h=function(i){Fe.un(document,"mousemove",q);Fe.un(document,"mouseup",h);if(d._fDiv.releaseCapture){d._fDiv.releaseCapture()}};Fe.on(d._fDiv,"mousedown",g);d.cm=createContextMenu([{text:"&nbsp;取消",callback:function(){d.endCapture()},width:60},{text:"&nbsp;完成",callback:function(){d.showCapture()},width:60},{text:"&nbsp;另存为",callback:function(){d.saveCapture()},width:60}],d._fDiv,"move");var k=function(u){u=u||window.event;if(u.button==2){return}if(Fe.Browser.ie&&u.button!=1){return}var l=u.target||u.srcElement;k._t=u.srcElement;if(l.setCapture){l.setCapture()}var i=l.getAttribute("_ht");if(typeof i=="undefined"){return}d._curHT=i;Fe.on(document,"mousemove",r);Fe.on(document,"mouseup",o);d._bindFuncs.push({element:document,type:"mousemove",handler:r});d._bindFuncs.push({element:document,type:"mouseup",handler:o});BMap.OperationMask.show(map);BMap.OperationMask.setCursor(d.handlerCursors[i]);k._initX=u.pageX||u.clientX;k._initY=u.pageY||u.clientY;u.cancelBubble=true;u.returnValue=false};var r=function(x){x=x||window.event;var l=x.pageX||x.clientX;var i=x.pageY||x.clientY;var C=l-k._initX;var B=i-k._initY;var w=parseInt(d._fDiv.style.left);var v=parseInt(d._fDiv.style.right);var y=parseInt(d._fDiv.style.top);var u=parseInt(d._fDiv.style.bottom);var z=d._curHT*1;switch(z){case 0:d._moveFromTop(B,y,u);break;case 1:d._moveFromRight(C,w,v);break;case 2:d._moveFromBottom(B,y,u);break;case 3:d._moveFromLeft(C,w,v);break;case 4:d._moveFromTop(B,y,u);d._moveFromLeft(C,w,v);break;case 5:d._moveFromTop(B,y,u);d._moveFromRight(C,w,v);break;case 6:d._moveFromBottom(B,y,u);d._moveFromRight(C,w,v);break;case 7:d._moveFromBottom(B,y,u);d._moveFromLeft(C,w,v);break;default:break}d._updateCapSize();d._updateHandlersPosition();var A=Fe.G("cap_btn_container");if(A){A.style.display="none"}};var o=function(l){if(k._t&&k._t.releaseCapture){k._t.releaseCapture()}Fe.un(document,"mousemove",r);Fe.un(document,"mouseup",o);BMap.OperationMask.hide();if(parseInt(d._fDiv.style.width)==0){d._fDiv.style.width="1px"}if(parseInt(d._fDiv.style.height)==0){d._fDiv.style.height="1px"}d._updateCapSize();d.capSizePx=[parseInt(d._fDiv.style.width),parseInt(d._fDiv.style.height)];if(d._temp._fromLeftToRight){delete d._temp._fromLeftToRight}if(d._temp._fromBottomToTop){delete d._temp._fromBottomToTop}d._unifyPos();var i=Fe.G("cap_btn_container");if(i){i.style.display="block";i.style.left=parseInt(d._fDiv.style.left)+d.capSizePx[0]-88+"px";i.style.top=parseInt(d._fDiv.style.top)+d.capSizePx[1]+7+"px";if(map.height-parseInt(i.style.top)<26){i.style.top=parseInt(i.style.top)-35+"px";i.style.left=parseInt(i.style.left)-2+"px"}}};for(var p=0,n=d._handlers.length;p<n;p++){Fe.on(d._handlers[p],"mousedown",k)}BMap.OperationMask.hide();var t=parseInt(d._fDiv.style.top)+parseInt(d._fDiv.style.height)+7;var m=parseInt(d._fDiv.style.left)+parseInt(d._fDiv.style.width)-88;if(isNaN(t)){t=map.height-parseInt(d._fDiv.style.bottom)+5}if(isNaN(m)){m=map.width-parseInt(d._fDiv.style.right)-90}if(map.height-t<26){t=t-35;m=m-2}var j="<div id='cap_btn_container' style='top:"+t+"px;left:"+m+"px'><div id='cap_btn_cancel' title='取消'></div><div id='cap_btn_show' title='完成'></div><div id='cap_btn_save' title='另存为'></div></div>";BMap.OperationMask.getDom(map).insertAdjacentHTML("beforeBegin",j);Fe.on(Fe.G("cap_btn_save"),"mouseover",function(i){Fe.ac(Fe.G("cap_btn_save"),"hover")});Fe.on(Fe.G("cap_btn_cancel"),"mouseover",function(i){Fe.ac(Fe.G("cap_btn_cancel"),"hover")});Fe.on(Fe.G("cap_btn_show"),"mouseover",function(i){Fe.ac(Fe.G("cap_btn_show"),"hover")});Fe.on(Fe.G("cap_btn_save"),"mouseout",function(i){Fe.rc(Fe.G("cap_btn_save"),"hover")});Fe.on(Fe.G("cap_btn_cancel"),"mouseout",function(i){Fe.rc(Fe.G("cap_btn_cancel"),"hover")});Fe.on(Fe.G("cap_btn_show"),"mouseout",function(i){Fe.rc(Fe.G("cap_btn_show"),"hover")});Fe.on(Fe.G("cap_btn_save"),"click",function(i){d.saveCapture()});Fe.on(Fe.G("cap_btn_cancel"),"click",function(i){d.endCapture()});Fe.on(Fe.G("cap_btn_show"),"click",function(i){d.showCapture()});stopBubble(s);return preventDefault(s)};Fe.on(BMap.OperationMask.getDom(map),"mousedown",b);d._bindFuncs.push({element:BMap.OperationMask.getDom(map),type:"mousedown",handler:b})};captureCtrl._hideCtrls=function(){for(var b=0,a=this.ctrlNeed2Hide.length;b<a;b++){if(this.ctrlNeed2Hide[b]&&this.ctrlNeed2Hide[b].hide){this.ctrlNeed2Hide[b].hide()}}map.closeInfoWindow();searchInViewCtrl.hidePopup()};captureCtrl._showCtrls=function(){for(var b=0,a=this.ctrlNeed2Hide.length;b<a;b++){if(this.ctrlNeed2Hide[b]&&this.ctrlNeed2Hide[b].show){this.ctrlNeed2Hide[b].show()}}searchInViewCtrl.showPopup()};captureCtrl.endCapture=function(){for(var d=0,b=this._bindFuncs.length;d<b;d++){var c=this._bindFuncs[d];Fe.un(c.element,c.type,c.handler)}this._bindFuncs.length=0;this._showCtrls();if(this.tipsLabel){this.tipsLabel.remove();this.tipsLabel=null}if(BMap.OperationMask.getDom(map).releaseCapture){BMap.OperationMask.getDom(map).releaseCapture()}BMap.OperationMask.hide();if(this.cm){destroyContextMenu(this.cm)}if(this._fDiv&&this._fDiv.parentNode){this._fDiv.parentNode.removeChild(this._fDiv);this._fDiv=null}var a=Fe.G("cap_size");if(a&&a.parentNode){a.parentNode.removeChild(a);a=null}var e=Fe.G("cap_btn_container");if(e){e.parentNode.removeChild(e);e=null}Fe.rc(Fe.G("capture"),"selected");captureCtrl._inUse=false};captureCtrl._generateHTML=function(){var a=[];a.push("<div id='cap_size' style='display:none;z-index:250'>0 x 0</div>");a.push("<div style='position:absolute;z-index:300;border:");a.push(this._opts.lineStroke+"px "+this._opts.lineStyle+" "+this._opts.lineColor+";");a.push("width:0; height:0; font-size:0'>");a.push("<div class='cap_handler' id='cap_h_tl' _ht='4' style='cursor:nw-resize;top:-4px;left:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_tr' _ht='5' style='cursor:ne-resize;top:-4px;right:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_bl' _ht='7' style='cursor:ne-resize;bottom:-4px;left:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_br' _ht='6' style='cursor:nw-resize;bottom:-4px;right:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_t' _ht='0' style='cursor:n-resize;top:-4px;left:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_l' _ht='3' style='cursor:w-resize;top:-4px;left:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_r' _ht='1' style='cursor:e-resize;top:-4px;right:-4px'></div>");a.push("<div class='cap_handler' id='cap_h_b' _ht='2' style='cursor:s-resize;bottom:-4px;left:-4px'></div>");a.push("<div style='height:100%;width:100%;opacity:"+this._opts.opacity+";");a.push("filter:alpha(opacity="+Math.round(this._opts.opacity*100)+"); background:"+this._opts.fillColor+";cursor:move'></div>");a.push("</div>");return a.join("")};captureCtrl._updateHandlersPosition=function(){var d=parseInt(this._fDiv.style.width);var c=parseInt(this._fDiv.style.height);var a=Math.abs(d/2)-4+"px";var e=Math.abs(c/2)-4+"px";var b=d-3+"px";var f=c-3+"px";this._handlers[0].style.left=a;this._handlers[1].style.left=b;this._handlers[1].style.top=e;this._handlers[2].style.left=a;this._handlers[2].style.top=f;this._handlers[3].style.top=e;this._handlers[5].style.left=b;this._handlers[6].style.left=b;this._handlers[6].style.top=f;this._handlers[7].style.top=f};captureCtrl._updateCapSize=function(){var a=Fe.G("cap_size");a.style.display="block";var b=this;if(b._fDiv.style.left!="auto"){a.style.left=parseInt(b._fDiv.style.left)+2+"px"}else{a.style.left=map.width-parseInt(b._fDiv.style.right)-parseInt(b._fDiv.style.width)+"px"}if(b._fDiv.style.top!="auto"){a.style.top=parseInt(b._fDiv.style.top)-23+"px";if(parseInt(a.style.top)<0){a.style.top=parseInt(b._fDiv.style.top)+2+"px"}}else{a.style.top=map.height-parseInt(b._fDiv.style.bottom)-parseInt(b._fDiv.style.height)-25+"px";if(parseInt(a.style.top)<0){a.style.top=map.height-parseInt(b._fDiv.style.bottom)-parseInt(b._fDiv.style.height)+"px"}}a.innerHTML=parseInt(b._fDiv.style.width)+" x "+parseInt(b._fDiv.style.height)};captureCtrl._unifyPos=function(){var a=this;if(!a._fDiv){return}if(a._fDiv.style.left=="auto"&&a._fDiv.style.right!="auto"){a._fDiv.style.left=map.width-parseInt(a._fDiv.style.right)-a.capSizePx[0]-2+"px";a._fDiv.style.right="auto"}if(a._fDiv.style.top=="auto"&&a._fDiv.style.bottom!="auto"){a._fDiv.style.top=map.height-parseInt(a._fDiv.style.bottom)-a.capSizePx[1]-2+"px";a._fDiv.style.bottom="auto"}};captureCtrl._moveFromLeft=function(b,c,d){var e=this;var a=e.capSizePx[0]-b;if(a<0){e._temp._fromLeftToRight=true;if(isNaN(c)){c=map.width-d-1}if(-a+c+8<=map.width){if(!isNaN(c)){e._fDiv.style.left=c+"px"}else{e._fDiv.style.left=map.width-d-map.capSizePx[0]-2+"px"}e._fDiv.style.right="auto";e._fDiv.style.width=-a+"px"}else{e._fDiv.style.width=map.width-c-8+"px"}}else{if(isNaN(d)){if(e._temp._fromLeftToRight){d=map.width-c-1}else{d=map.width-c-e.capSizePx[0]-2}}if(map.width-d-a>=6){e._fDiv.style.left="auto";if(!isNaN(c)){if(e._temp._fromLeftToRight){e._fDiv.style.right=map.width-c-1+"px"}else{e._fDiv.style.right=map.width-c-e.capSizePx[0]-2+"px"}}e._fDiv.style.width=a+"px"}else{e._fDiv.style.width=map.width-d-4+"px"}}};captureCtrl._moveFromRight=function(b,c,d){var e=this;var a=e.capSizePx[0]+b;if(a>=0){if(isNaN(c)){c=map.width-d-1}if(a+c+12<=map.width){if(!isNaN(c)){e._fDiv.style.left=c+"px"}else{e._fDiv.style.left=map.width-d-1+"px"}e._fDiv.style.right="auto";e._fDiv.style.width=a+"px"}else{e._fDiv.style.width=map.width-c-9+"px"}}else{if(isNaN(d)){d=map.width-c-1}if(map.width-d+a>=9){e._fDiv.style.left="auto";if(!isNaN(c)){e._fDiv.style.right=map.width-c-1+"px"}e._fDiv.style.width=-a+"px"}else{e._fDiv.style.width=map.width-d-5+"px"}}};captureCtrl._moveFromTop=function(a,c,e){var d=this;var b=d.capSizePx[1]-a;if(b<0){d._temp._fromBottomToTop=true;if(isNaN(c)){c=map.height-e-1}if(-b+c+11<=map.height){if(!isNaN(c)){d._fDiv.style.top=c+"px"}else{d._fDiv.style.top=map.height-e-map.capSizePx[1]-2+"px"}d._fDiv.style.bottom="auto";d._fDiv.style.height=-b+"px"}else{d._fDiv.style.height=map.height-c-5+"px"}}else{if(isNaN(e)){if(d._temp._fromLeftToRight){e=map.height-c-1}else{e=map.height-c-d.capSizePx[1]-2}}if(map.height-e-b>=9){d._fDiv.style.top="auto";if(!isNaN(c)){if(d._temp._fromBottomToTop){d._fDiv.style.bottom=map.height-c-1+"px"}else{d._fDiv.style.bottom=map.height-c-d.capSizePx[1]-2+"px"}}d._fDiv.style.height=b+"px"}else{d._fDiv.style.height=map.height-e-9+"px"}}};captureCtrl._moveFromBottom=function(a,c,e){var d=this;var b=d.capSizePx[1]+a;if(b>=0){if(isNaN(c)){c=map.height-e-1}if(b+c+11<=map.height){if(!isNaN(c)){d._fDiv.style.top=c+"px"}else{d._fDiv.style.top=map.height-e-1+"px"}d._fDiv.style.bottom="auto";d._fDiv.style.height=b+"px"}else{d._fDiv.style.height=map.height-c-5+"px"}}else{if(isNaN(e)){e=map.height-c-1}if(map.height-e+b>=9){d._fDiv.style.top="auto";if(!isNaN(c)){d._fDiv.style.bottom=map.height-c-1+"px"}d._fDiv.style.height=-b+"px"}else{d._fDiv.style.height=map.height-e-9+"px"}}};captureCtrl.saveCapture=function(){var e=this._getReqData(0);var d=null;if(document.getElementById("capSaveF")){d=document.getElementById("capSaveF");var c=d.getElementsByTagName("input")[2];if(c){c.value=e}}else{d=document.createElement("form");d.id="capSaveF";d.name="capSaveF";d.method="post";d.action="/";var a=document.createElement("input");a.type="hidden";a.name="qt";a.value="save";var b=document.createElement("input");b.type="hidden";b.name="newmap";b.value="1";var f=document.createElement("input");f.type="hidden";f.name="data";f.value=e;d.appendChild(a);d.appendChild(b);d.appendChild(f);document.body.appendChild(d)}d.submit();this.endCapture();return};captureCtrl.showCapture=function(){var data=this._getReqData(1);var req=getXhr();req.onreadystatechange=function(){if(req.readyState==4&&req.status==200){if(req.responseText){var json=null;try{eval("json="+req.responseText)}catch(e){captureCtrl.showErrorMsg();return}if(!json||json&&!json.content||json&&json.result&&json.result.error==1){captureCtrl.showErrorMsg();return}var url=json.content.image_url;window.open(url)}}else{if(req.readyState==4&&req.status!=200){captureCtrl.showErrorMsg()}}};req.open("POST","/");req.setRequestHeader("Content-Type","application/x-www-form-urlencoded");console.log(data);req.send("qt="+encodeURIComponent("prev")+"&newmap="+encodeURIComponent("1")+"&data="+encodeURIComponent(data));this.endCapture()};captureCtrl._getReqData=function(m){var p=this.capSizePx[0];var j=this.capSizePx[1];var f=parseInt(this._fDiv.style.left)+1/2*p;var e=parseInt(this._fDiv.style.top)+1/2*j;var n=map.pixelToPoint(new BMap.Pixel(f,e));var a=map.zoomLevel;this._getAllMarkers();this._getAllLabels();this._getAllDrawings();var k=[];if(this.areas.length>0){k.push(this.areas.join(","))}if(this.lines.length>0){k.push(this.lines.join(","))}if(this.normMkrs.length>0){this.normMkrs.sort(function(h,c){return h.zIndex-c.zIndex});var q="";for(var g=0,d=this.normMkrs.length;g<d;g++){q=q+","+this.normMkrs[g].data}k.push(q.substring(1))}if(this.destLbls.length>0){this.destLbls.sort(function(h,c){return h.zIndex-c.zIndex});var q="";for(var g=0,d=this.destLbls.length;g<d;g++){q=q+","+this.destLbls[g].data}k.push(q.substring(1))}if(this.lbls.length>0){k.push(this.lbls.join(","))}var b=k.length>0?',"coord":['+k.join(",")+"]":"";var o='{"taskId":'+m+',"function":"snap","level":'+a+',"center":"'+n.lng+" "+n.lat+'","height":'+j+',"width":'+p+',"coordtype":"M"'+b+"}";return o};captureCtrl._getAllMarkers=function(){this.normMkrs.length=0;if(map.markerDiv){for(var c=0,a=map.markerDiv.childNodes.length;c<a;c++){var b=map.temp.I(map.markerDiv.childNodes[c].hashCode);var e=b.zIndex||(b.getDom()&&b.getDom().style.zIndex);if(b.toString()=="Marker"&&b._stCode){if(b._stCode==OVERLAY_STYLE.DRV_M_MKR&&b.siblingElement&&b.siblingElement.style.visibility=="hidden"){continue}this.normMkrs.push({data:'{"type":1,"geo":"'+b.point.lng+" "+b.point.lat+'","scode":'+b._stCode+"}",zIndex:e})}if(b.getLabel()&&b.getLabel()._stCode){lbl=b.getLabel();var d=lbl.getPoint(true,[3,4]);this.normMkrs.push({data:'{"type":4,"geo":"'+d.lng+" "+d.lat+'","scode":'+lbl._stCode+',"text":"'+lbl.content+'"}',zIndex:e})}}}};captureCtrl._getAllLabels=function(){this.destLbls.length=0;this.lbls.length=0;if(map.temp.labelDiv){for(var b=0,a=map.temp.labelDiv.childNodes.length;b<a;b++){var d=map.temp.I(map.temp.labelDiv.childNodes[b].hashCode);if(d.toString()=="Label"&&d._stCode){var c=d.getPoint(true,[3,5]);if(d._stCode==OVERLAY_STYLE.DS_LBL||d._stCode==OVERLAY_STYLE.DE_LBL){this.destLbls.push({data:'{"type":1,"geo":"'+d.point.lng+" "+d.point.lat+'","scode":'+d._stCode+',"text":"'+d.content+'"}',zIndex:d.zIndex})}else{this.lbls.push('{"type":4,"geo":"'+c.lng+" "+c.lat+'","scode":'+d._stCode+',"text":"'+d.content+'"}')}}}}};captureCtrl._getAllDrawings=function(){this.lines.length=0;this.areas.length=0;var d=function(j){var f=[];for(var h=0,g=j.length;h<g;h++){f.push(j[h].lng+" "+j[h].lat)}return f.join(",").replace(/,$/,"")};if(map.palette){var e=map.palette.childNodes;for(var b=0,a=e.length;b<a;b++){var c=map.temp.I(e[b].hashCode);if(c&&c._stCode){if(c.toString()=="Polyline"){this.lines.push('{"type":2,"geo":"'+d(c.points)+'","scode":'+c._stCode+"}")}else{if(c.toString()=="Polygon"){this.areas.push('{"type":3,"geo":"'+d(c.points)+'","scode":'+c._stCode+"}")}}}}}};captureCtrl.showErrorMsg=function(){alert("抱歉，截图失败。请检查您的网络连接，并稍后再试。")};closeOtherOps=function(){closeMeasure();endCaptureMap()};var GEO_TYPE_AREA=0;var GEO_TYPE_LINE=1;var GEO_TYPE_POINT=2;var CITY_TYPE_PROV=1;var CITY_TYPE_CITY=2;var CITY_TYPE_DIST=3;var OVERLAY_STYLE={MKR_A:1,MKR_B:2,MKR_C:3,MKR_D:4,MKR_E:5,MKR_F:6,MKR_H:7,MKR_I:8,MKR_J:9,MKR_K:10,MKR:11,MKR_RCTR:12,DIS_DOT:13,BUS_STOP:14,BUS_TRANS:15,SUB_TRANS:16,DS_MKR:17,DE_MKR:18,DRV_M_MKR:19,DRV_E_MKR:20,MKR_NULL:21,VIW_LBL:30,DIS_LBL:31,DIS_T_LBL:32,DS_LBL:33,DE_LBL:34,DIR_MKR:40,ROUTE:60,BUS_ROUTE:61,WALK_ROUTE:62,DRV_ROUTE:63,DIS_LINE:64,AREA:65,H_LINE:66};function addSearchPoi(a,b,f){var e=getPoiPoint(a);if(!e){return}if(b<0||b>9){return}var d=new BMap.Icon("http://map.baidu.com/iknow/img/markers.png",{offset:[1,-13],height:25,width:23,imgOffset:[0,-25*b]});var c=new BMap.Marker(e,{icon:d,height:25,width:23});map.addOverlay(c);c._stCode=b+1;if(f){c.getDom().title=f}c.getDom().hashCode=c.hashCode;return c}var rangeSearchCenterMarker=null;function addRangeSearchCenterPoi(a,f,c){if(rangeSearchCenterMarker){rangeSearchCenterMarker.remove();rangeSearchCenterMarker=null}var e=getPoiPoint(a);if(!e){return}var d=new BMap.Icon("http://map.baidu.com/iknow/img/markers.png",{offset:[2,-12],height:25,width:23,imgOffset:[0,-250]});var b=new BMap.Marker(e,{icon:d,height:25,width:23});map.addOverlay(b);b._stCode=OVERLAY_STYLE.MKR_RCTR;if(!c){rangeSearchCenterMarker=b}if(f){b.getDom().title=f}b.getDom().hashCode=b.hashCode;return b}function addSearchInViewPoi(a,e){var d=getPoiPoint(a);if(!d){return}var c=new BMap.Icon("http://map.baidu.com/iknow/img/markers.png",{offset:[2,-12],height:25,width:23,imgOffset:[0,-300]});var b=new BMap.Marker(d,{icon:c,height:25,width:23});b._stCode=OVERLAY_STYLE.MKR_NULL;map.addOverlay(b);if(e){b.getDom().title=e}b.siblingElement.hashCode=b.hashCode;b.getDom().hashCode=b.hashCode;return b}function addSearchInViewTitle(a,d,b){var c=createSearchInViewTitle(a,d);c._stCode=OVERLAY_STYLE.VIW_LBL;if(!b||b.toString()!="Marker"){map.addOverlay(c);return c}b.setLabel(c);return c}function createSearchInViewTitle(a,e){var b=getPoiPoint(a);if(!b){return}var d=[14,-17];var c=e;if(e.replace(/[\u0100-\uffff]/g,"##").length>20){e=e.substring(0,10)+"..."}return new BMap.Label(e,{lineHeight:"15px",padding:"1px 3px",borderColor:"#a7a7a7",color:"#666",point:b,offset:d,cursor:"pointer",title:c})}function addDetailPoi(a,e){var d=getPoiPoint(a);if(!d){return}var c=new BMap.Icon("http://map.baidu.com/iknow/img/markers.png",{offset:[2,-12],height:25,width:23,imgOffset:[0,-275]});var b=new BMap.Marker(d,{icon:c,height:25,width:23});map.addOverlay(b);b._stCode=OVERLAY_STYLE.MKR;if(e){b.getDom().title=e}b.getDom().hashCode=b.hashCode;return b}function getPoiPoint(a){var c=[];var b=null;if(a.toString()=="Point"){b=a}else{if(typeof a=="string"){c=Fe.trim(a).split(",");if(c.length<2){return}c[0]=parseFloat(Fe.trim(c[0]));c[1]=parseFloat(Fe.trim(c[1]))}else{c=a.slice(0);if(c.length<2){return}}b=new BMap.Point(c[0],c[1])}return b}var ROUTE_TYPE_DEFAULT=0;var ROUTE_TYPE_BUS=1;var ROUTE_TYPE_WALK=2;var ROUTE_TYPE_DRIVE=3;function addRoute(e,d,a){var c=[{stroke:6,color:"#3a6bdb",opacity:0.65,stCode:OVERLAY_STYLE.ROUTE},{stroke:6,color:"#3a6bdb",opacity:0.75,stCode:OVERLAY_STYLE.BUS_ROUTE},{stroke:4,color:"#30a208",opacity:0.75,stCode:OVERLAY_STYLE.WALK_ROUTE},{stroke:6,color:"#3a6bdb",opacity:0.65,stCode:OVERLAY_STYLE.DRV_ROUTE}];if(typeof d=="undefined"){d=0}if(!c[d]){return}var b=c[d];var g=new BMap.Polyline(e,{weight:b.stroke,lineColor:b.color,opacity:b.opacity});map.addOverlay(g);g._stCode=c[d].stCode;g._routeType=d;if(d==ROUTE_TYPE_BUS){var f=new BMap.Polyline(e,{weight:b.stroke-2,lineColor:"#fff",opacity:0.3});g._p=f;map.addOverlay(f)}else{if(a){isDilute(g,e)}}return g}function selectRoute(b){if(!b||b.toString()!="Polyline"){return}var a=["#ff0103","#ff0103","#ff0103","#ff0103"];if(a[b._routeType]){b.setLineColor(a[b._routeType]);b._stCode=OVERLAY_STYLE.H_LINE}}function unSelectRoute(c){if(!c||c.toString()!="Polyline"){return}var b=["#3a6bdb","#3a6bdb","#30a208","#3a6bdb"];var a=[OVERLAY_STYLE.ROUTE,OVERLAY_STYLE.BUS_ROUTE,OVERLAY_STYLE.WALK_ROUTE,OVERLAY_STYLE.DRV_ROUTE];if(b[c._routeType]){c.setLineColor(b[c._routeType]);c._stCode=a[c._routeType]}}function removeRoute(a){if(a._p&&a._p.toString()=="Polyline"){a._p.remove();a._p=null}a.remove();a=null}var AREA_TYPE_NORM=0;var AREA_TYPE_PROV=1;var AREA_TYPE_DIST=2;function addArea(f,e,a){if(!f){return}var d=[{lineColor:"#0064fc",weight:2,fillColor:false,opacity:0.8,lineStyle:"dashed",stCode:OVERLAY_STYLE.AREA},{lineColor:"#0064fc",weight:2,fillColor:false,opacity:0.8,lineStyle:"dashed",stCode:OVERLAY_STYLE.AREA},{lineColor:"#0064fc",weight:2,fillColor:false,opacity:0.8,lineStyle:"dashed",stCode:OVERLAY_STYLE.AREA}];var c=e||0;if(!d[c]){return}if(a&&f.length<a){return}var b=new BMap.Polygon(f,d[c]);if(a!=null){isDilute(b,f)}map.addOverlay(b);b.setFillColor(false);b._stCode=d[c].stCode;return b}function isDilute(b,c){if(b._ps==null){b._ps=c}if(typeof(b._ps)!="string"){return}b.points=dilute(b._ps);function d(){b.setPoints("")}function a(){b.setPoints(dilute(b._ps))}map.addEventListener("zoomstart",d);map.addEventListener("zoomend",a);b.addEventListener("remove",function(){map.removeEventListener("zoomstart",d);map.removeEventListener("zoomend",a)})}function dilute(a){var b=map.zoomLevel;if(b<10){b=5;var a=a.replace(/(([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*);)(([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*);){5}/g,"$1")}else{if(b<16){b=2;var a=a.replace(/(([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*);)(([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*),([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0|[1-9]\d*);){5}/g,"$1")}}return a}function removeArea(a){if(a.toString()=="Polygon"){a.remove();a=null}}var TRANS_TYPE_BUS=0;var TRANS_TYPE_SUB=1;function addTransPoi(f,e,g){var h=[];var i=getPoiPoint(f);if(!i){return}var d=OVERLAY_STYLE.BUS_TRANS;var a=-55;switch(e){case TRANS_TYPE_BUS:a=-55;break;case TRANS_TYPE_SUB:d=OVERLAY_STYLE.SUB_TRANS;a=-76;break;default:break}var c=new BMap.Icon("http://map.baidu.com/iknow/img/trans_icons.png",{height:21,width:21,imgOffset:[0,a]});var b=new BMap.Marker(i,{icon:c,height:21,width:21});map.addOverlay(b);b._stCode=d;if(g){b.getDom().title=g}return b}function addBusStopPoi(a,f){var e=[];var d=getPoiPoint(a);if(!d){return}var c=new BMap.Icon("http://map.baidu.com/iknow/img/stop_icon.png",{height:12,width:12});var b=new BMap.Marker(d,{icon:c,height:12,width:12,baseZIndex:1500000});map.addOverlay(b);b._stCode=OVERLAY_STYLE.BUS_STOP;if(f){b.getDom().title=f}return b}var DEST_START=0;var DEST_END=1;var DEST_MIDDLE=2;var DEST_SEC=3;function addDestPoi(i,j,f,h){var l=getPoiPoint(i);if(!l){return}if(f==DEST_MIDDLE){var e=new BMap.Icon("http://map.baidu.com/iknow/img/drv_m.png",{height:11,width:11});var c=new BMap.Marker(l,{icon:e,height:11,width:11});map.addOverlay(c);c.enableDraging(true);c._stCode=OVERLAY_STYLE.DRV_M_MKR;return c}if(f==DEST_SEC){var e=new BMap.Icon("http://map.baidu.com/iknow/img/drv_m.png",{height:11,width:11,imgOffset:[0,-11]});var c=new BMap.Marker(l,{icon:e,height:11,width:11});map.addOverlay(c);c._stCode=OVERLAY_STYLE.DRV_E_MKR;return c}if(!h){var e=new BMap.Icon("http://map.baidu.com/iknow/img/dest_markers.png",{offset:[7,-14],width:42,height:34,imgOffset:[0,-34*f]});var c=new BMap.Marker(l,{icon:e,width:42,height:34});map.addOverlay(c);if(j){c.getDom().title=j}c._stCode=OVERLAY_STYLE.DS_MKR+f;return c}var k=j;if(k.length>10){k=k.substring(0,10)+"..."}var a=new BMap.Label(j,{point:l,cursor:"pointer"});a.setOffset(-12,-28);map.addOverlay(a);a._stCode=OVERLAY_STYLE.DS_LBL+f;var g=a.getDom();g.style.border="none";g.style.background="transparent";g.style.overflow="visible";g.style.zIndex=2500000+2*map.pointToPixel(l).y;g.style.cursor="url("+map.config.defaultCursor+"), default";if(!Fe.Browser.ie){Fe.on(g,"mousedown",function(){g.style.cursor="url("+map.config.draggingCursor+"), default"});Fe.on(g,"mouseup",function(){g.style.cursor="url("+map.config.defaultCursor+"), default"})}a.zIndex=g.style.zIndex;var b="";if(Fe.Browser.ie==6){b='<div class="dest_icon_left_ie6 dest'+f+'"><div></div></div><div class="dest_icon_right_ie6"><div></div><span class="dest_text_ie6">'+k+"</span></div>"}else{b='<div class="dest_icon dest'+f+'"><div class="dest_icon_right"><span class="dest_text">'+k+"</span></div></div>"}g.innerHTML=b;return a}function createDrvMidLabel(b,a){return new BMap.Label(b,{point:a,borderWidth:1,borderColor:"#999",color:"#666",padding:"2px",background:"#fff",offset:[15,-5]})}function addDrvDirIcon(b,c){var f=getPoiPoint(b);if(!f){return}if(c<0||c>12){c=0}var a=c*(-18);var e=new BMap.Icon("http://map.baidu.com/iknow/img/dest_markers.png",{width:18,height:18,imgOffset:[a,-100]});var d=new BMap.Marker(f,{icon:e,width:18,height:18});map.addOverlay(d);d._stCode=OVERLAY_STYLE.DIR_MKR+c;return d}var POI_TYPE_NORMAL=0;var POI_TYPE_BUSSTOP=1;var POI_TYPE_BUSLINE=2;var POI_TYPE_SUBSTOP=3;var POI_TYPE_SUBLINE=4;function createSearchInfoWnd(x,r){var y=x.title;var m=x.addr;var f=x.tel;var j=x.uid;var s=x.poiType;var n=x.hasDetail;var g=x.ext;if(!r){r={}}var t=r.cityCode||modelConfig.cityCode;var o=["","",""];var k=["none","none","none"];if(typeof r.tabIndex!="undefined"&&k[r.tabIndex]){o[r.tabIndex]="hover";k[r.tabIndex]="block"}else{o[0]="hover";k[0]="block"}if(!y){return null}var e=!!g;var v=240;if(e){switch(g.src_name){case"ctrip_hotel":break;case"ctrip_site":e=false;break;case"dianping":e=false;break;case"house_new":break;case"house_ershou":break;default:break}}var q=y;if(s==POI_TYPE_BUSSTOP){q=q+"-公交车站"}else{if(s==POI_TYPE_SUBSTOP){q=q+"-地铁站"}}if(q.replace(/[\u0100-\uffff]/g,"##").length>30){q=q.substring(0,14)+"..."}var a="<p class='iw_poi_title' title='"+y+"'>";a+=q;a+="</p>";var b=[];if(e&&g.pic&&g.pic.length>0){b.push("<div style='float:right;width:70px;height:70px;overflow:hidden;margin-right:16px;display:inline' title='"+y+"'><img border='0' alt='"+y+"' src='"+g.pic[0]+"'/></div>");v=320}b.push("<div class='iw_poi_content' "+(e?"style='width:220px'":"")+">");if(m){if(s==POI_TYPE_BUSSTOP||s==POI_TYPE_SUBSTOP){b.push("<p>车次："+m+"</p>")}else{b.push("<p>地址："+m+"</p>")}}if(f){b.push("<p>电话："+f+"</p>")}if(e){var p=["<p>"];if(g.title_link){for(var w=0,u=g.title_link.length;w<u;w++){p.push("<a href='"+g.title_link[w].link+"' target='_blank'>"+g.title_link[w].title+"</a>");if(w<g.title_link.length-1){p.push("&nbsp;&nbsp;")}}}b.push(p.join(""));b.push("</p>")}b.push("</div>");if(!window.iknInsertFlg){b.push("<div class='iw_poi_inter'>");b.push("<div class='nav_tab'><span id='nav_tab0' class='"+o[0]+"' onclick='switchInfoWndTab(0, \"iw_ssn\")'>到这里去</span>");b.push("<span id='nav_tab1' class='"+o[1]+"' onclick='switchInfoWndTab(1, \"iw_esn\")'>从这里出发</span>");b.push("<span id='nav_tab2' class='"+o[2]+"' onclick='switchInfoWndTab(2, \"rangekw\")'>在附近找</span></div>");b.push("<div id='iw_tab0' class='nav_tab_content' style='display:"+k[0]+"'>");b.push("<form id='iw_s_frm'>");b.push("<p>起点： <input id='iw_ssn' type='text' size='22' maxlength='100' autocomplete='off' /></p>");b.push("<div class='ic'><span><input type='submit' value='公交' />");b.push("<input id='iw_ssd_btn' type='button' class='lst' value='驾车' /></span></div>");b.push("</form></div>");b.push("<div id='iw_tab1' class='nav_tab_content' style='display:"+k[1]+"'>");b.push("<form id='iw_e_frm'>");b.push("<p>终点： <input id='iw_esn' type='text' size='22' maxlength='100' autocomplete='off'/></p>");b.push("<div class='ic'><span><input type='submit' value='公交'/>");b.push("<input id='iw_esd_btn' type='button' class='lst' value='驾车' /></span></div>");b.push("</form></div>");b.push("<div id='iw_tab2' class='nav_tab_content' style='display:"+k[2]+"'>");b.push("<div class='iw_cate_list'>");var c=["ATM","银行","宾馆","餐馆","加油站","迅驰技术"];if(j){for(var w=0,u=c.length;w<u;w++){if(w==0){b.push(generateSingleLink(c[w],j,"",t,true,y))}else{b.push(generateSingleLink(c[w],j,"",t,"",y))}}}else{for(var w=0,u=c.length;w<u;w++){if(w==0){b.push(generateSingleLinkForRange(c[w],(r.x+","+r.y),"",t,true))}else{b.push(generateSingleLinkForRange(c[w],(r.x+","+r.y),"",t))}}}b.push('<img style="margin-left:2px;vertical-align:0;border:0" src="http://map.baidu.com/iknow/img/intel.gif"/>');b.push("</div>");b.push("<div class='mt10'>");if(j){b.push('<form onsubmit=\'roundSearchByInput("rangekw", "'+j+'", null, '+t+',"'+y+"\");return false'>")}else{b.push('<form onsubmit=\'rangeSearchByInput("rangekw", '+r.x+", "+r.y+", null, + "+t+");return false'>")}b.push("其他：<input id='rangekw' type='text' size='19' maxLength='100' autocomplete='off' /> ");b.push("<input type='submit' value='搜索' />");b.push("</form></div></div>");b.push("</div>")}var h=[0,-24];if(r.forBusLine){h[1]=-6}var d=new BMap.InfoWindow(b.join(""),{title:a,height:0,width:v,offset:h,margin:[10,10,20,65]});d._config.collisions=openSearchInfoWnd._colls;d._ext={uid:j,pt:new BMap.Point(r.x,r.y),name:y,c:t,poiType:s};return d}function openSearchInfoWnd(c,a,b){if(!b){var b={}}if(c&&c.toString()=="InfoWindow"&&a.toString()=="Marker"){a.openInfoWindow(c,b);if(typeof bdMapSuggest!="undefined"){c.iw_sugg_0=new bdMapSuggest({inputid:"iw_ssn",offset:[1,0],closeB:1,qType:2,cityid:c._ext.c});c.iw_sugg_1=new bdMapSuggest({inputid:"iw_esn",offset:[1,0],closeB:1,qType:2,cityid:c._ext.c})}c.addEventListener("close",function(){if(c.iw_sugg_0){c.iw_sugg_0.disposeSug();c.iw_sugg_0=null}if(c.iw_sugg_1){c.iw_sugg_1.disposeSug();c.iw_sugg_1=null}c.removeEventListener("close",arguments.callee)});Fe.on(Fe.G("iw_s_frm"),"submit",function(g){g=window.event||g;var d=c._ext||{};if(Fe.G("iw_ssn")&&!Fe.G("iw_ssn").value){Fe.G("iw_ssn").focus()}else{var f="bse&c="+d.c+"&wd="+encodeURIComponent(Fe.G("iw_ssn").value)+"&isSingle=true&t=0&name="+encodeURIComponent(d.name)+"&uid="+d.uid+"&ptx="+d.pt.lng+"&pty="+d.pt.lat+"&poiType="+d.poiType;f=f+"&req="+encodeURIComponent(f);go(f,{cinfo:{q:f,isSingle:true,t:0,kwn:{name:d.name,uid:d.uid,pt:d.pt,poiType:d.poiType}}})}g.returnValue=false});Fe.on(Fe.G("iw_e_frm"),"submit",function(g){g=window.event||g;var d=c._ext||{};if(Fe.G("iw_esn")&&!Fe.G("iw_esn").value){Fe.G("iw_esn").focus()}else{var f="bse&c="+d.c+"&wd="+encodeURIComponent(Fe.G("iw_esn").value)+"&isSingle=true&t=1&name="+encodeURIComponent(d.name)+"&uid="+d.uid+"&ptx="+d.pt.lng+"&pty="+d.pt.lat+"&poiType="+d.poiType;f=f+"&req="+encodeURIComponent(f);go(f,{cinfo:{q:f,isSingle:true,t:1,kwn:{name:d.name,uid:d.uid,pt:d.pt,poiType:d.poiType}}})}g.returnValue=false});Fe.on(Fe.G("iw_ssd_btn"),"click",function(){var e=c._ext||{};if(Fe.G("iw_ssn")&&!Fe.G("iw_ssn").value){Fe.G("iw_ssn").focus()}else{var g="";var d=1;if(e.poiType==POI_TYPE_BUSSTOP||e.poiType==POI_TYPE_SUBSTOP){d=0}g="&en="+d+"$$"+e.uid+"$$"+e.pt.lng+","+e.pt.lat+"$$"+e.name+"$$";var f="nse&c="+e.c+"&wd="+encodeURIComponent(Fe.G("iw_ssn").value)+"&isSingle=true&t=0&name="+encodeURIComponent(e.name)+"&uid="+e.uid+"&ptx="+e.pt.lng+"&pty="+e.pt.lat+"&poiType="+e.poiType+g;f=f+"&req="+encodeURIComponent(f);go(f,{cinfo:{q:f,c:e.c,isSingle:true,t:0,kwn:{name:e.name,uid:e.uid,pt:e.pt,poiType:e.poiType}}})}});Fe.on(Fe.G("iw_esd_btn"),"click",function(){var e=c._ext||{};if(Fe.G("iw_esn")&&!Fe.G("iw_esn").value){Fe.G("iw_esn").focus()}else{var g="";var d=1;if(e.poiType==POI_TYPE_BUSSTOP||e.poiType==POI_TYPE_SUBSTOP){d=0}g="&sn="+d+"$$"+e.uid+"$$"+e.pt.lng+","+e.pt.lat+"$$"+e.name+"$$";var f="nse&c="+e.c+"&wd="+encodeURIComponent(Fe.G("iw_esn").value)+"&isSingle=true&t=1&name="+encodeURIComponent(e.name)+"&uid="+e.uid+"&ptx="+e.pt.lng+"&pty="+e.pt.lat+"&poiType="+e.poiType+g;f=f+"&req="+encodeURIComponent(f);go(f,{cinfo:{q:f,c:e.c,isSingle:true,t:1,kwn:{name:e.name,uid:e.uid,pt:e.pt,poiType:e.poiType}}})}})}}openSearchInfoWnd._colls=[[65,245],[10,10],[10,10],[10,10]];openSearchInfoWnd._MAX_BTN_W_IN_FSM=233+25;function setInfoWndCollisions(b,a){var c=openSearchInfoWnd._colls;if(!b||b&&b.length==0){if(a==1){if(!Fe.G("trafficBut")||Fe.G("trafficBut")&&Fe.G("trafficBut").style.display=="none"||Fe.G("trafficBut")&&Fe.G("trafficBut").style.visibility=="hidden"){openSearchInfoWnd._colls[1]=[159,39]}else{openSearchInfoWnd._colls[1]=[233,39]}}if(map.fullScreenMode){openSearchInfoWnd._colls[1][0]=openSearchInfoWnd._colls[1][0]+25;openSearchInfoWnd._colls[1][1]=openSearchInfoWnd._colls[1][1]+25}}else{if(map.fullScreenMode&&a==1&&b[0]<openSearchInfoWnd._MAX_BTN_W_IN_FSM){b[0]=openSearchInfoWnd._MAX_BTN_W_IN_FSM}openSearchInfoWnd._colls[a]=b.slice(0)}}function generateSingleLink(f,a,c,b,d,e){if(!d){return"<a href='javascript:void(0)' onclick='roundSearchByLink(this, \""+a+'", "'+c+'", '+b+',"'+e+"\")'>"+f+"</a>"}else{return"<a href='javascript:void(0)' onclick='roundSearchByLink(this, \""+a+'", "'+c+'", '+b+',"'+e+"\")' class='first'>"+f+"</a>"}}function generateSingleLinkForRange(e,d,b,a,c){if(!c){return"<a href='javascript:void(0)' onclick='rangeSearchByLink(this, "+d+', "'+b+'", '+a+")'>"+e+"</a>"}else{return"<a href='javascript:void(0)' onclick='rangeSearchByLink(this, "+d+', "'+b+'", '+a+")' class='first'>"+e+"</a>"}}function roundSearchByLink(a,b,d,c,f){if(a.nodeName.toLowerCase()=="a"){var e=a.innerHTML;if(e){roundSearchByValue(e,b,d,c,f)}}}function roundSearchByInput(a,b,e,c,d){if(Fe.G(a)){if(Fe.G(a).value){roundSearchByValue(Fe.G(a).value,b,e,c,d)}else{Fe.G(a).focus();return false}}}function roundSearchByValue(f,a,e,c,d){if(f){var b=2000;if(e&&Fe.G(e)){b=Fe.G(e).value}roundSearch(a,{r:b,c:c,wd:encodeURIComponent(f),qy:encodeURIComponent(d)})}}function roundSearch(b,d){var e="";for(var a in d){e=e+"&"+a+"="+d[a]}var c="nb"+e+"&uid="+b;go(c)}function rangeSearchByInput(b,a,e,d,c){if(Fe.G(b)){if(Fe.G(b).value){rangeSearchByValue(Fe.G(b).value,a,e,d,c)}else{Fe.G(b).focus()}}}function rangeSearchByLink(b,a,f,d,c){if(b.nodeName.toLowerCase()=="a"){var e=b.innerHTML;if(e){rangeSearchByValue(e,a,f,d,c)}}}function rangeSearchByValue(k,j,g,a,h){if(k){var b=2000;if(a&&Fe.G(a)){b=Fe.G(a).value}j=j*1;g=g*1;b=b*1;var e=j-b;var i=g-b;var c=j+b;var f=g+b;var d="("+e+","+i+";"+c+","+f+")";rangeSearch({ar:d,wd:encodeURIComponent(k),c:h},new BMap.Point(j,g),b)}}function rangeSearch(e,a,d){if(!e){return}var f="";for(var b in e){f=f+"&"+b+"="+e[b]}var c="?bd"+f;go("tpl:PoiSearch"+c+"&r="+d,{cinfo:{searchByContextMenu:true,centerPoint:a,radius:d}})}function searchDrv(c,f,b){var d="";var a="";if(c==0){d=Fe.G(f).value;if(!d){Fe.G(f).focus();return}a=b}else{if(c==1){d=f;a=Fe.G(b).value;if(!a){Fe.G(b).focus();return}}}if(!d||!a){return}var e=modelConfig.cityCode;go("nav&c="+e+"&sc="+e+"&ec="+e+"&sn=2$$$$$$"+encodeURIComponent(d)+"$$&en=2$$$$$$"+encodeURIComponent(a)+"$$")}function switchInfoWndTab(c,h){var f=[Fe.G("nav_tab0"),Fe.G("nav_tab1"),Fe.G("nav_tab2")];var a=[Fe.G("iw_tab0"),Fe.G("iw_tab1"),Fe.G("iw_tab2")];if(f[c]){Fe.ac(f[c],"hover")}if(a[c]){a[c].style.display="block"}for(var d=0,b=f.length;d<b;d++){if(d!=c){Fe.rc(f[d],"hover");a[d].style.display="none"}}if(h&&Fe.G(h)){try{Fe.G(h).focus()}catch(g){setTimeout(function(){try{Fe.G(h).focus()}catch(i){}},100)}}}function createRangeInfoWnd(a){if(!a){return}return createSearchInfoWnd({title:"未知地点",poiType:0},{x:a.lng,y:a.lat,tabIndex:2})}function exitRangeSearch(){if(rangeSearchCenterMarker){rangeSearchCenterMarker.remove();rangeSearchCenterMarker=null}}function createTransInfoWnd(d){var o=d.title;var m=d.content;var a=d.curIndex;var n=d.total;var g=d.nextInfo;var f=d.nextTransCbk;var l=d.zoomTransCbk;var j=d.obj;if(!o){return}var k=o;if(k.replace(/[\u0100-\uffff]/g,"##").length>26){k=k.substring(0,12)+"..."}var i=["<p class='iw_poi_title' title='"+o+"'>"+k];i.push('<a id="trans_zoom_out" style="display:none" href="javascript:void(0)">缩小</a>');i.push('<a id="trans_zoom_in" href="javascript:void(0)">放大</a></td>');i.push("</p>");var p=["<div class='iw_poi_content'>"];if(m){p.push("<div class='iw_trans_content'>"+m+"</div>")}p.push('<table width="99%" cols="2" class="iw_trans_nav"><tbody><tr>');p.push('<td nowrap="nowrap" width="50%" align="left">');if(a==0){p.push('<span class="trans_disabled" >上一步</span>')}else{p.push('<a id="trans_prev" href="javascript:void(0)">上一步</a>')}p.push("</td>");p.push('<td nowrap="nowrap" width="50%" align="right">');if(a==n-1){p.push('<span class="trans_disabled" >下一步</span>')}else{var c=g;if(c.replace(/[\u0100-\uffff]/g,"##").length>25){c=c.substring(0,11)+"..."}p.push('<a id="trans_next" href="javascript:void(0)">下一步</a><span style="color:#6b6b6b" title="'+g+'">('+c+")</span>")}p.push("</td></tr></tbody></table>");var h=[0,-10];if(a==0||a==n-1){h[1]=-30}var e=new BMap.InfoWindow(p.join(""),{title:i.join(""),height:0,width:240,offset:h,margin:[10,10,20,10]});e._config.collisions=openSearchInfoWnd._colls;e.addEventListener("open",function(){Fe.on(Fe.G("trans_prev"),"click",function(){if(f&&typeof f=="function"){f(a-1,j)}});Fe.on(Fe.G("trans_next"),"click",function(){if(f&&typeof f=="function"){f(a+1,j)}});Fe.on(Fe.G("trans_zoom_in"),"click",function(){if(l&&typeof l=="function"){l(0,j)}Fe.G("trans_zoom_in").style.display="none";Fe.G("trans_zoom_out").style.display="inline"});Fe.on(Fe.G("trans_zoom_out"),"click",function(){if(l&&typeof l=="function"){l(1,j)}Fe.G("trans_zoom_in").style.display="inline";Fe.G("trans_zoom_out").style.display="none"});b()});var b=function(){if(map.zoomLevel==BMap.MapType[map.mapType].zoomLevelMax){if(Fe.G("trans_zoom_in")){Fe.G("trans_zoom_in").style.display="none";Fe.G("trans_zoom_out").style.display="inline"}}else{if(Fe.G("trans_zoom_out")){Fe.G("trans_zoom_in").style.display="inline";Fe.G("trans_zoom_out").style.display="none"}}};map.addEventListener("zoomend",b);e.addEventListener("close",function(){map.removeEventListener("zoomend",b)});return e}function createContextMenu(d,c,g){var a=new BMap.ContextMenu({container:c});if(!c||c===map){map.addContextMenu(a)}else{a.initialize(map)}for(var e=0,b=d.length;e<b;e++){var f=d[e];if(!f.separator){a.addItem(new BMap.MenuItem(f.text,f.callback||function(){},f.width||100,f.id))}else{a.addDivider()}}a.setCursor(g);return a}function destroyContextMenu(a){if(a&&a.destroy){a.destroy();a=null}}function setSearchResult(a){if(Fe.G("rcInfo")){Fe.G("rcInfo").innerHTML=a}}function showLoading(b){var a=Fe.G("loading");if(a){a.innerHTML=b||"正在加载地图，请稍候...";a.style.display="inline";if(map){a.style.left=(map.width-170)/2+"px";a.style.top=(map.height-20)/2+7+"px"}}setTimeout(function(){hideLoading()},1000)}function hideLoading(){if(Fe.G("loading")){Fe.G("loading").style.display="none"}}function addDrRoute(x,e){if(!window.dropRoutes){window.dropRoutes=[]}if(e.tempRoute){unSelectRoute(e.tempRoute);removeRoute(e.tempRoute)}e.onRemoveTips();e.mapZoomLevel=map.zoomLevel;if(e.driveBounds.length>0){var v=getBPoints(e.driveBounds);if(e.drag==0&&!x){map.getBestMap(v,60)}}var f=Math.pow(2,BMap.MapType[map.mapType].zoomLevelMax-map.zoomLevel-3);var t=e.routePoints;var d=map.pixelToPoint({x:-map.width*5,y:map.height*5},4);var c=map.pixelToPoint({x:map.width*5,y:-map.height*5},4);var q=new BMap.Bounds(d.lng,d.lat,c.lng,c.lat);for(var y=0;y<t.length;y++){var z=t[y];var o=[];var k=new Date().getTime();for(var u=0;u<z.length;u++){if(q.intersects(e.s2Bounds(z[u].b))){var r=z[u].p;var b=2;var w=cutPoints(r,f);var m=[];var s=w.split(";");for(var h=0;h<s.length;h++){var a=s[h].split(",");var g=new BMap.Point(a[0],a[1]);if(q.containsPoint(g)){o.push(g)}}}}if(!e.draging&&e.sended==0){var B=e;if(x==false){var A=addRoute(o,ROUTE_TYPE_DRIVE);A.index=y;A.addEventListener("onmouseover",function(i){B.onRouteOver(i)});A.addEventListener("onmousemove",function(i){B.removeTimer(i)});A.addEventListener("onmouseout",function(i){B.onRouteOut(i)});window.dropRoutes.push(A)}else{var p=window.dropRoutes[y];if(p){p.setPoints(o)}}}}}function getClickMarker(a,b){b.openInfoWindow(a)}function showDetail(b,a,d){var c="http://"+window.location.host+"/";window.location.pathname;if(a==POI_TYPE_BUSLINE||a==POI_TYPE_SUBLINE){c+="?s="+encodeURIComponent("bsl&uid="+b+"&c="+d+"&newmap=1")+"&newmap=1"}else{c+="?s="+encodeURIComponent("inf&uid="+b+"&c="+d+"&newmap=1&it="+STAT_INF_NORMAL)+"&newmap=1"}window.open(c)}function Page(a,e,b){Fe.BaseClass.call(this);if(!a){return}this.container=(typeof(a)=="object")?a:Fe.G(a);this.page=1;this.pageCount=100;this.argName="pg";this.pagecap=4;this.callback=e;this.update=true;var c={page:1,totalCount:100,pageCount:100,pagecap:4,argName:"pg",update:true};if(!b){b=c}for(var d in b){if(typeof(b[d])!="undefined"){this[d]=b[d]}}this.render()}Fe.extend(Page.prototype,{render:function(){this.initialize()},initialize:function(){this.checkPages();this.container.innerHTML=this.createHtml()},checkPages:function(){if(isNaN(parseInt(this.page))){this.page=1}if(isNaN(parseInt(this.pageCount))){this.pageCount=1}if(this.page<1){this.page=1}if(this.pageCount<1){this.pageCount=1}if(this.page>this.pageCount){this.page=this.pageCount}this.page=parseInt(this.page);this.pageCount=parseInt(this.pageCount)},getPage:function(){var b=location.search;var c=new RegExp("[?&]?"+this.argName+"=([^&]*)[&$]?","gi");var a=b.match(c);this.page=RegExp.$1},createHtml:function(){var g=[],c=this.page-1,b=this.page+1;g.push('<p class="page">');if(c<1){}else{if(this.page>=this.pagecap){g.push('<span><a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').toPage(1);\">首页</a></span>")}g.push('<span><a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').toPage("+c+');">上一页</a></span>')}if(this.page<this.pagecap){if(this.page%this.pagecap==0){var f=this.page-this.pagecap-1}else{var f=this.page-this.page%this.pagecap+1}var a=f+this.pagecap-1}else{var h=Math.floor(this.pagecap/2);var e=this.pagecap%2-1;if(this.pageCount>this.page+h){var a=this.page+h;var f=this.page-h-e}else{var a=this.pageCount;var f=this.page-h-e}}if(this.page>=this.pageCount-this.pagecap&&this.page>=this.pagecap){var f=this.pageCount-this.pagecap+1}for(var d=f;d<=a;d++){if(d>0){if(d==this.page){g.push("<span>"+d+"</span>")}else{if(d>=1&&d<=this.pageCount){g.push('<span><a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').toPage("+d+');">['+d+"]</a></span>")}}}}if(b>this.pageCount){}else{g.push('<span><a href="javascript:void(0)" onclick="Instance(\''+this.hashCode+"').toPage("+b+');">下一页</a></span>')}g.push("</p>");return g.join("")},toPage:function(b){var a=b?b:1;if(typeof(this.callback)=="function"){this.callback(a);this.page=a}if(this.update){this.render()}}});var pageComm={insertTxtStatu:function(){},insertFun:function(b,a){pageComm[b]=a},doFun:function(b,a){switch(b){case"insertTxtStatu":if(pageComm[b]){pageComm[b](a)}break}}};function replaceRoute(d,c){var b=c.split(",");for(var a=0,e=b.length;a<e;a++){switch(b[a]){case"strong":d=d.replace(/<strong>|<\/strong>|<STRONG>|<\/STRONG>/g,"");break;case"span":d=d.replace(/<span>|<\/span>|<SPAN>|<\/SPAN>/g,"");break;case"p":d=d.replace(/<p>|<\/p>|<P>|<\/P>/g,"");break;case"group":d=d.replace(/<group>|<\/group>|<GROUP>|<\/GROUP>/g,"");break}}return d}function parentInsertMap(s){var b={url:"",info:""};if(s){var e=new Array();switch(ModelMgr.mainModel._className){case"PoiSearch":if(ModelMgr.mainModel.curSelIndex>-1){var g=ModelMgr.mainModel.json.content[ModelMgr.mainModel.curSelIndex];e.push(g.name+"\n");if(g.addr&&g.addr!=""){e.push("地址："+g.addr)}}break;case"BusTrans":if(ModelMgr.mainModel.currentIndex>-1){var q=ModelMgr.mainModel.currentIndex;var g=ModelMgr.mainModel.json.content[q].lines[0];e.push("公交线路：");var c=Fe.G("blInfo_"+q).innerHTML;e.push(c.substring(0,c.toLowerCase().indexOf("<span")));e.push("，全程约");e.push(Fe.G("blDis_"+q).innerHTML);e.push("\n");e.push("1、从"+Fe.G("startInfo_"+q).innerHTML);var l=Fe.G("trans_"+q).getElementsByTagName("TR");for(var k=0,d=l.length;k<d;k++){if(l[k].getElementsByTagName("TD").length>0){var a=l[k].getElementsByTagName("TD")[0];if(a.getElementsByTagName("P").length>0){var m=a.getElementsByTagName("P");if(m.length>1){e.push(replaceRoute(m[0].innerHTML,"strong"));e.push("（也可乘坐");var p=m[1].getElementsByTagName("A");for(var h=0,r=p.length;h<r;h++){if(h==0){e.push(p[h].innerHTML)}else{e.push("、"+p[h].innerHTML)}}e.push("）")}else{e.push(replaceRoute(m[0].innerHTML,"strong"))}}else{e.push(replaceRoute(a.innerHTML,"strong"))}}if(k!=l.length-1){e.push("\n"+(k+2)+"、")}}}break;case"NavTrans":if(ModelMgr.mainModel.json.result.total>0){e.push("驾车路线：全程");e.push(Fe.G("navDis").innerHTML+"\n");e.push("起点："+Fe.G("startInfo").innerHTML+"\n");var t=Fe.G("table_info");if(t&&t.getElementsByTagName("TR").length>0){var f=t.getElementsByTagName("TR");for(var k=0,d=f.length;k<d;k++){if(f[k].getElementsByTagName("TH").length>0){e.push(f[k].getElementsByTagName("TH")[0].innerHTML)}if(f[k].getElementsByTagName("TD").length>0){var a=f[k].getElementsByTagName("TD")[0];if(a.innerHTML.toLowerCase().indexOf("</group>")>-1){var o=a.innerHTML;e.push(replaceRoute(o.substr(0,o.toLowerCase().indexOf("</group>")),"group"))}else{e.push(replaceRoute(a.innerHTML,"strong,span"))}}e.push("\n")}}e.push("终点："+Fe.G("endInfo").innerHTML)}break}b.info=encodeURIComponent(e.join(""))}Share.mapInfo.iknowflg=1;Share.mapInfo.newmap=1;b.url=Share.getLink();return b}function parentFullScr(){window.iknInsertFlg=false;var c=/iknowflg=([^\s&]+)/;var b=location.href.match(c);if(b&&b.length==2){if(b[1].toString()=="1"){window.iknInsertFlg=true;Fe.G("search").style.display="none";Fe.G("resPanel").style.display="none";Fe.G("shad").style.display="none";Fe.G("wrapper").style.marginLeft="0";Fe.G("MapHolder").style.marginTop="0";var a=getClientSize();Fe.G("MapHolder").style.width=a.width+"px";Fe.G("MapHolder").style.height=a.height+"px"}}}var clickCityData=[{n:"北京市",p:"12959136.03,4825197.38",l:4},{n:"昆明市",p:"11465436.7,2763224.69",l:4},{n:"南宁市",p:"12133576.78,2594028.7",l:4},{n:"成都市",p:"11685248.88,3567151.84",l:4},{n:"重庆市",p:"11979846.38,3367582.53",l:4},{n:"兰州市",p:"11669160.65,4184481.62",l:4},{n:"银川市",p:"11902898.83,4506373.5",l:4},{n:"石家庄市",p:"12917812.4,4699586.74",l:4},{n:"天津市",p:"13148294.34,4712296.83",l:4},{n:"济南市",p:"13084581.37,4307507.59",l:4},{n:"长春市",p:"14021696.47,5407899.41",l:4},{n:"哈尔滨市",p:"14186501.36,5782186.15",l:4},{n:"上海市",p:"13553148.5,3691129.98",l:4},{n:"南京市",p:"13334398.22,3759110.08",l:4},{n:"合肥市",p:"13130460.54,3670544.86",l:4},{n:"武汉市",p:"12804558.82,3438883.15",l:4},{n:"杭州市",p:"13430521.4,3449725.46",l:4},{n:"香港特別行政区",p:"12714333.69,2538103.92",l:4},{n:"澳门特別行政区",p:"12642583.48,2514883.38",l:4},{n:"太原市",p:"12529077.01,4535262.32",l:4},{n:"呼和浩特市",p:"12439719.97,4961446.57",l:4},{n:"沈阳市",p:"13740366.03,5103661.8",l:4},{n:"福州市",p:"13280713.93,2989935.97",l:4},{n:"南昌市",p:"12910017.55,3308071.83",l:4},{n:"郑州市",p:"12648663.61,4105852.45",l:4},{n:"广州市",p:"12609307.83,2631271.83",l:4},{n:"长沙市",p:"12572347.48,3258455.64",l:4},{n:"海口市",p:"12283403.23,2262634.65",l:4},{n:"贵阳市",p:"11870519.66,3060500.8",l:4},{n:"拉萨市",p:"10143520,3437204.04",l:4},{n:"西安市",p:"12126852.48,4041048.13",l:4},{n:"西宁市",p:"11330424.55,4360836.12",l:4},{n:"乌鲁木齐市",p:"9753667.88,5409369.63",l:4},{n:"北京市",p:"12959136.03,4825197.38",l:5},{n:"天津市",p:"13048294.34,4712296.83",l:5},{n:"上海市",p:"13523648.5,3641129.98",l:5},{n:"重庆市",p:"11849846.38,3437582.53",l:5},{n:"香港特別行政区",p:"12714333.69,2538103.92",l:5},{n:"澳门特別行政区",p:"12642583.48,2514883.38",l:5},{n:"石家庄市",p:"12747812.4,4559586.74",l:5},{n:"唐山市",p:"13156656.16,4785778.65",l:7},{n:"秦皇岛市",p:"13314894.28,4829754.58",l:7},{n:"邯郸市",p:"12746205.45,4360272.57",l:7},{n:"邢台市",p:"12747493.44,4423803.15",l:8},{n:"保定市",p:"12854312.8,4677428.01",l:7},{n:"张家口市",p:"12790084.63,4959101.33",l:7},{n:"承德市",p:"13130326.91,4981742.46",l:7},{n:"沧州市",p:"13007293.7,4596691.7",l:7},{n:"廊坊市",p:"12992581.76,4769905.8",l:7},{n:"衡水市",p:"12880175.93,4516789.37",l:8},{n:"太原市",p:"12529077.01,4535262.32",l:5},{n:"大同市",p:"12613364.27,4850167.42",l:7},{n:"阳泉市",p:"12644591.26,4533525.33",l:8},{n:"长治市",p:"12593102.2,4302896.69",l:7},{n:"晋城市",p:"12563460.95,4206462.32",l:7},{n:"朔州市",p:"12516827.83,4742810.65",l:7},{n:"晋中市",p:"12552283.26,4509774.55",l:8},{n:"运城市",p:"12358083.71,4143552.84",l:7},{n:"忻州市",p:"12550781.32,4612328.73",l:7},{n:"临汾市",p:"12414951.46,4288092.81",l:7},{n:"吕梁市",p:"12373354.26,4486213.29",l:7},{n:"呼和浩特市",p:"12439719.97,4961446.57",l:5},{n:"包头市",p:"12228323.64,4934673.82",l:7},{n:"乌海市",p:"11892430.44,4793517.95",l:7},{n:"赤峰市",p:"13235547.33,5171648.96",l:7},{n:"通辽市",p:"13611472.47,5377912.47",l:7},{n:"鄂尔多斯市",p:"12248410.02,4812809.03",l:7},{n:"呼伦贝尔市",p:"13333153.54,6279368.64",l:7},{n:"巴彦淖尔市",p:"11955257.08,4947259.83",l:7},{n:"乌兰察布市",p:"12594852.29,4984078.1",l:7},{n:"兴安盟",p:"13588865.67,5762892.65",l:7},{n:"锡林郭勒盟",p:"12919226.01,5426155.97",l:7},{n:"阿拉善盟",p:"11770533.41,4674264.1",l:8},{n:"沈阳市",p:"13740366.03,5103661.8",l:5},{n:"大连市",p:"13538973.73,4683025.52",l:7},{n:"鞍山市",p:"13692513.69,5000950.08",l:7},{n:"抚顺市",p:"13799388.03,5114977.65",l:8},{n:"本溪市",p:"13778643.21,5028229.05",l:8},{n:"丹东市",p:"13847313.38,4857753.87",l:7},{n:"锦州市",p:"13485599,4998700.1",l:7},{n:"营口市",p:"13608006.02,4936051.67",l:8},{n:"阜新市",p:"13545067.45,5136335.56",l:7},{n:"辽阳市",p:"13712416.85,5024584.95",l:8},{n:"盘锦市",p:"13589876.45,5002667.8",l:8},{n:"铁岭市",p:"13787274.79,5175928.41",l:7},{n:"朝阳市",p:"13409297.34,5069601.1",l:7},{n:"葫芦岛市",p:"13452253.78,4942439.12",l:8},{n:"长春市",p:"13951696.47,5407899.41",l:5},{n:"吉林市",p:"14088310.69,5411361.75",l:7},{n:"四平市",p:"13843448.11,5308670.02",l:7},{n:"辽源市",p:"13931790.56,5266534.49",l:8},{n:"通化市",p:"14020458.02,5092482.52",l:7},{n:"白山市",p:"14074316.42,5124029.48",l:8},{n:"松原市",p:"13896319.29,5614174.46",l:7},{n:"白城市",p:"13675219.01,5689684.01",l:7},{n:"延边朝鲜族自治州",p:"14417763.73,5266998.98",l:7},{n:"哈尔滨市",p:"14086501.36,5722186.15",l:5},{n:"齐齐哈尔市",p:"13795282.3,5969334.56",l:7},{n:"鸡西市",p:"14580807.82,5638827.82",l:7},{n:"鹤岗市",p:"14505601.55,5968656.02",l:7},{n:"双鸭山市",p:"14601427.65,5854241.34",l:8},{n:"大庆市",p:"13927324.91,5844873.47",l:7},{n:"伊春市",p:"14350402.78,6030712.32",l:7},{n:"佳木斯市",p:"14508059.86,5878973.81",l:7},{n:"七台河市",p:"14584081.67,5713695.85",l:7},{n:"牡丹江市",p:"14430063.01,5527661.89",l:7},{n:"黑河市",p:"14196243.34,6457183.7",l:7},{n:"绥化市",p:"14134937.47,5855417.31",l:7},{n:"大兴安岭地区",p:"13838935.81,6763930.17",l:7},{n:"南京市",p:"13224398.22,3749110.08",l:5},{n:"无锡市",p:"13392933.01,3684625.08",l:8},{n:"徐州市",p:"13046582.92,4040227.55",l:7},{n:"常州市",p:"13356312.14,3716455.43",l:7},{n:"苏州市",p:"13424367.52,3650025.6",l:7},{n:"南通市",p:"13458671.66,3738891.76",l:8},{n:"连云港市",p:"13272588.31,4085285.7",l:8},{n:"淮安市",p:"13249614.18,3953528.85",l:7},{n:"盐城市",p:"13377215.62,3919501.88",l:7},{n:"扬州市",p:"13293917.59,3792837.54",l:8},{n:"镇江市",p:"13298749.33,3767384.26",l:8},{n:"泰州市",p:"13350640.59,3800783.56",l:7},{n:"宿迁市",p:"13167237.96,4000367.15",l:8},{n:"杭州市",p:"13380521.4,3509725.46",l:5},{n:"宁波市",p:"13531717.19,3466700.47",l:7},{n:"温州市",p:"13437056.61,3228862.38",l:7},{n:"嘉兴市",p:"13442516.01,3578433.26",l:7},{n:"湖州市",p:"13368882.17,3597591.37",l:8},{n:"绍兴市",p:"13423534.39,3483350.89",l:8},{n:"金华市",p:"13319962.71,3365440.15",l:7},{n:"衢州市",p:"13233814.51,3347380.57",l:8},{n:"舟山市",p:"13604984.13,3480848.35",l:8},{n:"台州市",p:"13517355.59,3311823.54",l:7},{n:"丽水市",p:"13350634.45,3288178.9",l:8},{n:"合肥市",p:"13050460.54,3720544.86",l:5},{n:"芜湖市",p:"13179464.98,3655185.37",l:7},{n:"蚌埠市",p:"13068493.69,3861457.33",l:7},{n:"淮南市",p:"13025559.53,3823189.84",l:8},{n:"马鞍山市",p:"13192758.45,3701721.87",l:8},{n:"淮北市",p:"13002797.48,3999425.85",l:8},{n:"铜陵市",p:"13116556.18,3603277.27",l:8},{n:"安庆市",p:"13031623.75,3550019.08",l:7},{n:"黄山市",p:"13174278.86,3446439.23",l:7},{n:"滁州市",p:"13171837.94,3780786.48",l:8},{n:"阜阳市",p:"12893215.16,3858085.78",l:7},{n:"宿州市",p:"13021231.7,3958276.71",l:7},{n:"巢湖市",p:"13123851.59,3691564.79",l:8},{n:"六安市",p:"12970198.74,3707970.37",l:8},{n:"亳州市",p:"12889497.48,3985791.77",l:7},{n:"池州市",p:"13079874.8,3567450.98",l:8},{n:"宣城市",p:"13221018.86,3603632.56",l:8},{n:"福州市",p:"13280713.93,2989935.97",l:5},{n:"厦门市",p:"13146513.06,2794855.77",l:7},{n:"莆田市",p:"13248738.85,2913804.66",l:7},{n:"三明市",p:"13096399.79,3013435.8",l:8},{n:"泉州市",p:"13201910.12,2846954.45",l:8},{n:"漳州市",p:"13097299.4,2798905.67",l:8},{n:"南平市",p:"13156351.9,3060177",l:7},{n:"龙岩市",p:"13029047.54,2870546.66",l:7},{n:"宁德市",p:"13306472.99,3063294.93",l:7},{n:"南昌市",p:"12910017.55,3308071.83",l:5},{n:"景德镇市",p:"13045488.05,3394401.41",l:7},{n:"萍乡市",p:"12675159.81,3182197.09",l:8},{n:"九江市",p:"12914084.97,3445118.73",l:7},{n:"新余市",p:"12793320.28,3206680.44",l:8},{n:"鹰潭市",p:"13032952.25,3262112.41",l:8},{n:"赣州市",p:"12795185.35,2959890.57",l:7},{n:"吉安市",p:"12801884.97,3118790.33",l:7},{n:"宜春市",p:"12736934.92,3206538.71",l:7},{n:"抚州市",p:"12953213,3222556.21",l:7},{n:"上饶市",p:"13133880.04,3285299.92",l:7},{n:"济南市",p:"13024581.37,4367507.59",l:5},{n:"青岛市",p:"13401831.29,4285182.82",l:7},{n:"淄博市",p:"13142686.3,4388052.83",l:7},{n:"枣庄市",p:"13061274.78,4114277.91",l:7},{n:"东营市",p:"13211656.35,4474393.79",l:7},{n:"烟台市",p:"13520352.99,4478575.49",l:7},{n:"潍坊市",p:"13265878.88,4373424.04",l:7},{n:"济宁市",p:"12979324.04,4196136.66",l:7},{n:"泰安市",p:"13034988.61,4303535.5",l:7},{n:"威海市",p:"13595631.29,4485000.06",l:8},{n:"日照市",p:"13307109.51,4195766.38",l:7},{n:"莱芜市",p:"13100456.67,4305551.31",l:8},{n:"临沂市",p:"13175462.45,4147217.21",l:7},{n:"德州市",p:"12947622.04,4476813.41",l:7},{n:"聊城市",p:"12912310.75,4338690.92",l:7},{n:"滨州市",p:"13134584.6,4466450.28",l:8},{n:"菏泽市",p:"12856033.48,4171820.25",l:7},{n:"郑州市",p:"12648663.61,4105852.45",l:5},{n:"开封市",p:"12725500.83,4112517.32",l:8},{n:"洛阳市",p:"12519082.39,4088441.36",l:7},{n:"平顶山市",p:"12614390.72,3969016.16",l:7},{n:"安阳市",p:"12735043.36,4289478.97",l:7},{n:"鹤壁市",p:"12711802.8,4262428.36",l:8},{n:"新乡市",p:"12683052.11,4179998.27",l:7},{n:"焦作市",p:"12606908.19,4169148.29",l:8},{n:"濮阳市",p:"12806228.38,4243123.16",l:8},{n:"许昌市",p:"12674841.33,4010264.96",l:8},{n:"漯河市",p:"12693143.11,3949716.47",l:8},{n:"三门峡市",p:"12379841.12,4110225.01",l:8},{n:"南阳市",p:"12527475.32,3871404.82",l:7},{n:"商丘市",p:"12875114.84,4065382.71",l:7},{n:"信阳市",p:"12698935.02,3757290.11",l:7},{n:"周口市",p:"12764020.8,3955188.99",l:7},{n:"驻马店市",p:"12695259.9,3870201.61",l:7},{n:"武汉市",p:"12724558.82,3558883.15",l:5},{n:"黄石市",p:"12806831.16,3508246.06",l:8},{n:"十堰市",p:"12333819.83,3826557.97",l:7},{n:"宜昌市",p:"12389264.78,3571550.15",l:7},{n:"襄樊市",p:"12485804.42,3744176.48",l:7},{n:"鄂州市",p:"12790674.54,3533243.76",l:10},{n:"荆门市",p:"12490831.2,3615936.83",l:8},{n:"孝感市",p:"12681976.45,3601581.31",l:8},{n:"荆州市",p:"12495313.2,3525594.67",l:8},{n:"黄冈市",p:"12788727.31,3541014.86",l:8},{n:"咸宁市",p:"12727136.79,3462404.52",l:7},{n:"随州市",p:"12622531.73,3700874.41",l:8},{n:"恩施土家族苗族自治州",p:"12189032.67,3517579.64",l:7},{n:"仙桃市",p:"12630567.86,3529164.83",l:9},{n:"潜江市",p:"12568735.44,3534321.2",l:9},{n:"天门市",p:"12598443.93,3567930.91",l:9},{n:"神农架林区",p:"12321205.2,3707164.42",l:9},{n:"长沙市",p:"12572347.48,3258455.64",l:5},{n:"株洲市",p:"12594927.63,3207920.8",l:7},{n:"湘潭市",p:"12573615.87,3208214.06",l:10},{n:"衡阳市",p:"12532300.4,3091412.15",l:7},{n:"邵阳市",p:"12409390.43,3134535.06",l:7},{n:"岳阳市",p:"12594102,3400788.63",l:7},{n:"常德市",p:"12435079.12,3359523.26",l:7},{n:"张家界市",p:"12299442.66,3370126.24",l:7},{n:"益阳市",p:"12508177.66,3299123.14",l:8},{n:"郴州市",p:"12581582.51,2952694.08",l:7},{n:"永州市",p:"12425662.51,3032983.5",l:8},{n:"怀化市",p:"12245712.5,3174098.87",l:7},{n:"娄底市",p:"12468037.65,3191557.89",l:8},{n:"湘西土家族苗族自治州",p:"12216983.61,3268959.39",l:7},{n:"广州市",p:"12609307.83,2631271.83",l:5},{n:"韶关市",p:"12646446.31,2835068.76",l:7},{n:"深圳市",p:"12697727.1,2560985.72",l:8},{n:"珠海市",p:"12644173.47,2528423.41",l:10},{n:"汕头市",p:"12989836.15,2658196.76",l:7},{n:"佛山市",p:"12593519.42,2618810.41",l:10},{n:"江门市",p:"12589077.06,2565305.02",l:7},{n:"湛江市",p:"12286019.39,2409244.57",l:7},{n:"茂名市",p:"12348999.61,2455913.03",l:8},{n:"肇庆市",p:"12520445.64,2621563.68",l:8},{n:"惠州市",p:"12737692.87,2629228.47",l:7},{n:"梅州市",p:"12927552.25,2771587.26",l:7},{n:"汕尾市",p:"12844409.79,2590115.95",l:8},{n:"河源市",p:"12769271.56,2705584.51",l:7},{n:"阳江市",p:"12466694.44,2479195.46",l:7},{n:"清远市",p:"12586213.67,2698112.83",l:7},{n:"东莞市",p:"12663617.76,2618331.04",l:8},{n:"中山市",p:"12623653.08,2557824.08",l:8},{n:"潮州市",p:"12983266.14,2695080.32",l:8},{n:"揭阳市",p:"12955409.7,2682130.11",l:8},{n:"云浮市",p:"12473607.14,2605655.19",l:7},{n:"南宁市",p:"12063576.78,2594028.7",l:5},{n:"柳州市",p:"12180922.28,2776089.56",l:7},{n:"桂林市",p:"12278276.01,2891719.35",l:7},{n:"梧州市",p:"12388367.17,2673421.13",l:7},{n:"北海市",p:"12148034.92,2434259.23",l:7},{n:"防城港市",p:"12062758.24,2458819.91",l:8},{n:"钦州市",p:"12096184.74,2493766.85",l:8},{n:"贵港市",p:"12201118.42,2628719.18",l:8},{n:"玉林市",p:"12264309.72,2572247.58",l:7},{n:"百色市",p:"11869501.63,2724850.41",l:7},{n:"贺州市",p:"12420506.04,2785419.69",l:7},{n:"河池市",p:"12032932.45,2820780.9",l:7},{n:"来宾市",p:"12159496.06,2706113.22",l:7},{n:"崇左市",p:"11952831.16,2541092.75",l:7},{n:"海口市",p:"12283403.23,2262634.65",l:5},{n:"三亚市",p:"12191593.61,2054280.47",l:7},{n:"五指山市",p:"12192203.4,2115118.31",l:9},{n:"琼海市",p:"12298839.41,2171833.8",l:9},{n:"儋州市",p:"12199334.74,2202719.22",l:9},{n:"文昌市",p:"12334754.47,2205345.6",l:9},{n:"万宁市",p:"12289688.86,2117494.22",l:9},{n:"东方市",p:"12094938.19,2153087.07",l:9},{n:"定安县",p:"12281881.48,2223659.92",l:9},{n:"屯昌县",p:"12257508.59,2183877.5",l:9},{n:"澄迈县",p:"12246793.54,2228213.81",l:9},{n:"临高县",p:"12211290.57,2248031.45",l:9},{n:"白沙黎族自治县",p:"12185194.2,2167875.63",l:9},{n:"昌江黎族自治县",p:"12140718.82,2172087.22",l:9},{n:"乐东黎族自治县",p:"12154133.28,2112054.67",l:9},{n:"陵水黎族自治县",p:"12250762.89,2083377.38",l:9},{n:"保亭黎族苗族自治县",p:"12213023.84,2099255.38",l:9},{n:"琼中黎族苗族自治县",p:"12227918.08,2145742.66",l:9},{n:"成都市",p:"11585248.88,3567151.84",l:5},{n:"自贡市",p:"11664710.81,3398518.18",l:8},{n:"攀枝花市",p:"11323995.44,3052819.58",l:7},{n:"泸州市",p:"11738662.93,3339244.88",l:8},{n:"德阳市",p:"11622326.81,3627742.01",l:7},{n:"绵阳市",p:"11653709.54,3671830.29",l:7},{n:"广元市",p:"11783301.89,3798266.61",l:7},{n:"遂宁市",p:"11752615.68,3550145.61",l:8},{n:"内江市",p:"11695933.16,3429168.69",l:7},{n:"乐山市",p:"11551959.65,3425604.02",l:7},{n:"南充市",p:"11813039.76,3590300.79",l:7},{n:"眉山市",p:"11561215.96,3492381.09",l:7},{n:"宜宾市",p:"11649686.4,3324145.29",l:7},{n:"广安市",p:"11871206.28,3541167.9",l:8},{n:"达州市",p:"11964624.16,3639026.15",l:7},{n:"雅安市",p:"11468234.33,3480224.33",l:8},{n:"巴中市",p:"11883640.69,3723597.18",l:7},{n:"资阳市",p:"11648045.68,3499522.66",l:8},{n:"阿坝藏族羌族自治州",p:"11380507.4,3728228.76",l:7},{n:"甘孜藏族自治州",p:"11351325.58,3489245.11",l:7},{n:"凉山彝族自治州",p:"11385246.65,3214579.77",l:7},{n:"贵阳市",p:"11870519.66,3060500.8",l:5},{n:"六盘水市",p:"11670589.44,3054081.9",l:7},{n:"遵义市",p:"11903921.55,3195127.87",l:7},{n:"安顺市",p:"11794868.99,3012140.6",l:7},{n:"铜仁地区",p:"12152507.78,3190837.66",l:8},{n:"黔西南布依族苗族自治州",p:"11679001.08,2869017.96",l:8},{n:"毕节地区",p:"11721031.41,3142281.31",l:7},{n:"黔东南苗族侗族自治州",p:"12020550.46,3053190.16",l:7},{n:"黔南布依族苗族自治州",p:"11970164.71,3012312.19",l:8},{n:"昆明市",p:"11435436.7,2863224.69",l:5},{n:"曲靖市",p:"11555382.53,2918266.01",l:7},{n:"玉溪市",p:"11416286.45,2779261.88",l:7},{n:"保山市",p:"11039628.37,2872619.83",l:7},{n:"昭通市",p:"11546391.16,3146685.98",l:7},{n:"丽江市",p:"11158367.61,3089380.29",l:7},{n:"临沧市",p:"11141635.22,2721813.79",l:7},{n:"楚雄彝族自治州",p:"11302890.47,2863837.49",l:7},{n:"红河哈尼族彝族自治州",p:"11508573.08,2659713.17",l:10},{n:"文山壮族苗族自治州",p:"11606070.41,2660260.24",l:7},{n:"普洱市",p:"11240810.51,2589692.16",l:7},{n:"西双版纳傣族自治州",p:"11221584.75,2496986.94",l:7},{n:"大理白族自治州",p:"11162593.44,2932487.29",l:7},{n:"德宏傣族景颇族自治州",p:"10975263.62,2789037.62",l:8},{n:"怒江傈僳族自治州",p:"11005077.24,2963098.98",l:7},{n:"迪庆藏族自治州",p:"11099724.07,3206846.47",l:7},{n:"拉萨市",p:"10143520,3437204.04",l:5},{n:"昌都地区",p:"10818609.6,3629569.73",l:7},{n:"山南地区",p:"10217255.03,3384053.82",l:7},{n:"日喀则地区",p:"9895060.53,3389319.88",l:7},{n:"那曲地区",p:"10248989.14,3672743.64",l:7},{n:"阿里地区",p:"9033914.88,3534099.27",l:7},{n:"林芝地区",p:"10504953.82,3440916.27",l:7},{n:"西安市",p:"12126852.48,4041048.13",l:5},{n:"铜川市",p:"12128561.49,4126022.53",l:7},{n:"宝鸡市",p:"11927681.36,4054988.15",l:7},{n:"咸阳市",p:"12102356.68,4049604.29",l:10},{n:"渭南市",p:"12191495.18,4072416.28",l:8},{n:"延安市",p:"12189211.44,4356570.08",l:7},{n:"汉中市",p:"11914639.81,3881566.87",l:7},{n:"榆林市",p:"12216464.44,4593874.99",l:7},{n:"安康市",p:"12137752.12,3831579.1",l:7},{n:"商洛市",p:"12238758.85,3988163.54",l:7},{n:"兰州市",p:"11559160.65,4284481.62",l:5},{n:"嘉峪关市",p:"10942391.53,4806166.82",l:10},{n:"金昌市",p:"11376333.55,4627477.91",l:7},{n:"白银市",p:"11593403,4350996.94",l:7},{n:"天水市",p:"11770106.49,4083646.7",l:7},{n:"武威市",p:"11426447.1,4544105.57",l:7},{n:"张掖市",p:"11182855.71,4684858.01",l:7},{n:"平凉市",p:"11874734.04,4213583.82",l:8},{n:"酒泉市",p:"10965135.56,4801282.37",l:7},{n:"庆阳市",p:"11982494.48,4240364.21",l:7},{n:"定西市",p:"11647778.93,4218809.14",l:7},{n:"陇南市",p:"11680753.14,3925419.77",l:7},{n:"临夏回族自治州",p:"11490235.88,4221664.83",l:8},{n:"甘南藏族自治州",p:"11456970.69,4137705.18",l:7},{n:"西宁市",p:"11330424.55,4360836.12",l:5},{n:"海东地区",p:"11367724.54,4345818.22",l:7},{n:"海北藏族自治州",p:"11233079.71,4407698.25",l:7},{n:"黄南藏族自治州",p:"11367018.69,4210804.21",l:8},{n:"海南藏族自治州",p:"11201876.52,4315364.9",l:7},{n:"果洛藏族自治州",p:"11160063.36,4068657.46",l:7},{n:"玉树藏族自治州",p:"10800746.97,3875570.18",l:7},{n:"海西蒙古族藏族自治州",p:"10816936.01,4468024.21",l:7},{n:"银川市",p:"11832898.83,4616373.5",l:5},{n:"石嘴山市",p:"11841711.18,4698078.16",l:7},{n:"吴忠市",p:"11822829.87,4553415.21",l:7},{n:"固原市",p:"11827731.54,4278231.51",l:7},{n:"中卫市",p:"11708737.7,4485946.9",l:7},{n:"乌鲁木齐市",p:"9753667.88,5409369.63",l:5},{n:"克拉玛依市",p:"9450655.5,5683311.14",l:7},{n:"吐鲁番地区",p:"9929119.54,5277242.77",l:7},{n:"哈密地区",p:"10410950.95,5256019.72",l:7},{n:"昌吉回族自治州",p:"9719944.71,5438088.99",l:8},{n:"博尔塔拉蒙古自治州",p:"9137172.41,5576651.41",l:7},{n:"巴音郭楞蒙古自治州",p:"9590451.71,5097890.07",l:7},{n:"阿克苏地区",p:"8935351.95,5009761.4",l:7},{n:"克孜勒苏柯尔克孜自治州",p:"8479678.26,4798131.59",l:8},{n:"喀什地区",p:"8459954.24,4762722.85",l:7},{n:"和田地区",p:"8898707.07,4429816.8",l:7},{n:"伊犁哈萨克自治州",p:"9054161.44,5423973.33",l:7},{n:"塔城地区",p:"9238596.44,5870707.55",l:7},{n:"阿勒泰地区",p:"9812358.95,6050881.84",l:7},{n:"石河子市",p:"9583272.07,5483579.8",l:9},{n:"阿拉尔市",p:"9049687.77,4918103.23",l:9},{n:"图木舒克市",p:"8802730.81,4819584.88",l:9},{n:"五家渠市",p:"9746120.79,5462086.91",l:9}];
</script>
<script type="text/javascript" src="tangram-base-1.5.2.2.js"></script>
<script type="text/javascript" src="saved_resource"></script></head>
<body>
<div id="search" style="display: none;">
	<div class="search_con">
		<div class="search_bg">			
			<form id="form1" name="fmwd" onsubmit="qSearch(this,&#39;loc&#39;);return false">
				<div class="search_input1">
				<input type="text" name="word" maxlength="256" id="PoiSearch" class="input1" autocomplete="off">
				<input value="百度一下" type="submit">&nbsp;&nbsp;
				<span><a href="http://www.baidu.com/search/zhidao_help.html#如何插入地图" target="_blank">如何插入地图</a></span>
				</div>
			</form>
			<form id="form2" name="fmbus" onsubmit="qSearch(this,&#39;bt&#39;);return false" style="display:none">
				<div class="search_input1">
				<input type="text" name="word_from" maxlength="256" class="input2" id="BusSearchSta" autocomplete="off">&nbsp;&nbsp;到&nbsp;&nbsp;<input type="text" name="word_to" maxlength="256" class="input3" id="BusSearchEnd" autocomplete="off">
				<input value="百度一下" type="submit">&nbsp;&nbsp;
				<span><a href="http://www.baidu.com/search/zhidao_help.html#如何插入地图" target="_blank">如何插入地图</a></span>
				</div>
			</form>
			<form id="form3" name="fmnav" onsubmit="qSearch(this,&#39;nav&#39;);return false" style="display:none">
				<div class="search_input1">
				<input type="text" name="word_from" maxlength="256" class="input2" id="DriveSearchSta" autocomplete="off">&nbsp;&nbsp;到&nbsp;&nbsp;<input type="text" name="word_to" maxlength="256" class="input3" id="DriveSearchEnd" autocomplete="off">
				<input value="百度一下" type="submit">&nbsp;&nbsp;
				<span><a href="http://www.baidu.com/search/zhidao_help.html#如何插入地图" target="_blank">如何插入地图</a></span>
				</div>
			</form>
		</div>
		<div class="radio_title">
			<input type="radio" onclick="switchTab(1)" checked="checked" name="radio_opt" id="r1"><label for="r1"><span>地点</span></label>
			<input type="radio" onclick="switchTab(2)" name="radio_opt" id="r2"><label for="r2"><span>公交</span></label>
			<input type="radio" onclick="switchTab(3)" name="radio_opt" id="r3"><label for="r3"><span>驾车</span></label>
			<font id="supBus" style="color:#e60000;"></font>
			<font id="supBus11" style="color:#e60000;"></font>
		</div>
	</div>
</div>

<div id="wrapper" style="margin-left: 0px;">
	<div id="MapHolder" oncontextmenu="return false;" style="height: 6px; margin-top: 0px; width: 430px; overflow: hidden; position: relative; background-image: url(http://map.baidu.com/iknow/styles/bmap/bg.png);"><font id="platform" style="overflow: visible; position: absolute; cursor: url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default;"><font id="mask" class="BMap_mask" style="position: absolute; top: 0px; left: 0px; z-index: 9; overflow: hidden; width: 430px; height: 6px;">&nbsp;</font><div style="position:absolute;top:0;left:0;width:0;height:0;z-index:200"><div style="position: absolute; top: 0px; left: 0px; width: 0px; height: 0px; z-index: 700;" type="system"></div><div style="position: absolute; top: 0px; left: 0px; width: 0px; height: 0px; z-index: 500;" type="system"></div><div style="position: absolute; top: 0px; left: 0px; width: 0px; height: 0px; z-index: 400;" type="system"></div></div><font style="position: absolute; left: 215px; top: 3px;"><img src="u=x=25294;y=9439;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: 219px; top: -373px;"><img src="u=x=25293;y=9438;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: -37px; top: -117px;"><img src="u=x=25294;y=9438;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: 219px; top: -117px;"><img src="u=x=25293;y=9439;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: -37px; top: -373px;"><img src="u=x=25292;y=9439;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: -293px; top: -373px;"><img src="u=x=25292;y=9438;z=17;v=001" style="width: 256px; height: 256px; position: absolute; left: -293px; top: -117px;"></font></font><div id="zoomer" style="position:absolute; z-index:0; top:0px; left:0px;overflow:hidden; visibility: hidden; "><div class="BMap_zoomer" style="top:0;left:0;"></div><div class="BMap_zoomer" style="top:0;right:0;"></div><div class="BMap_zoomer" style="bottom:0;left:0;"></div><div class="BMap_zoomer" style="bottom:0;right:0;"></div></div><div unselectable="on" class="BMap_stdMpCtrl BMap_stdMpType1 anchorTL" style="bottom: auto; right: auto; top: 10px; left: 10px; height: 97px;"><div class="BMap_stdMpPan"><div class="BMap_button BMap_panN" title="向上平移"></div><div class="BMap_button BMap_panW" title="向左平移"></div><div class="BMap_button BMap_panE" title="向右平移"></div><div class="BMap_button BMap_panS" title="向下平移"></div><div class="BMap_stdMpPanBg BMap_smcbg"></div></div><div class="BMap_stdMpZoom" style="height: 38px;"><div class="BMap_button BMap_stdMpZoomIn" title="放大一级"><div class="BMap_smcbg"></div></div><div class="BMap_button BMap_stdMpZoomOut" title="缩小一级"><div class="BMap_smcbg"></div></div></div><div class="BMap_stdMpSlider" style="height: 0px;"><div class="BMap_stdMpSliderBgTop" style="height: 0px;"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderBgBot"><div class="BMap_smcbg"></div></div><div class="BMap_stdMpSliderMask" title="放置到此级别"></div><div class="BMap_stdMpSliderBar" title="拖动缩放" style="cursor: url(http://map.baidu.com/iknow/styles/bmap/openhand.cur), default; top: 8px;"><div class="BMap_smcbg"></div></div></div><div class="BMap_zlHolder"><div class="BMap_zlSt"><div class="BMap_smcbg"></div></div><div class="BMap_zlCity"><div class="BMap_smcbg"></div></div><div class="BMap_zlProv"><div class="BMap_smcbg"></div></div><div class="BMap_zlCountry"><div class="BMap_smcbg"></div></div></div></div><div unselectable="on" class=" BMap_scaleCtrl anchorBL" style="bottom: 20px; right: auto; top: auto; left: 5px; width: 67px;"><div class="BMap_scaleTxt" unselectable="on" style="background-color: transparent; color: black;">100&nbsp;米</div><div class="BMap_scaleBar BMap_scaleHBar" style="background-color: black;"></div><div class="BMap_scaleBar BMap_scaleLBar" style="background-color: black;"></div><div class="BMap_scaleBar BMap_scaleRBar" style="background-color: black;"></div></div><div unselectable="on" class=" BMap_cpyCtrl anchorBL" style="bottom: 2px; right: auto; top: auto; left: 5px; visibility: visible;">©2012 Baidu</div><div unselectable="on" class=" BMap_cpyCtrl anchorBR" style="bottom: 2px; right: 5px; top: auto; left: auto; visibility: visible;"><a target="_blank" id="mainurl" href="http://map.baidu.com/?iknowflg=1&newmap=1&l=17&t=B_NORMAL_MAP&c=12950089.48,4832532.86&b=12950089.48,4832286.86&i=0|-1|-1&s=s%26addr%3D0%26wd%3D%25E7%258E%25AF%25E7%2590%2583%25E5%258C%2597%25E7%25BE%258E%25E8%2580%2583%25E8%25AF%2595%25E9%2599%25A2%26c%3D131%26src%3D0&t=1365904870968"><img border="0" style="margin-bottom:0px;" src="detaillogo.gif"></a></div></div>
	<div id="resPanel" style="height: 6px; display: none;">
		<div id="topCityPanel">
			<div id="selCity">
				<div class="sel_container">
					<strong id="curCity">北京市</strong>
				</div>
				<div style="float:right;">
					<a href="javascript:void(0)" id="curCityText" onclick="selectCity(this)">更换城市</a>
					<a href="javascript:void(0)" onclick="selectCity(this)"><img border="0" src="downarrow.gif" style="cursor: pointer;"></a>
				</div>
			  </div>
			  <div id="rcInfo" style="display:none;"></div>
		</div>
		<div id="MapInfo" style="overflow-y: auto;"><div class="mapinfo_con">
  
  
  
  <p>在<strong>北京市</strong>没有找到相关的地点。</p><p style="margin-top:10px">在以下城市找到结果，请选择城市：</p>
  <table style="margin:0 0 8px 0" width="98%" cellspacing="0" cellpadding="0" border="0" align="left"><tbody><tr><td width="33%" valign="top"><a href="javascript:void(0)" onclick="Instance(&#39;mz_1&#39;).searchInCity(167)" class="hotcity">大连市</a>(1)</td><td width="33%" valign="top"><a href="javascript:void(0)" onclick="Instance(&#39;mz_1&#39;).searchInCity(224)" class="hotcity">苏州市</a>(1)</td><td width="33%" valign="top"><a href="javascript:void(0)" onclick="Instance(&#39;mz_1&#39;).searchInCity(161)" class="hotcity">南通市</a>(1)</td></tr><tr></tr></tbody></table>
  
</div>
</div>
	</div>
  <div id="shad" style="display: none;">
    <div id="shad_v" style="height: 6px;"></div>
    <div id="shad_h" style="width: 430px;"></div>
  </div>
  <span id="tipping"></span>
  <span id="loading" style="display: none; left: 130px; top: 0px;">正在加载地图，请稍候...</span>
</div>
<iframe id="wHistory" name="wHistory" style="width:100%;display:none" src="history.htm"></iframe>
<form method="get" target="wHistory" name="fmHistory" action="http://zhidao.baidu.com/html/map/history.html">
	<input type="hidden" name="url" value="s%26addr%3D0%26wd%3D%25E7%258E%25AF%25E7%2590%2583%25E5%258C%2597%25E7%25BE%258E%25E8%2580%2583%25E8%25AF%2595%25E9%2599%25A2%26c%3D131%26src%3D0">
</form>

<script>
loadBody();
</script>

<script> var _trace_page_logid = 1960864192; </script><div id="shanbay_extension_result" class="shanbay_extension_result"><div id="shanbay_extension_result_shanbaydict" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_shanbaydict_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_shanbaydict_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_googletran" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_googletran_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_googletran_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_wikizh" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_wikizh_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_wikizh_content" class="shanbay_extension_result_content"></div></div><div id="shanbay_extension_result_wikien" class="shanbay_extension_result_engine"><div id="shanbay_extension_result_wikien_caption" class="shanbay_extension_result_caption"></div><div id="shanbay_extension_result_wikien_content" class="shanbay_extension_result_content"></div></div></div></body></html>