(function(a){with(a){
a.YC=function(b,c){var d=k;if("delete"===c&&(d=zt.As?"debugger":window.prompt("请输入删除理由"),!d))return;b.xhr=new V(j);b.pb&&P(b.g(),b.xhr,"success",b.Ee);b.xhr.ajax("/reviewq/answer?queue_id="+b.Lb+"&is_realm="+b.ge,"action="+c+"&answer_id="+b.fa.getAttribute("data-answer_id")+"&task_id="+b.fa.getAttribute("data-task_id")+(d?"&reason="+d:"")+"&none_queue="+b.fa.getAttribute("data-none_queue"))},a.ZC=function(b,c){b.xhr=new V(j);b.pb&&P(b.g(),b.xhr,"success",b.Ee);b.xhr.ajax("/reviewq/question?queue_id="+
b.Lb+"&is_realm="+b.ge,"action="+c+"&question_id="+b.fa.getAttribute("data-question_id")+"&task_id="+b.fa.getAttribute("data-task_id")+"&none_queue="+b.fa.getAttribute("data-none_queue"))},a.$C=["delete","delete_answer"],a.aD=function(b){if(A&&!Ib(9)){var c=n;try{c=b.parentNode}catch(d){}return!!c}return uc(b.ownerDocument.body,b)},a.bD=function(b,c){return b.H.h(c?b.MI:b.$D)},a.cD=function(b){if("outerHTML"in b)return b.outerHTML;var c=Tb(b).createElement("div");c.appendChild(b.cloneNode(j));return c.innerHTML};
Lp.prototype.qg=Z(68,function(){var b=this.zr.body.createTextRange();b.moveToElementText(this.zr.body);return this.Ng(new Lp(b,this.zr),j)});Vp.prototype.qg=Z(67,function(){return(!this.va||aD(this.va))&&(!this.sa||aD(this.sa))&&(!(A&&!Ib(9))||Zp(this).qg())});aq.prototype.qg=Z(66,function(){var b=n;try{b=z.every(this.ei(),function(b){return A?!!b.parentNode:uc(b.ownerDocument.body,b)})}catch(c){}return b});gq.prototype.qg=Z(65,function(){return z.every(wp(this),function(b){return b.qg()})});
Dp.prototype.wj=Z(60,function(){return 3!=this.ga.nodeType?-1:this.ga==this.va?this.Ca:0});eq.prototype.wj=Z(59,s(0));iq.prototype.wj=Z(58,function(){return this.rg[this.ql].wj()});Uy.prototype.ox=Z(53,function(b,c,d,e,g){var h=g||"question",b="question"===h?"问题":"答案";z.contains($C,e)?Ci({title:d+b,content:"确定要"+d+"这个"+b+"吗？",$i:["取消","确定"+d]},function(b){b?"question"===h?ZC(this,e):YC(this,e):this.locked=n},this):"question"===h?ZC(this,e):YC(this,e)});
Gp.prototype.ce=Z(47,function(){var b=Ub(this.P.startContainer).o("div");b.appendChild(this.P.cloneContents());b=b.innerHTML;if(Fa(b,"<")||!this.isCollapsed()&&!Wa(b,"<"))return b;var c=this.xc(),c=1==c.nodeType?c:c.parentNode;return cD(c.cloneNode(n)).replace(">",">"+b)});Lp.prototype.ce=Z(46,function(){return this.P.htmlText});Vp.prototype.ce=Z(45,function(){return Zp(this).ce()});aq.prototype.ce=Z(44,function(){return this.Zg()});gq.prototype.ce=Z(43,function(){return z.map(wp(this),function(b){return b.ce()}).join("")});
Dp.prototype.uj=Z(42,function(){return 3!=this.ga.nodeType?-1:this.ga==this.sa?this.Aa:this.ga.nodeValue.length});eq.prototype.uj=Z(41,s(0));iq.prototype.uj=Z(40,function(){return this.rg[this.ql].uj()});up.prototype.Ag=Z(39,function(b){this.isCollapsed()||this.cd();return this.insertNode(b,j)});aq.prototype.Ag=Z(38,function(b){b=this.insertNode(b,j);this.isCollapsed()||this.cd();return b});
rp.prototype.restore=Z(35,function(b){this.ag&&sp.log(ce,"Disposed SavedRange objects cannot be restored.",i);var c=this.tk();b||this.G();return c});$p.prototype.tk=Z(34,function(){return Yp(this.tC,this.sL,this.oE,this.HN)});fq.prototype.tk=Z(33,function(){for(var b=(this.Za.length?Tb(this.Za[0]):document).body.createControlRange(),c=0,d=this.Za.length;c<d;c++)b.addElement(this.Za[c]);return bq(b)});
jq.prototype.tk=Z(32,function(){var b=z.map(this.hA,function(b){return b.restore()}),c=new gq;c.Dm=b;c.df=z.map(b,function(b){return b.$d()});return c});Ep.prototype.Zg=Z(25,function(){var b=new Yr;O.forEach(this,function(c,d,e){3==c.nodeType?b.append(Ua(c.nodeValue.substring(e.wj(),e.uj()))):1==c.nodeType&&(-1==e.dc?ic(c)&&b.append("</"+c.tagName+">"):(d=c.cloneNode(n),d=cD(d),A&&"LI"==c.tagName?b.append(d):(c=d.lastIndexOf("<"),b.append(c?d.substr(0,c):d))))},this);return b.toString()});
Vp.prototype.Zg=Z(24,function(){return Zp(this).Zg()});aq.prototype.Zg=Z(23,function(){return z.map(dq(this),cD).join("")});gq.prototype.Zg=Z(22,function(){return this.ce()});tp.prototype.Qp=Z(16,function(){var b=this.Rc?-1:1;this.dc==b&&(this.dc=-1*b,this.depth+=this.dc*(this.Rc?-1:1))});Dp.prototype.Qp=Z(15,function(){Dp.m.Qp.apply(this);uc(this.ga,this.sa)&&f(O.gb)});$d.prototype.fD=Z(13,function(b,c){this.log(fe,b,c)});
Jd.prototype.setInterval=Z(11,function(b){this.eh=b;this.ra&&this.enabled?(this.stop(),this.start()):this.ra&&this.stop()});ln.prototype.bx=Z(10,function(){return this.h().innerHTML});Cp.prototype.xh=Z(9,function(b,c){this.insertNode(b,j);this.insertNode(c,n)});
Gp.prototype.xh=Z(8,function(b,c){var d=cc(Tb(this.W()));if(d=lq(d))var e=d.W(),g=d.ka(),h=d.ta(),l=d.Ja();var m=this.P.cloneRange(),p=this.P.cloneRange();m.collapse(n);p.collapse(j);m.insertNode(c);p.insertNode(b);m.detach();p.detach();if(d){if(3==e.nodeType)for(;h>e.length;){h-=e.length;do e=e.nextSibling;while(e==b||e==c)}if(3==g.nodeType)for(;l>g.length;){l-=g.length;do g=g.nextSibling;while(g==b||g==c)}Yp(e,h,g,l).select()}});
Lp.prototype.xh=Z(7,function(b,c){var d=this.P.duplicate(),e=this.P.duplicate();Rp(d,b,j);Rp(e,c,n);this.Fe()});Vp.prototype.xh=Z(6,function(b,c){Zp(this).xh(b,c);this.Fe()});Gp.prototype.cd=Z(5,function(){var b=this.P;b.extractContents();if(b.startContainer.hasChildNodes()&&(b=b.startContainer.childNodes[b.startOffset])){var c=b.previousSibling;""==Ic(b)&&L(b);c&&""==Ic(c)&&L(c)}});
Lp.prototype.cd=Z(4,function(){if(!this.isCollapsed()&&this.P.htmlText){var b=this.W(),c=this.ka(),d=this.P.text,e=this.P.duplicate();e.moveStart("character",1);e.moveStart("character",-1);e.text==d&&(this.P=e);this.P.text="";this.Fe();d=this.W();e=this.ta();try{var g=b.nextSibling;b==c&&(b.parentNode&&3==b.nodeType&&g&&3==g.nodeType)&&(b.nodeValue+=g.nodeValue,L(g),this.P=Np(d),this.P.move("character",e),this.Fe())}catch(h){}}});Vp.prototype.cd=Z(3,function(){Zp(this).cd();this.Fe()});
aq.prototype.cd=Z(2,function(){if(this.P){for(var b=[],c=0,d=this.P.length;c<d;c++)b.push(this.P.item(c));z.forEach(b,L);this.collapse(n)}});gq.prototype.cd=Z(1,function(){z.forEach(wp(this),function(b){b.cd()})});
a.dD=function(b,c){var d=c.nd();b.sd[d]&&b.Pb.log(ce,"Cannot register the same class of plugin twice.",i);b.sd[d]=c;for(var e in xv)c[xv[e]]&&b.Kj[e].push(c);c.C=b;b.fe()&&c.enable(b)},a.eD=function(b){return b.C&&b.C.lb},a.fD=function(b){var c=b.ga.parentNode;return new Vr(c,z.indexOf(c.childNodes,b.ga))},a.gD=function(b,c,d,e){return Yp(b,c,d,e)},a.hD=function(b){M.call(this);this.MI=fb();this.$D=fb();this.H=Ub(b.xa());b.xh(this.H.o("SPAN",{id:this.MI}),this.H.o("SPAN",{id:this.$D}))};y(hD,rp);
hD.prototype.sp=function(b){L(bD(this,j));L(bD(this,n));return b};hD.prototype.tk=function(){var b=k,c=bD(this,j),d=bD(this,n);if(c&&d){var b=c.parentNode,c=z.indexOf(b.childNodes,c),e=d.parentNode,d=z.indexOf(e.childNodes,d);e==b&&(d-=1);b=Yp(b,c,e,d);b=this.sp(b);b.select()}else this.sp();return b};hD.prototype.p=function(){this.sp();this.H=k};
a.iD=function(b){var c;if(3==b.ga.nodeType)for(c=b.ga.previousSibling;c&&3==c.nodeType;c=c.previousSibling)b.offset+=Wr(c);else c=b.ga.previousSibling;var d=b.ga.parentNode;b.ga=c?c.nextSibling:d.firstChild;return b},a.jD=function(b,c){return c?Xr(b.W(),b.ta()):Xr(b.ka(),b.Ja())},a.kD=function(b){for(var c=k,d=b.firstChild;d;){var e=d.nextSibling;3==d.nodeType?""==d.nodeValue?b.removeChild(d):c?(c.nodeValue+=d.nodeValue,b.removeChild(d)):c=d:(kD(d),c=k);d=e}},a.lD=function(b){var c=b&&b.nodeName.toLowerCase();
return!(!b||"block"!=(1!=b.nodeType?k:A?Wf(b,"display"):Vf(b,"display"))&&!("td"==c||"table"==c||"li"==c))},a.mD=function(b){return Jc(b,lD,j)},a.nD=function(b,c){if(c){var d,e=iD(jD(c,j)),g=fD(e),h=e.ga.previousSibling;3==e.ga.nodeType&&(e.ga=k);var l=iD(jD(c,n)),m=fD(l),p=l.ga.previousSibling;3==l.ga.nodeType&&(l.ga=k);d=function(){!e.ga&&h&&(e.ga=h.nextSibling,e.ga||(e=new Vr(h,Wr(h))));!l.ga&&p&&(l.ga=p.nextSibling,l.ga||(l=new Vr(p,Wr(p))));return Yp(e.ga||g.ga.firstChild||g.ga,e.offset,l.ga||
m.ga.firstChild||m.ga,l.offset)};var r=mD(c.Eb())}r?(r=yc(r,b),A?kD(r):r.normalize()):b&&(A?kD(b):b.normalize());return d?d():k},a.oD=function(b,c,d){Ts.call(this,c,b||Sz.F(),d)};y(oD,Ts);a.pD=function(b){return b.getAttribute&&"true"==b.getAttribute("g_editable")},a.qD=function(b){hD.call(this,b)};y(qD,hD);qD.prototype.sp=function(b){var c=bD(this,j),d=bD(this,n),c=c&&d?yc(c,d):c||d;qD.m.sp.call(this);if(b)return nD(c,b);c&&(b=lq(cc(Tb(c))),(b=nD(c,b))&&b.select())};
a.rD=function(b,c,d){for(var e=(c=1==c)?b.W():b.ka(),g=c?b.ta():b.Ja(),h=b.Eb();e!=h&&e!=d&&!(c&&0!=g||!c&&g!=Wr(e));)var l=e.parentNode,e=z.indexOf(l.childNodes,e),g=c?e:e+1,e=l;return gD(c?e:b.W(),c?g:b.ta(),c?b.ka():e,c?b.Ja():g)},a.sD=function(b){tg(b,n);if(uq)for(var c=b,b=b.parentNode;b&&"HTML"!=b.tagName;){if(sg?"none"==b.style[sg].toLowerCase():(A||tb)&&"on"==b.getAttribute("unselectable")){tg(b,n,j);for(var d=0,e=b.childNodes.length;d<e;d++){var g=b.childNodes[d];g!=c&&1==g.nodeType&&tg(b.childNodes[d],
j)}}c=b;b=b.parentNode}},a.tD=function(b){var c=b.target.tagName;"TEXTAREA"!=c&&"INPUT"!=c&&b.preventDefault()},a.uD=void 0,a.vD=function(b){var c=b.Eb();return b.W()!=c.parentElement&&pD(c)||!!Jc(c,pD)},a.wD=function(b,c){var d=rD(b,1,c),d=rD(d,0,c),e=d.W(),g=d.ka(),h=d.ta(),d=d.Ja();if(e==g){for(;g!=c&&0==h&&d==Wr(g);)e=g.parentNode,h=z.indexOf(e.childNodes,g),d=h+1,g=e;e=g}return Yp(e,h,g,d)},a.xD=function(b,c){uq&&c.c(b,"mousedown",tD,j);tg(b,j);for(var d=b.getElementsByTagName("INPUT"),e=0,g=
d.length;e<g;e++){var h=d[e];h.type in Nq&&sD(h)}z.forEach(b.getElementsByTagName("TEXTAREA"),sD)},a.yD=function(b){return!!Lq[b.tagName]},a.zD=function(b){return ms(O.filter(new ks(b),ls))},a.AD=void 0,a.BD=function(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return n;return j}},a.CD=function(b){this.Uf=b;this.DQ=j;this.Gw=[]},a.DD=function(b){b.Vv||(b.Vv=Ic(b.Uf));return b.Vv};a.ED=function(){wv.call(this)};y(ED,wv);ED.prototype.nd=s("BTF");ED.prototype.Pb=le("goog.editor.plugins.BasicTextFormatter");a.FD=E.an({aK:"+link",qX:"+formatBlock",DX:"+indent",dY:"+outdent",HY:"+strikeThrough",zX:"+insertHorizontalRule",IY:"+subscript",JY:"+superscript",UY:"+underline",TW:"+bold",FX:"+italic",oX:"+fontSize",nX:"+fontName",mX:"+foreColor",NW:"+backColor",bY:"+insertOrderedList",YY:"+insertUnorderedList",GX:"+justifyCenter",HX:"+justifyFull",JX:"+justifyRight",IX:"+justifyLeft"});
t=ED.prototype;t.Se=function(b){return b in FD};t.Ke=function(){return Zv(this.C)};a.GD=function(b){return eD(b).xa()};
t.of=function(b,c){var d,e,g,h,l,m=c;switch(b){case "+backColor":if(m!==k)if(Aq){e=m;g=Zv(this.C);var p,r;g&&g.isCollapsed()&&(p=eD(this).createTextNode(B?" ":""),m=g.W(),r=1==m.nodeType?m:m.parentNode,""==r.innerHTML?(r.style.textIndent="-10000px",r.appendChild(p)):(r=eD(this).o("span",{style:"text-indent:-10000px"},p),g.Ag(r)),Ap(p).select());HD(this,"hiliteColor",e,n,j);p&&(B&&(p.data=""),r.style.textIndent="")}else tb?HD(this,"hiliteColor",m):HD(this,b,m);break;case "+link":a:{l=m;this.C.Re||
eD(this).Ta().focus();g=(e=this.Ke())&&e.Eb();if((g=Kc(g,"A"))&&Jc(g,pD))pc(g);else{g=k;var x=[];if((m=e&&e.Eb())&&"IMG"==m.tagName)l=k;else{if(e&&e.isCollapsed())e=e.Le(0).$d(),rq?(g=eD(this).createElement("A"),e.insertNode(g)):qq&&(e.pasteHTML("<a id='newLink'></a>"),g=eD(this).h("newLink"),g.removeAttribute("id"));else{var F=fb();HD(this,"CreateLink",F);z.forEach(this.C.h().getElementsByTagName("A"),function(b){Js(b.href,F)&&x.push(b)});x.length&&(g=x.pop())}e=g;g=new CD(e);g.Uf.href="/";l&&(e.target=
l);x&&(g.Gw=x);l=g}if(l){if(!this.C.execCommand("link",l))if(h=this.C.el.prompt(KA,"http://"))if(e=l,g=DD(l)||h,m=e.Uf,m.href=h,p=DD(e),g!=p&&(h=ys(m),3==h.nodeType&&(h=h.parentNode),Ic(h)!=p&&(h=m),kc(h),m=Ub(h),h.appendChild(m.createTextNode(g)),e.Vv=k),e.DQ=n,e=l.Uf,Eq){g=e.nextSibling;if(!g||!(3==g.nodeType&&(Fa(g.data," ")||Fa(g.data," "))))g=Ub(e).createTextNode(" "),mc(g,e);nq(g,1).select()}else as(e,n);else{e=Ap(l.Uf);e=new qD(e);pc(l.Uf);for(l.Uf=k;l.Gw.length;)pc(l.Gw.pop());e.restore().select();
l=k;break a}break a}}l=k}break;case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":HD(this,b,k,n,j);B&&HD(this,b,k,n,j);(!yq||!B)&&O.forEach(Zv(this.C),ID);break;default:A&&("+formatBlock"==b&&m)&&(m="<"+m+">");if("+foreColor"==b&&m===k)break;switch(b){case "+indent":case "+outdent":yq&&(B&&(e=j),tb&&(e="+outdent"==b?!GD(this).queryCommandEnabled("outdent"):j));case "+insertOrderedList":case "+insertUnorderedList":if(p=Hq)p=GD(this),p=JD(this,j,p,b,i);if(p)g="P"!=this.C.queryCommandValue("+defaultTag");
else if(!Iq&&(A||tb)){d=this.Ke();p=d.Eb();var I=GD(this);KD.lastIndex=0;KD.test(p.innerHTML)&&(d=d.W()&&d.ka()?new hD(d):k,"P"==p.tagName?LD(p,j):(p.innerHTML=p.innerHTML.replace(KD,'<p$1 trtempbr="temp_br">'),p=z.toArray(p.getElementsByTagName("P")),O.forEach(p,function(b){if("temp_br"==b.getAttribute("trtempbr")){b.removeAttribute("trtempbr");if(js(Hc(b))){var c=A?I.createTextNode(" "):I.createElement("BR");b.appendChild(c)}LD(b)}})),d.restore())}B&&(Gq&&!this.queryCommandValue(b))&&(p=this.C.queryCommandValue("+defaultTag"),
"P"==p||"DIV"==p?p=n:(p=this.Ke(),p.isCollapsed()&&3!=p.xc().nodeType?(d=eD(this).createTextNode(" "),p.insertNode(d,n),Ap(d).select(),p=j):p=n),h|=p);case "+formatBlock":d=!!this.C.vj("Bidi");break;case "+subscript":case "+superscript":Fq&&!this.queryCommandValue(b)&&(p="+subscript"==b?"+superscript":"+subscript",r=MD(p),this.queryCommandValue(p)||GD(this).execCommand(r,n,k),GD(this).execCommand(r,n,k));break;case "+underline":case "+bold":case "+italic":e=B&&yq&&this.queryCommandValue(b);break;
case "+foreColor":case "+fontName":e=yq&&B}HD(this,b,m,d,!!e);h&&GD(this).execCommand("Delete",n,j);g&&GD(this).execCommand("FormatBlock",n,"<div>")}B&&!this.C.dh&&eD(this).Ta().focus();return l};
t.queryCommandValue=function(b){var c;switch(b){case "+link":return b=(b=this.Ke())&&b.Eb(),b=Kc(b,"A"),!!b&&!!Jc(b,pD);case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":return ND(this,b);case "+formatBlock":var b=Zv(this.C),d=k;O.forEach(b,function(b,c,e){-1!=e.dc&&(b=mD(b).tagName,d=d||b,d!=b&&(d=k,f(O.gb)),e.Qp())});return d;case "+indent":case "+outdent":case "+insertHorizontalRule":return n;case "+fontSize":case "+fontName":case "+foreColor":case "+backColor":return this.ut(GD(this),
b,yq&&B);case "+underline":case "+bold":case "+italic":c=yq&&B;default:var e=GD(this);return JD(this,j,e,b,c)}};t.CH=function(b){wq&&b.match(/^\s*<script/i)&&(b="&nbsp;"+b);xq&&(b=b.replace(/<(\/?)strong([^\w])/gi,"<$1b$2"),b=b.replace(/<(\/?)em([^\w])/gi,"<$1i$2"));return b};
t.mM=function(b){for(var b=b.getElementsByTagName("IMG"),c=0,d;d=b[c];c++)if(A){d.removeAttribute("tabIndex");d.removeAttribute("tabIndexSet");var e=d;"removeAttribute"in e&&e.removeAttribute(sa);try{delete e[sa]}catch(g){}d.FR&&(d.tabIndex=d.FR)}};t.nM=function(b){if(C){for(var c=Vb(this.C.lb.Ga,"HEAD",i,i),d=[],e=c.length,g=1;g<e;++g)for(var h=c[g].getElementsByTagName("STYLE"),l=h.length,m=0;m<l;++m)d.push(h[m].outerHTML);return d.join("")+b}return b};
t.$r=function(b,c,d){if(!d)return n;var e;switch(c){case "b":e="+bold";break;case "i":e="+italic";break;case "u":e="+underline";break;case "s":return j}return e?(this.C.execCommand(e),j):n};
a.KD=A?/<br([^\/>]*)\/?>/gi:/<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi,a.LD=function(b,c){if(A||tb){var d=b.outerHTML.replace(/<(\/?)p/gi,"<$1div");c&&(d=d.replace(KD,"</div><div$1>"));tb&&!/<\/div>$/i.test(d)&&(d+="</div>");b.outerHTML=d}},a.MD=function(b){return 0==b.indexOf("+")?b.substring(1):b},a.ID=function(b){b=mD(b);b.align&&(b.style.textAlign=b.align,b.removeAttribute("align"))},a.HD=function(b,c,d,e,g){var h=k;e&&(h=b.C.queryCommandValue("rtl")?"rtl":b.C.queryCommandValue("ltr")?"ltr":k);var c=
MD(c),l,m;if(A){var p=c;m=[];var e=k,r=b.Ke();l=eD(b);if(p in OD){var x=r&&r.Eb();if(x){for(var F=Wb("BLOCKQUOTE",k,x),I,G=0;G<F.length;G++)if(r.containsNode(F[G])){I=F[G];break}if(x=I||Kc(x,"BLOCKQUOTE"))e=l.o("div",{style:"height:0"}),x.appendChild(e),m.push(e),I?r=Yp(I,0,e,0):r.containsNode(e)&&(r=gD(r.W(),r.ta(),e,0)),r.select()}}I=b.C;!I.rc()&&!e&&p in QD&&(I=I.h(),r&&(r.isCollapsed()&&!sc(I))&&(e=r.Le(0).$d(),r=e.duplicate(),r.moveToElementText(I),r.collapse(n),r.isEqual(e)&&(r=l.createTextNode(" "),
I.appendChild(r),e.move("character",1),e.move("character",-1),e.select(),m.push(r))),e=l.o("div",{style:"height:0"}),I.appendChild(e),m.push(e));l=m[0];m=m[1]}if(C){l=c;var Q;RD[l]&&(Q=eD(b).o("div",{style:"height: 0"},"x"),b.C.h().appendChild(Q));SD[l]&&(l=b.C.h(),Q=eD(b).o("div",{style:"height: 0"},"x"),l.insertBefore(Q,l.firstChild));l=Q}if(B&&(Q=c,Gb("1.9")&&"formatblock"==Q.toLowerCase()&&(Q=b.Ke(),I=Q.W(),Q.isCollapsed()&&(I&&"BODY"==I.tagName)&&(e=Q.ta(),(I=I.childNodes[e])&&"BR"==I.tagName))))Q=
Q.$d(),Q.setStart(I,0),Q.setEnd(I,0);if(Jq&&"fontsize"==c.toLowerCase()){var X=wD(Zv(b.C),b.C.h());O.forEach(O.filter(X,function(b,c,d){return 1==d.dc&&X.containsNode(b)}),function(b){Tf(b,"font-size","");B&&(0==b.style.length&&b.getAttribute("style")!=k)&&b.removeAttribute("style")})}Q=GD(b);if(g&&yq&&(Q.execCommand("styleWithCSS",n,j),tb)){I=[];e=Zv(b.C).Eb();do I.push(e);while(e=e.parentNode);I=O.cM(O.fd(Zv(b.C)),O.fd(I));I=O.filter(I,lD);O.forEach(I,function(b){var c=b.style.outline;b.style.outline=
"0px solid red";b.style.outline=c})}Q.execCommand(c,n,d);g&&yq&&Q.execCommand("styleWithCSS",n,n);C&&(!Gb("526")&&"formatblock"==c.toLowerCase()&&d&&/^[<]?h\d[>]?$/i.test(d))&&O.forEach(b.Ke(),function(b){"Apple-style-span"==b.className&&(b.style.fontSize="",b.style.fontWeight="")});if(/insert(un)?orderedlist/i.test(c)){if(C){var ka=n;O.forEach(b.Ke(),function(b){var c=b.tagName;if("UL"==c||"OL"==c)if(ka){if(c=tc(b)){var d=b.ownerDocument.createRange();d.setStartAfter(c);d.setEndBefore(b);if(Ha(d.toString())&&
c.nodeName==b.nodeName){for(;c.lastChild;)b.insertBefore(c.lastChild,b.firstChild);c.parentNode.removeChild(c)}}}else ka=j})}if(A){for(c=(c=b.Ke())&&c.xc();c&&"UL"!=c.tagName&&"OL"!=c.tagName;)c=c.parentNode;c&&(c=c.parentNode);c&&(d=z.toArray(c.getElementsByTagName("UL")),z.extend(d,z.toArray(c.getElementsByTagName("OL"))),z.forEach(d,function(b){var c=b.type;if(c&&!("UL"==b.tagName?TD:UD)[c])b.type=""}));m&&L(m)}}l&&L(l);h&&b.C.execCommand(h)},a.QD={indent:1,outdent:1,insertOrderedList:1,insertUnorderedList:1,
justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,ltr:1,rtl:1},a.OD={insertOrderedList:1,insertUnorderedList:1},a.UD={1:1,a:1,A:1,i:1,I:1},a.TD={disc:1,circle:1,square:1},a.RD={justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,formatBlock:1},a.SD={insertOrderedList:1,insertUnorderedList:1},a.VD={center:1,justify:1,right:1,left:1},a.ND=function(b,c){var d=c.replace("+justify","").toLowerCase();"full"==d&&(d="justify");var e=b.C.vj("Bidi");if(e)return d==e.ZZ();var g=b.Ke();if(!g)return n;
for(var h=g.Eb(),e=z.filter(h.childNodes,function(b){return ls(b)&&g.containsNode(b,j)}),e=e.length?e:[h],h=0;h<e.length;h++){var l=mD(e[h]),m=d,p=Xf(l,"textAlign"),p=p.replace(/^-(moz|webkit)-/,"");VD[p]||(p=l.align||"left");if(m!=p)return n}return j};ED.prototype.ut=function(b,c,d){return JD(this,n,b,c,d)};a.JD=function(b,c,d,e,g){e=MD(e);if(g){var h=GD(b);h.execCommand("styleWithCSS",n,j)}b=c?d.queryCommandState(e):d.queryCommandValue(e);g&&h.execCommand("styleWithCSS",n,n);return b};a.WD=function(b,c){M.call(this);this.et=[];for(this.$s=[];b&&"BODY"!=b.nodeName&&b!=c;){for(var d=0,e=b.previousSibling;e;)e=e.previousSibling,++d;this.et.unshift(d);this.$s.unshift(b.nodeName);b=b.parentNode}};y(WD,M);WD.prototype.toString=function(){for(var b=[],c,d=0;c=this.$s[d];d++)b.push(this.et[d]+","+c);return b.join("\n")};a.XD=function(b,c){for(var d,e=c,g=0;d=b.$s[g];++g)if(e=e.childNodes[b.et[g]],!e||e.nodeName!=d)return k;return e};WD.prototype.p=function(){delete this.et;delete this.$s};le("goog.editor.plugins.Blockquote");a.YD=function(){wv.call(this)};y(YD,wv);t=YD.prototype;t.Hi="DIV";t.nd=s("EnterHandler");t.enable=function(b){YD.m.enable.call(this,b);Kq&&("P"==this.Hi||"DIV"==this.Hi)&&eD(this).xa().execCommand("opera-defaultBlock",n,this.Hi)};t.CH=function(b){return!b||js(b)?wq?this.XN():"":b};t.XN=lf("<br>");
t.MO=function(b){if(B&&this.C.dh)return n;if(8==b.keyCode){var c=Zv(this.C),d=this.C.h(),c=c&&c.W();d.firstChild==c&&Ls(c)&&(b.preventDefault(),b.stopPropagation())}else if(13==b.keyCode)if(B){if(!b.shiftKey){var d=Zv(this.C),c=!d||d.isCollapsed(),e=rq?ZD(this):$D(this),g=this.C.execCommand("+splitBlockquote",e);g&&(b.preventDefault(),b.stopPropagation());rq||e.removeNode(j);g||this.BO(b,c,d)}}else{this.C.Xh();d=rq?ZD(this):$D(this);if(c=!!this.C.execCommand("+splitBlockquote",d))b.preventDefault(),
b.stopPropagation();rq||d.removeNode(j);C&&this.CO(b);if(A||tb)aE(this);else if(!c&&C){if(c=d=Zv(this.C))a:{for(c=d.Eb();c;c=c.parentNode)if(yD(c)){c="BLOCKQUOTE"==c.tagName;break a}c=n}if(c){c=eD(this);e=c.createElement("BR");d.insertNode(e,j);if(d=yD(e.parentNode)){for(d=e.nextSibling;d&&3==d.nodeType&&!d.nodeValue;)d=d.nextSibling;d=!d}d&&lc(c.createElement("BR"),e);as(e,n);b.preventDefault()}}this.C.kf()}else if(B&&46==b.keyCode&&(c=Zv(this.C),c.isCollapsed()&&(d=c.ka(),1==d.nodeType&&(c=d.childNodes[c.Ja()])&&
"BR"==c.tagName)))e=ms(O.filter(new ks(c,n,j),ls)),g=c.nextSibling,d.removeChild(c),b.preventDefault(),g&&yD(g)&&(e&&!("BR"==e.tagName||yD(e))?nq(e,Wr(e)).select():(b=ys(g),nq(b,0).select()));return n};t.Zr=function(b){if(B&&this.C.dh)return n;(A||tb)&&13==b.keyCode&&aE(this,j);return n};t.CO=ha;t.BO=ha;
a.bE=E.Wh("LI","DIV","H1","H2","H3","H4","H5","H6"),a.aE=function(b,c){for(var d=Zv(b.C),e=d.xc(),g=b.C.h(),h;e&&e!=g;){var l=e.nodeName;if("DIV"==l||bE[l]&&(!c||!(Ls(e)&&1==e.getElementsByTagName("BR").length))){if(tb&&h){"DIV"==l&&(h==e.lastChild&&Ls(h))&&(mc(h,e),Ap(h).select());break}return}tb&&(c&&"P"==l&&"DIV"!=l)&&(h=e);e=e.parentNode}if(A&&!Gb(9)){var m=n,d=d.$d(),e=d.duplicate();e.moveEnd("character",1);if(e.text.length&&(m=e.parentElement(),e=e.duplicate(),e.collapse(n),e=e.parentElement(),
m=m!=e&&e!=d.parentElement()))d.move("character",-1),d.select()}b.C.lb.xa().execCommand("FormatBlock",n,"<DIV>");m&&(d.move("character",1),d.select())},a.$D=function(b){var b=eD(b).xa(),c=b.selection.createRange(),d=fb();c.pasteHTML('<span id="'+d+'"></span>');b=b.getElementById(d);b.id="";return b},a.ZD=function(b){b=Zv(b.C);if(!b.isCollapsed()){var c=j;if(tb){var d=b.W(),e=b.ta();d==b.ka()&&(d.lastChild&&"BR"==d.lastChild.tagName&&e==d.childNodes.length-1)&&(c=n)}if(c){var g=b;if(g&&!g.isCollapsed()){var h=
j,c=g.Eb(),d=new WD(g.W(),c),e=g.ta(),l;l=g;var m=l.W();lD(m)&&(m=m.childNodes[l.ta()]||m);var m=mD(m),p=l.ka();lD(p)&&(p=p.childNodes[l.Ja()]||p);p=mD(p);l=m==p;if(m=!l)a:{var p=g,m=p.ka(),p=p.Ja(),r=m;if(lD(r)){var x=r.childNodes[p];if(!x||1==x.nodeType&&lD(x)){m=n;break a}}for(x=mD(r);x!=r;){if(zD(r)){m=j;break a}r=r.parentNode}m=p!=Wr(m)}g.cd();(g=XD(d,c))?g=nq(g,e):(g=nq(c,c.childNodes.length),h=n);g.select();l&&(l=mD(g.W()),Ls(l,j)&&(h="&nbsp;",tb&&"LI"==l.tagName&&(h="<br>"),l.innerHTML=h,
Ks(l.firstChild),h=n));m&&(g=mD(g.W()),l=zD(g),g&&l&&(jc(g,l.childNodes),L(l)));h&&(g=nq(XD(d,c),e),g.select())}}}return jD(b,j)};a.cE=function(){},a.dE=new cE,a.eE=["click",B?"keypress":"keydown"];cE.prototype.c=function(b,c,d,e,g){function h(b){if("click"==b.type&&od(b))c.call(e,b);else if(13==b.keyCode||3==b.keyCode)b.type="keypress",c.call(e,b)}h.Vj=c;h.uU=e;g?g.c(b,eE,h):N(b,eE,h)};cE.prototype.wa=function(b,c,d,e,g){for(var h=0;d=eE[h];h++){var l;l=zd(b,d,n)||[];for(var m,p=0;m=l[p];p++)if(m.sg.Vj==c&&m.sg.uU==e){g?g.wa(b,d,m.sg):yd(b,d,m.sg);break}}};a.gE=function(b){M.call(this);this.Rk=b||window;this.Rs=N(this.Rk,"resize",this.Ix,n,this);this.oc=$b(this.Rk);if(C&&nb||tb&&this.Rk.self!=this.Rk.top)this.vu=window.setInterval(v(this.VC,this),fE)};y(gE,Hd);a.fE=500;t=gE.prototype;t.Rs=k;t.Rk=k;t.oc=k;t.vu=k;t.Tl=function(){return this.oc?this.oc.clone():k};t.p=function(){gE.m.p.call(this);this.Rs&&(Ad(this.Rs),this.Rs=k);this.vu&&(window.clearInterval(this.vu),this.vu=k);this.oc=this.Rk=k};t.Ix=function(){this.VC()};
t.VC=function(){var b=$b(this.Rk);Rb(b,this.oc)||(this.oc=b,this.dispatchEvent("resize"))};a.iE=function(b,c){M.call(this);this.H=Ub(b);this.Q=new me(this);this.BB=new gE(this.H.Ta());this.qd={};this.zd=this.H.o("DIV",{className:hE});R(this.zd,n);b.appendChild(this.zd);Tf(this.zd,"zIndex",c);this.Dn=this.zd;this.rM=this.H.o("DIV",{className:"tr_bubble_closebox",innerHTML:"&nbsp;"});this.Dn.appendChild(this.rM);xD(this.zd,this.Q);this.xi=new rh(this.zd)};y(iE,Hd);a.hE="tr_bubble";t=iE.prototype;t.Pb=le("goog.ui.editor.Bubble");
t.p=function(){iE.m.p.call(this);L(this.zd);this.zd=k;this.Q.G();this.Q=k;this.BB.G();this.BB=k};t.ba=q("Dn");t.Eb=q("zd");t.yP=function(){this.S()&&this.oa()};t.cP=function(){for(var b in this.qd)L(this.qd[b].element);this.qd={};D.remove(this.zd,"tr_multi_bubble");this.Q.Qc();this.dispatchEvent("hide")};t.S=function(){return this.xi.S()};a.jE=A?4:2,a.kE=new Of(jE,0,jE,0);
iE.prototype.oa=function(){var b=k,c=j,d;for(d in this.qd)var e=this.qd[d],b=e.dB,c=c&&e.AT;d=496;b=eg(this.zd)!=eg(b);c&&(d=lE(this,b?7:5,4,9));d&496&&(d=lE(this,b?6:4,5,9));d&496&&(d=lE(this,b?7:5,4,5),d&496&&this.Pb.Ok("reposition(): positionAtAnchor() failed with "+d))};
a.lE=function(b,c,d,e){var g=k,h;for(h in b.qd){var l=b.qd[h].dB;if(!g||uc(l,g))g=b.qd[h].dB}return Am(g,c,b.zd,d,k,kE,e)},a.mE=function(b,c,d,e,g,h){this.type=d;this.dB=g;this.AT=h;this.element=b.o("DIV",{className:"tr_bubble_panel",id:c},b.o("DIV",{className:"tr_bubble_panel_title"},e+":"),b.o("DIV",{className:"tr_bubble_panel_content"}))};mE.prototype.ba=function(){return this.element.lastChild};a.nE=function(){wv.call(this);this.kc=new me(this)};y(nE,wv);a.oE=function(b,c){return new iE(b,c)},a.pE={};t=nE.prototype;t.dk=k;t.vy=n;t.nd=lf("AbstractBubblePlugin");t.Zr=function(){this.S()&&this.Dj();return n};
t.Dj=function(b,c){var d;if(b)d=b.target;else if(c)d=c;else{var e=Zv(this.C);if(e){var g=e.W(),h=e.ka(),l=e.ta(),m=e.Ja();A&&(e.isCollapsed()&&g!=h)&&(e=nq(g,l));1==g.nodeType&&(g==h&&l==m-1)&&(g=g.childNodes[l],1==g.nodeType&&(d=g))}d=d||e&&e.Eb()}var p;a:{if(d&&(l=this.UN(d))){if(l!=this.eu||!this.dk){qE(this);this.qh&&es(this.qh);d=rE(this);var r=this.Ww();if(!E.some(d.qd,function(b){return b.type==r})){this.eu=l;var g=this.Ww(),m=this.wE(),h=v(this.JM,this),x=this.QU(),e=fb(),l=new mE(d.H,e,g,
m,l,!x);d.qd[e]=l;m=0;for(x=d.Dn.childNodes.length-1;m<x;m++){var F=d.Dn.childNodes[m];if(d.qd[F.id].type>g){p=F;break}}lc(l.element,p||d.Dn.lastChild);h(l.ba());xD(l.element,d.Q);p=E.Wa(d.qd);1==p?(d.Q.c(d.BB,"resize",d.yP).c(d.xi,"hide",d.cP),d.xi.z(j),d.oa()):2==p&&D.add(d.zd,"tr_multi_bubble");d.oa();this.dk=e;this.kc.c(d,"hide",this.SE);this.vi();this.vy&&this.kc.c(d.ba(),"keydown",this.RR);this.kc.c(d.ba(),"mouseover",function(){this.qh&&this.qh.stop()},this)}}else this.qh&&this.qh.stop();p=
n;break a}qE(this);p=n}return p};t.disable=function(b){if(b.Wj==Jv){var c=pE[b.id];c&&(c.G(),delete pE[b.id])}};a.rE=function(b){var c=b.oZ||b.C.el.document.body;b.H=Ub(c);var d=pE[b.C.id];d||(d=oE.call(k,c,b.C.RL||0),pE[b.C.id]=d);return d};t.Ww=s("");t.wE=s("");t.QU=mf;
a.qE=function(b){if(b.dk&&(!b.qh||!b.qh.Hb()))b.qh=new yj(function(){if(this.dk){var b=rE(this),d=this.dk;L(b.qd[d].element);delete b.qd[d];d=E.Wa(b.qd);1>=d&&D.remove(b.zd,"tr_multi_bubble");0==d?b.xi.z(n):b.oa();this.SE()}},250,b),b.qh.start()};t.vi=ha;t.SE=function(){this.dk=this.eu=k;this.kc.Qc()};t.Ex=function(b){if(this.vy&&this.S()&&9==b.keyCode&&!b.shiftKey){var c=rE(this).ba();if(c=J("tr_bubble_link",c))return c.focus(),b.preventDefault(),j}return n};
t.RR=function(b){if(this.S()&&9==b.keyCode){var c=rE(this).ba(),c=Xb("tr_bubble_link",c);if(b.shiftKey?c[0]==b.target:c.length&&c[c.length-1]==b.target)this.C.focus(),b.preventDefault()}};t.S=function(){return!!this.dk};t.oa=function(){var b=rE(this);b&&b.oa()};
t.mr=function(b,c,d,e,g){c=this.H.o("SPAN",{className:"tr_bubble_link"},g?this.H.o("I",{className:g},c):c);this.vy&&c.setAttribute("tabindex",0);c.setAttribute("role","link");e?e.appendChild(c):(e=this.H.h(b))&&oc(c,e);c.id=b;xD(c,this.kc);d&&(b=this.kc,dE.c(c,d,i,b.ia||b,b));return c};w("Go to link: ");w("Change");w("Remove");a.sE=function(b){M.call(this);this.kd=b};y(sE,Hd);sE.prototype.show=function(){this.jf||(this.jf=this.Qv(),this.jf.addEventListener(Gh,this.eO,n,this));this.jf.z(j)};sE.prototype.hide=function(){this.jf&&this.jf.z(n)};sE.prototype.ub=function(){return!!this.jf&&this.jf.S()};a.tE=function(b){this.zl=b;this.Ri=new wh("",j,this.zl.kd);this.Gn=new Eh(this.zl.kd);this.Fn={};this.Lh("tr-dialog")};tE.prototype.fb=function(b){this.Ri.fb(b);return this};
a.uE=function(b,c){var d=w("OK");b.Gn.set("ok",c||d,j);b.Fn.ok=v(b.zl.$O,b.zl)},a.vE=function(b){var c=Lh,d=w("取消");b.Gn.set(c,d,n,j);b.Fn[c]=v(b.zl.rx,b.zl);return b};tE.prototype.ze=function(b,c,d){d=d||fb();this.Gn.set(d,b);this.Fn[d]=c;return this};tE.prototype.Lh=function(b){D.add(zh(this.Ri),b);return this};tE.prototype.Oa=function(b){this.Ri.ba().appendChild(b);return this};
a.wE=function(b){b.Gn.Ib()&&(uE(b),vE(b));Ih(b.Ri,b.Gn);var c=b.Fn;b.Fn=k;b.Ri.addEventListener(Jh,function(b){if(c[b.key])return c[b.key](b)});Ch(b.Ri,j);var d=b.Ri;b.Ri=k;return d};t=sE.prototype;t.Xw=function(b){return this.jf.uc.Yc(b)};t.$O=function(b){return(b=this.Nn(b))?this.dispatchEvent(b):n};t.rx=function(){return this.dispatchEvent("cancel")};t.p=function(){this.jf&&(this.hide(),this.jf.G(),this.jf=k);sE.m.p.call(this)};t.eO=function(){this.dispatchEvent("afterhide")};a.xE=function(b){wv.call(this);this.yM=b};y(xE,wv);t=xE.prototype;t.Se=function(b){return b==this.yM};t.execCommand=function(b,c){return this.of.apply(this,arguments)};t.of=function(b,c){this.eI||yE(this);this.zb||(this.zb=this.Pv(Ub(this.C.el),c));var d=Zv(this.C);this.gA=d&&new qD(d);Ns(this.C.lb.Ta());xd(this.zb,"afterhide",this.oo,n,this);this.C.dh=j;this.zb.show();this.dispatchEvent("dialogOpened");Av(this.C);return j};
t.oo=function(){this.C.dh=n;zE(this);this.eI||yE(this);this.dispatchEvent("dialogClosed");Av(this.C);this.C.sr.selectionchange=za()};a.zE=function(b){b.gA&&(b.gA.restore(),b.gA=k);b.C.focus()};t.p=function(){yE(this);xE.m.p.call(this)};t.eI=n;t.ly=n;a.yE=function(b){b.zb&&!b.ly&&(b.ly=j,b.zb.G(),b.zb=k,b.ly=n)};a.AE=function(){};y(AE,ho);ia(AE);t=AE.prototype;t.O=s("goog-tab");t.wc=function(){return Xc.aC};t.o=function(b){var c=AE.m.o.call(this,b);(b=b.mg())&&this.Uc(c,b);return c};t.n=function(b,c){var c=AE.m.n.call(this,b,c),d=this.mg(c);d&&b.St(d);if(b.da&8&&(d=b.getParent())&&qa(d.Sm))b.cc(8,n),d.Sm(b);return c};t.mg=function(b){return b.title||""};t.Uc=function(b,c){b&&(b.title=c||"")};a.BE=function(b,c,d){ro.call(this,b,c||AE.F(),d);uo(this,8,j);this.Ak|=9};y(BE,ro);BE.prototype.mg=q("aq");BE.prototype.Uc=function(b){this.N.Uc(this.h(),b);this.St(b)};BE.prototype.St=ca("aq");po("goog-tab",function(){return new BE(k)});a.CE=function(){};y(CE,So);ia(CE);CE.prototype.O=s("goog-tab-bar");CE.prototype.wc=function(){return Xc.AK};CE.prototype.uA=function(b,c,d){this.mG||(this.$q||DE(this),this.mG=E.an(this.$q));var e=this.mG[c];e?(b.Hp(e==EE||e==FE?Vo:Uo),b.nG=e):CE.m.uA.call(this,b,c,d)};CE.prototype.sf=function(b){var c=CE.m.sf.call(this,b);this.$q||DE(this);c.push(this.$q[b.nG]);return c};a.DE=function(b){var c=b.O();b.$q=E.create(GE,c+"-top",HE,c+"-bottom",EE,c+"-start",FE,c+"-end")};a.JE=function(b,c,d){b=b||GE;this.Hp(b==EE||b==FE?Vo:Uo);this.nG=b;Ts.call(this,this.Ab,c||CE.F(),d);IE(this)};y(JE,Ts);a.GE="top",a.HE="bottom",a.EE="start",a.FE="end";t=JE.prototype;t.KL=j;t.Ff=k;t.B=function(){JE.m.B.call(this);IE(this)};t.p=function(){JE.m.p.call(this);this.Ff=k};t.removeChild=function(b,c){KE(this,b);return JE.m.removeChild.call(this,b,c)};t.pA=function(b){JE.m.pA.call(this,b);this.KL&&this.Sm(qh(this,b))};t.Sm=function(b){b?b.Rm(j):this.Ff&&this.Ff.Rm(n)};
a.KE=function(b,c){if(c&&c==b.Ff){for(var d=hs(b,c),e=d-1;c=qh(b,e);e--)if(c.S()&&c.isEnabled()){b.Sm(c);return}for(d+=1;c=qh(b,d);d++)if(c.S()&&c.isEnabled()){b.Sm(c);return}b.Sm(k)}};t.oP=function(b){this.Ff&&this.Ff!=b.target&&this.Ff.Rm(n);this.Ff=b.target};t.pP=function(b){b.target==this.Ff&&(this.Ff=k)};t.mP=function(b){KE(this,b.target)};t.nP=function(b){KE(this,b.target)};t.Me=function(){Ws(this)||this.ud(this.Ff||qh(this,0))};
a.IE=function(b){b.g().c(b,"select",b.oP).c(b,"unselect",b.pP).c(b,"disable",b.mP).c(b,"hide",b.nP)};po("goog-tab-bar",function(){return new JE});a.LE=function(){wv.call(this)};y(LE,wv);LE.prototype.$r=function(b){if(B&&this.C.dh)b=n;else if(9==b.keyCode&&!b.metaKey&&!b.ctrlKey){var c=Zv(this.C);Kc(c.Eb(),"LI")||O.some(c,function(b){return"LI"==b.tagName})?(this.C.execCommand(b.shiftKey?"+outdent":"+indent"),b.preventDefault(),b=j):b=n}else b=n;return b};a.ME=function(){wv.call(this)};y(ME,LE);ME.prototype.nd=s("ListTabHandler");a.NE=function(b){wv.call(this);this.oR=b};y(NE,wv);t=NE.prototype;t.nd=lf("LoremIpsum");t.Cq=nf;t.iq=n;t.queryCommandValue=function(b){return"usinglorem"==b&&this.iq};
t.execCommand=function(b,c){if("clearlorem"==b){var d=!!c,e=this.C;if(this.iq&&!e.dh){var g=e.h();g||(g=e.Pc);this.iq=n;g.style.fontStyle=this.ER;e.oe(j,k,j);d&&e.fe()&&(C?(Tb(e.h()).body.focus(),e.jg()):tb&&dw(e))}}else"updatelorem"==b&&(d=this.C,!this.iq&&(!d.dh&&Lv!=d.id)&&((e=d.h())||(e=d.Pc),Ls(e)&&(this.iq=j,this.ER=e.style.fontStyle,e.style.fontStyle="italic",d.oe(j,this.oR,j))))};t.Se=function(b){return"clearlorem"==b||"updatelorem"==b||"usinglorem"==b};a.OE=function(){wv.call(this);this.eT=k};y(OE,wv);a.PE=/^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/,a.QE=function(b){b.push("<br>")};t=OE.prototype;t.nd=s("RemoveFormatting");t.Se=function(b){return"+removeFormat"==b};t.of=function(b){"+removeFormat"==b&&!Zv(this.C).isCollapsed()&&(b=this.eT||v(this.UH,this),RE(this,b),eD(this).xa().execCommand("RemoveFormat",n,i),Dq&&RE(this,function(b){var d=Gb("528")?/&nbsp;/g:/\u00A0/g;return b.replace(d," ")}))};
t.$r=function(b,c,d){return!d?n:" "==c?(this.C.execCommand("+removeFormat"),j):n};
a.SE=function(b,c){for(var d=b.C.h();c&&c!=d;){if("TABLE"==c.tagName)return c;c=c.parentNode}return k},a.RE=function(b,c){var d=Zv(b.C);if(!(1<d.xj())){if(B){var e=wD(d,b.C.h()),g=SE(b,e.W()),h=SE(b,e.ka());if(g||h){if(g==h)return;var l,m=d;l=g;var d=h,e=new qD(m),p=m.W(),r=m.ta(),x=m.ka(),m=m.Ja(),F=eD(b);if(l){var I=F.createTextNode("");mc(I,l);p=I;r=0}d&&(I=F.createTextNode(""),lc(I,d),x=I,m=0);Yp(p,r,x,m).select();l=e;g||(d=L(bD(l,j)),b.QA=d);h||(d=L(bD(l,n)),b.xw=d);d=Zv(b.C);e=wD(d,b.C.h())}e.select();
d=e}p=d;d=eD(b).o("div");e=p.$d();rq?d.appendChild(e.cloneContents()):qq&&(r=p.Mc(),r=r.replace(/\r\n/g,"\r"),x=r.length,p=x-r.replace(/^[\s\xa0]+/,"").length,r=x-Ma(r).length,e.moveStart("character",p),e.moveEnd("character",-r),p=e.htmlText,"Formatted"==e.queryCommandValue("formatBlock")&&(p=Oa(e.htmlText)),d.innerHTML=p);p=c(d.innerHTML);F=Zv(b.C);d=eD(b);r=fb();e=fb();p='<span id="'+r+'"></span>'+p+'<span id="'+e+'"></span>';m=fb();x='<span id="'+m+'"></span>';if(qq){I=F.Le(0).$d();I.pasteHTML(x);
for(var G;(G=I.parentElement())&&Ls(G)&&!pD(G);){F=G.nodeName;if("TD"==F||"TR"==F||"TH"==F)break;L(G)}I.pasteHTML(p);(m=d.h(m))&&L(m)}else if(rq){d.xa().execCommand("insertImage",n,m);F=RegExp("<[^<]*"+m+"[^>]*>");G=Zv(b.C).Eb();3==G.nodeType&&(G=G.parentNode);for(;!F.test(G.innerHTML);)G=G.parentNode;if(B)G.innerHTML=G.innerHTML.replace(F,p);else{G.innerHTML=G.innerHTML.replace(F,x);for(G=m=d.h(m);(G=m.parentNode)&&Ls(G)&&!pD(G);){F=G.nodeName;if("TD"==F||"TR"==F||"TH"==F)break;mc(m,G);L(G)}G.innerHTML=
G.innerHTML.replace(RegExp(x,"i"),p)}}G=d.h(r);d=d.h(e);Yp(G,0,d,d.childNodes.length).select();L(G);L(d);B&&l&&(d=Zv(b.C),G=b.C.h(),b.QA&&(G.insertBefore(b.QA,G.firstChild),b.QA=k),b.xw&&(G.appendChild(b.xw),b.xw=k),G=k,e=bD(l,j),p=bD(l,n),e&&p&&(G=Yp(e,0,p,0)),gD((g?G:d).W(),(g?G:d).ta(),(h?G:d).ka(),(h?G:d).Ja()).select(),l.G())}};
t.UH=function(b){var c=document.createElement("div");c.innerHTML=b;for(var b=[],c=[c.childNodes,0],d=[],e=0,g=[],h=0,l=0;0<=l;l-=2){for(var m=n;0<h&&l<=g[h-1];)h--,m=j;m&&QE(b);for(m=n;0<e&&l<=d[e-1];)e--,m=j;m&&QE(b);for(var m=c[l],p=c[l+1];p<m.length;){var r=m[p++],x=r.nodeName;switch(x){case "#text":r=0<e?r.nodeValue:Ia(r.nodeValue);r=Ua(r);b.push(r);continue;case "P":QE(b);QE(b);break;case "BR":QE(b);continue;case "TABLE":QE(b);g[h++]=l;break;case "PRE":case "XMP":d[e++]=l;break;case "STYLE":case "SCRIPT":case "SELECT":continue;
case "A":if(r.href&&""!=r.href){b.push("<a href='");b.push(r.href);b.push("'>");b.push(this.UH(r.innerHTML));b.push("</a>");continue}else break;case "IMG":b.push("<img src='");b.push(r.src);b.push("'");"0"==r.border&&b.push(" border='0'");b.push(">");continue;case "TD":r.previousSibling&&b.push(" ");break;case "TR":r.previousSibling&&QE(b);break;case "DIV":var F=r.parentNode;if(F.firstChild==r&&PE.test(F.tagName))break;default:PE.test(x)&&QE(b)}r=r.childNodes;0<r.length&&(c[l++]=m,c[l++]=p,m=r,p=
0)}}return b.join("").replace(/\xa0|[ \t]+/g," ")};a.TE=function(b){this.AC=b};y(TE,Hd);a.UE=function(){M.call(this);this.iR=100;this.Od=[];this.mk=[];this.lt=[]};y(UE,Hd);t=UE.prototype;t.ps=k;t.sB=function(){VE(this,this.Od,this.mk)};t.Tz=function(){VE(this,this.mk,this.Od)};a.VE=function(b,c,d){if(c.length){var e=c.pop();d.push(e);b.lt.push({type:c==b.Od?"before_undo":"before_redo",uE:c==b.Od?e.sB:e.Tz,state:e});1==b.lt.length&&b.Vg();(0==c.length||1==d.length)&&b.dispatchEvent("state_change")}};
t.Vg=function(){if(!(this.ps||0==this.lt.length)){var b=this.lt.shift();this.dispatchEvent({type:b.type,state:b.state})&&(b.state.AC?(this.ps=N(b.state,"action_completed",this.BN,n,this),b.uE.call(b.state)):(b.uE.call(b.state),this.Vg()))}};t.BN=function(){Ad(this.ps);this.ps=k;this.Vg()};a.WE=function(b){wv.call(this);b=b||new UE;this.pG&&Ad(this.pG);this.qe=b;this.pG=N(this.qe,"state_change",this.jN,n,this);this.sj={};this.Rn={};this.zF=k;this.TL=v(this.lU,this)};y(WE,wv);WE.prototype.Pb=le("goog.editor.plugins.UndoRedo");WE.prototype.wo=k;a.XE=E.an({WY:"+undo",nY:"+redo"});t=WE.prototype;t.Se=function(b){return b in XE};t.lJ=function(b){this.disable(b);this.C=k};
t.enable=function(b){if(!this.isEnabled(b)){$v(b);var c=new me(this);B||c.c(b,"beforechange",this.gO);c.c(b,Fv,this.nO);c.c(b,"blur",this.qx);this.sj[b.bh]=c;YE(this,b)}};t.disable=function(b){$v(b);var c=this.sj[b.bh];c&&(c.G(),delete this.sj[b.bh]);this.Rn[b.bh]&&delete this.Rn[b.bh]};t.isEnabled=function(b){return!!this.sj[b.bh]};t.p=function(){WE.m.p.call(this);for(var b in this.sj)this.sj[b].G(),delete this.sj[b];this.C=k;this.qe&&(this.qe.G(),delete this.qe)};t.nd=s("UndoRedo");
t.execCommand=function(b){"+undo"==b?this.qe.sB():"+redo"==b&&this.qe.Tz()};t.queryCommandValue=function(b){var c=k;"+undo"==b?c=0<this.qe.Od.length:"+redo"==b&&(c=0<this.qe.mk.length);return c};t.jN=function(){this.C.dispatchEvent({type:"cvc",zM:["+redo","+undo"]})};
t.lU=function(b,c,d){var e=this.C;if(e){zv(e,j,j);try{e.Xh();e.execCommand("clearlorem",j);e.h().innerHTML=c;d&&d.select();var g=this.C;e.focus();g&&g.bh!=b.bo&&g.execCommand("updatelorem");var h=this.Rn[b.bo];h.Mi=c;h.jJ=d}catch(l){this.Pb.log(ce,"Error while restoring undo state",l)}finally{this.wo=b,e.kf(),Av(e)}}};
t.$r=function(b,c,d){if(d){var e;"z"==c?e=b.shiftKey?"+redo":"+undo":"y"==c&&(e="+redo");if(e)return(b="+undo"==e?this.qe.Od[this.qe.Od.length-1]:this.qe.mk[this.qe.mk.length-1])&&b.bo?this.C.execCommand(e):this.execCommand(e),j}return n};t.gO=function(b){if(!this.wo){var b=b.target,c=b.bh;this.zF!=c&&(this.zF=c,YE(this,b))}};t.nO=function(b){this.wo?(b=this.wo,this.wo=k,b.dispatchEvent("action_completed")):YE(this,b.target)};t.qx=function(b){(b=b.target)&&$v(b)};
a.YE=function(b,c){var d=c.bh,e,g;c.queryCommandValue("usinglorem")?(e="",g=k):(e=c.h().innerHTML,g=new ZE(c),g=!g.isValid()?k:g);var h=b.Rn[d];if(h){if(h.Mi==e)return;if(""==e||""==h.Mi){var l=c.xt(8,"",{});if(e==l&&""==h.Mi||h.Mi==l&&""==e)return}h.Uz=e;h.NT=g;l=b.qe;if(0==l.Od.length||!h.eg(l.Od[l.Od.length-1])){l.Od.push(h);l.Od.length>l.iR&&l.Od.shift();var m=l.mk.length;l.mk.length=0;l.dispatchEvent({type:"state_added",state:h});(1==l.Od.length||m)&&l.dispatchEvent("state_change")}}b.Rn[d]=
new $E(d,e,g,b.TL)},a.$E=function(b,c,d,e){this.AC=j;this.bo=b;this.cI=e;this.Mi=c;this.jJ=d};y($E,TE);$E.prototype.sB=function(){this.cI(this,this.Mi,this.jJ)};$E.prototype.Tz=function(){this.cI(this,this.Uz,this.NT)};$E.prototype.eg=function(b){return this.bo==b.bo&&this.Mi==b.Mi&&this.Uz==b.Uz};
a.ZE=function(b){this.Yd=b;var c=b.lb.Ta(),b=(b=Zv(b))&&b.qg()&&b.Ta()==c?b:k;if(rq){if(c=b,this.Es=n,c){var d=xp(c),e=yp(c);if(d&&e){var b=c.ni()?c.Ja():c.ta(),d=new WD(d,this.Yd.h()),g=zp(c),e=new WD(e,this.Yd.h());c.ni()?(this.Ca=e,this.RA=g,this.Aa=d,this.yw=b):(this.Ca=d,this.RA=b,this.Aa=e,this.yw=g);this.Es=j}}}else qq&&(c=b,this.Es=n,c&&(b=c.Le(0).$d(),uc(this.Yd.h(),b.parentElement())&&(c=this.Yd.lb.xa().body.createTextRange(),c.moveToElementText(this.Yd.h()),e=b.duplicate(),e.collapse(j),
e.setEndPoint("StartToStart",c),this.Ca=aF(e),b=b.duplicate(),b.setEndPoint("StartToStart",c),this.Aa=aF(b),this.Es=j)))};ZE.prototype.isValid=q("Es");ZE.prototype.toString=function(){return rq?"W3C:"+this.Ca.toString()+"\n"+this.RA+":"+this.Aa.toString()+"\n"+this.yw:"IE:"+this.Ca+","+this.Aa};ZE.prototype.select=function(){var b=this.Ke(this.Yd.h());b&&(qq&&this.Yd.h().focus(),mq(b).select())};
ZE.prototype.Ke=function(b){if(rq){var c=XD(this.Ca,b),b=XD(this.Aa,b);return!c||!b?k:Yp(c,this.RA,b,this.yw).$d()}c=b.ownerDocument.body.createTextRange();c.moveToElementText(b);c.collapse(j);c.moveEnd("character",this.Aa);c.moveStart("character",this.Ca);return c};
a.aF=function(b){var c=b.duplicate(),d=b.text,e=d.length;c.collapse(j);c.moveEnd("character",e);for(var g,h=10;(g=c.compareEndPoints("EndToEnd",b))&&!(e-=g,c.moveEnd("character",-g),--h,0==h););b=0;for(c=d.indexOf("\n\r");-1!=c;)++b,c=d.indexOf("\n\r",c+1);return e+b};a.bF=function(b,c){Ro.call(this,b||Rz.F(),c)};y(bF,Ro);po("goog-toolbar-separator",function(){return new bF});a.dF=function(b,c){M.call(this);this.ia=new me(this);this.Yd=b;this.xb=c;this.Qz=[];oh(this.xb,function(b){b.kb&&this.Qz.push(cF(b.ae()))},this);this.xb.$e(n);this.ia.c(this.Yd,"cvc",this.gW).c(this.xb,"action",this.ox)};y(dF,Hd);a.cF=function(b){return b};t=dF.prototype;t.g=q("ia");t.Qr=q("Yd");t.S=function(){return this.xb.S()};t.z=function(b){this.xb.z(b)};t.isEnabled=function(){return this.xb.isEnabled()};t.eb=function(b){this.xb.eb(b)};t.blur=function(){this.xb.$c(k)};
t.p=function(){dF.m.p.call(this);this.ia&&(this.ia.G(),delete this.ia);this.xb&&(this.xb.G(),delete this.xb);delete this.Yd;delete this.Qz};t.gW=function(b){if(this.xb.isEnabled()&&this.dispatchEvent("change")){var c;try{c=this.Yd.queryCommandValue(b.zM||this.Qz)}catch(d){c={}}var b=c,e;for(e in b)if(c=mh(this.xb,e)){var g=b[e];c.Ni?c.Ni(g):c.Sc(!!g)}}};t.ox=function(b){var c=b.target.ae();this.Yd.execCommand(c,b.target.X())};a.eF=function(b){this.wN=b};y(eF,id);eF.prototype.type="ok";a.fF=function(b){id.call(this,"change");this.isValid=b};y(fF,id);a.gF=function(b){return!b?"":"//www.zhihu.com/equation?tex="+encodeURIComponent(b)};a.hF=function(b){T.call(this,b)};y(hF,T);hF.prototype.Ej="";hF.prototype.z=function(b){R(this.h(),b)};a.jF=function(b,c,d,e,g,h,l,m){this.Li=c;this.Jh=l||[];for(var c=m||iF.F(),m=[],d=-d,e=-e,p=0;p<l.length;p++)m.push(K("DIV",{"class":c.O()+"-item",style:"width:"+g+"px;height:"+h+"px;background-position:"+d+"px "+e+"px;"})),d-=g;this.wg=b;fA.call(this,m,c)};y(jF,fA);jF.prototype.hi=q("Li");jF.prototype.ng=function(b){jF.m.ng.call(this,b);this.wg.dispatchEvent(new kF(lF,this))};jF.prototype.ii=function(b){jF.m.ii.call(this,b);b.relatedTarget&&!uc(this.h(),b.relatedTarget)&&this.wg.Xv()};
jF.prototype.od=function(b){jF.m.od.call(this,b);b.relatedTarget&&!uc(this.h(),b.relatedTarget)&&this.wg.Yv.stop()};a.kF=function(b,c,d){id.call(this,b,d);this.lT=c},a.lF="a";kF.prototype.gx=q("lT");a.iF=function(){};y(iF,Yz);ia(iF);iF.prototype.O=s("ee-palette");a.mF=function(b){jF.call(this,b,"a",0,150,18,18,"\\leftarrow \\rightarrow \\leftrightarrow \\Leftarrow \\Rightarrow \\Leftrightarrow \\uparrow \\downarrow \\updownarrow \\Uparrow \\Downarrow \\Updownarrow".split(" "));jA(this,new Qb(12,1))};y(mF,jF);a.nF=function(b){jF.call(this,b,"c",0,70,18,18,"\\leq \\geq \\prec \\succ \\preceq \\succeq \\ll \\gg \\equiv \\sim \\simeq \\asymp \\approx \\ne \\subset \\supset \\subseteq \\supseteq \\in \\ni \\notin".split(" "));jA(this,new Qb(7,3))};y(nF,jF);a.oF=function(b){jF.call(this,b,"g",0,30,18,18,"\\alpha \\beta \\gamma \\delta \\epsilon \\varepsilon \\zeta \\eta \\theta \\vartheta \\iota \\kappa \\lambda \\mu \\nu \\xi \\pi \\varpi \\rho \\varrho \\sigma \\varsigma \\tau \\upsilon \\phi \\varphi \\chi \\psi \\omega \\Gamma \\Delta \\Theta \\Lambda \\Xi \\Pi \\Sigma \\Upsilon \\Phi \\Psi \\Omega".split(" "));jA(this,new Qb(7,6))};y(oF,jF);a.pF=function(b){jF.call(this,b,"m",0,90,30,56,"x_{a};x^{b};x_{a}^{b};\\bar{x};\\tilde{x};\\frac{a}{b};\\sqrt{x};\\sqrt[n]{x};\\bigcap_{a}^{b};\\bigcup_{a}^{b};\\prod_{a}^{b};\\coprod_{a}^{b};\\left( x \\right);\\left[ x \\right];\\left{ x \\right};\\left| x \\right|;\\int_{a}^{b};\\oint_{a}^{b};\\sum_{a}^{b}{x};\\lim_{a \\rightarrow b}{x}".split(";"));jA(this,new Qb(10,2))};y(pF,jF);a.rF=function(b){jF.call(this,b,"mn",0,0,46,18,["g","s","c","m","a"],qF.F());jA(this,new Qb(5,1))};y(rF,jF);rF.prototype.z=function(b,c){return rF.m.z.call(this,j,c)};a.qF=function(){};y(qF,iF);ia(qF);qF.prototype.O=s("ee-menu-palette");a.sF=function(b){jF.call(this,b,"s",0,50,18,18,"\\times \\div \\cdot \\pm \\mp \\ast \\star \\circ \\bullet \\oplus \\ominus \\oslash \\otimes \\odot \\dagger \\ddagger \\vee \\wedge \\cap \\cup \\aleph \\Re \\Im \\top \\bot \\infty \\partial \\forall \\exists \\neg \\angle \\triangle \\diamond".split(" "));jA(this,new Qb(7,5))};y(sF,jF);a.tF=function(){M.call(this);this.tH={};this.mn=k;this.Q=new me(this);this.Yv=new Jd(300);this.Q.c(this.Yv,Kd,this.FE)};y(tF,Hd);t=tF.prototype;t.gx=function(b){var c=this.tH,d=c[b];if(!d){switch(b){case "mn":d=new rF(this);break;case "g":d=new oF(this);break;case "s":d=new sF(this);break;case "c":d=new nF(this);break;case "m":d=new pF(this);break;case "a":d=new mF(this);break;default:f(Error("Invalid palette type!"))}c[b]=d}return d};
t.setActive=function(b){var c=this.mn;c&&c.z(n);this.mn=c=this.gx(b);c.z(j);return c};t.Xv=function(){this.Yv.start()};t.FE=function(){this.setActive("mn")};t.p=function(){tF.m.p.call(this);this.tH=this.mn=k};a.uF=function(b,c,d){T.call(this,d);this.Ej=c;this.wg=b.kT};y(uF,hF);t=uF.prototype;t.ZF="";t.Dv=0;
t.o=function(){var b=w("TeX 公式"),c=w("预览"),d=w("Learn more"),e=this.H,d=e.o("DIV",{style:"display: none;"},e.o("SPAN",{"class":"ee-section-title ee-section-title-floating"},b),this.Ej?e.o("A",{id:"ee-section-learn-more",target:"_blank",href:this.Ej},d):k,e.o("DIV",{style:"clear: both;"}),b=this.jQ=e.o("DIV",{style:"position: relative"}));this.wg.setActive("mn").Z(b);b.appendChild(e.o("DIV",{style:"clear:both"}));var g=this.Bh=e.o("textarea",{"class":"ee-tex",dir:"ltr"});b.appendChild(g);b.appendChild(e.o("DIV",
{"class":"ee-section-title"},c));c=this.CT=e.o("DIV",{"class":"ee-preview-container"});b.appendChild(c);this.e=d};t.B=function(){this.WI=new wu(this.Bh);N(this.WI,"input",this.WE,n,this);this.g().c(this.Bh,"keydown",this.WE);this.g().c(this.wg,lF,this.bP,n,this)};t.z=function(b){uF.m.z.call(this,b);b&&Ld(this.IN,0,this)};t.IN=function(){this.Bh.focus();cs(this.Bh,this.Bh.value.length)};
a.vF=function(b){var c=b.Ol();if(c!=b.ZF){b.ZF=c;var d=!(1024<c.length);b.dispatchEvent(new fF(d));var b=b.CT,e=Ub(b);e.At(b);c&&(d?c=e.o("IMG",{src:gF(c)}):(c=w("Equation is too long"),c=e.o("DIV",{"class":"ee-warning"},c)),e.appendChild(b,c))}};t.WE=function(){this.Dv++;Ld(v(this.qP,this,this.Dv),500)};t.qP=function(b){b==this.Dv&&vF(this)};
t.bP=function(b){var c=b.gx(),d=this.wg,e=d.mn,b=this.Bh;if("mn"==c.hi()){var g=c.tb,g=-1!=g?0<=g&&g<c.Jh.length?c.Jh[g]:k:k;if(e!=c&&e.hi()==g){d.FE();return}g&&(c=this.wg.setActive(g),c.h()||c.Z(this.jQ),c=c.h(),$f(c,0,-c.clientHeight))}else{e=this.wg.mn;g=0<=e.tb&&e.tb<e.Jh.length?e.Jh[e.tb]:k;if(!g)return;Ld(v(this.rQ,this,g+" "),0)}b.focus()};t.rQ=function(b){var c=this.Bh,d=gm(c),e=c.value,e=e.substring(0,d)+b+e.substring(d);c.value=e;cs(c,d+b.length);vF(this)};t.Ol=function(){return this.Bh.value};
t.nA=function(b){this.Bh.value=b;vF(this)};t.p=function(){this.WI.G();this.wg=k;uF.m.p.call(this)};a.wF=function(b,c,d){T.call(this,d);this.jD=b;this.Ej=c};y(wF,T);t=wF.prototype;t.Ch=k;t.o=function(){wF.m.o.call(this);this.kr()};t.kr=function(){var b=this.h();this.Ch=new uF(this.jD,this.Ej,this.H);this.J(this.Ch);this.Ch.Z(b);this.Ch.z(j)};t.$=function(b){this.e=b;this.kr()};t.Ol=function(){return this.Ch.Ol()};t.nA=function(b){this.Ch.nA(b)};t.bx=function(){var b=this.Ol(),c=gF(b);return!c?"":'<img src="'+c+'" alt="'+Ua(b)+'" class="ee_img tr_noresize" eeimg="1" style="vertical-align: middle">'};
t.isValid=function(){return 1024<this.Ol().length};t.z=function(b){this.Ch.z(b)};t.p=function(){this.Ch&&this.Ch.G();this.jD=k;wF.m.p.call(this)};a.xF=function(b,c,d,e){sE.call(this,c);this.rj=new wF(b,e);this.rj.Z();this.rj.nA(d);this.rj.addEventListener("+equation",this.cp,n,this)};y(xF,sE);xF.prototype.Qv=function(){var b=new tE(this),c=w("公式编辑器"),d=w("插入公式"),e=w("保存"),d=this.rj.Ol()?e:d;uE(vE(b.fb(c).Oa(this.rj.h())),d);return wE(b)};xF.prototype.Nn=function(){if(this.rj.isValid())return k;var b=this.rj.bx();return new eF(b)};xF.prototype.cp=function(b){this.QG||(this.QG=this.Xw("ok"));this.QG.disabled=!b.isValid};a.yF=function(b){this.Ej=b||"";xE.call(this,"+equation")};y(yF,xE);t=yF.prototype;t.Da=le("goog.editor.plugins.EquationEditorPlugin");t.nd=lf("EquationEditorPlugin");t.Pv=function(b,c){var d=c||k,e;d?(e=d.getAttribute("alt"),e||(e=d.getAttribute("src"),e=!e?"":decodeURIComponent(e.match(we)[6]||k).slice(4)||"")):e="";this.sH=d;d={};d.kT=new tF;d=new xF(d,b,e,this.Ej);d.addEventListener("ok",this.Bj,n,this);return d};t.enable=function(b){yF.m.enable.call(this,b)};
t.disable=function(b){yF.m.disable.call(this,b)};t.Bj=function(b){zE(this);this.C.Xh();b=gc(eD(this).Ga,b.wN);if(this.sH)oc(b,this.sH);else{var c=Zv(this.C);c.isCollapsed()||c.cd();b=c.insertNode(b,n)}as(b,n);this.C.kf()};a.zF=function(){nE.call(this)};y(zF,nE);w("Equation:");a.AF=w("Edit"),a.BF=w("Remove");t=zF.prototype;t.nd=s("EquationBubble");t.UN=function(b){return b&&"IMG"==b.nodeName&&(b.getAttribute("eeimg")||D.has(b,"ee_img"))?b:k};t.JM=function(b){this.mr("ee_bubble_edit",AF,this.nN,b,"zg-icon zg-icon-pen");this.mr("ee_remove_remove",BF,this.VT,b,"zg-icon zg-icon-trash")};t.Ww=s("IMG");t.wE=function(){return w("Equation")};t.VT=function(){this.C.Xh();L(this.eu);qE(this);this.C.kf()};
t.nN=function(){var b=this.eu;qE(this);this.C.execCommand("+equation",b)};a.CF=function(b){wv.call(this);this.xB="http://upload."+Dg.Im+":"+location.port+"/upload";E.extend(this.D={},this.R,b||{})};y(CF,wv);t=CF.prototype;t.R={F_:ha};t.nd=lf("FastUpload");
t.enable=function(b){if(!this.isEnabled(b)&&!(!window.URL&&!window.webkitURL||!window.FileReader||!window.FormData||!document.addEventListener)){$.fn.draghover=function(){return this.each(function(){var b=$(),c=$(this),d=j;c.on("dragenter",function(l){l=l.originalEvent;0===b.size()&&(d&&z.contains(l.dataTransfer.types,"Files"))&&c.trigger("draghoverstart",l);b=b.add(l.target)});c.on("dragleave",function(l){setTimeout(function(){b=b.not(l.target);0===b.size()&&d&&c.trigger("draghoverend",l)},1)});
c.on("dragstart",function(){d=n});c.on("drop dragend",function(){b=$();c.trigger("draghoverend");d=j})})};this.GB=$(this.C.h());var c=eD(this),d=$('<div class="editable-dropzone"><div class="row"><div class="cell"><div>拖拽至此处上传</div></div></div></div>');c.gy(d[0],this.C.h());c=this.KJ=d;new me(this);b.h().addEventListener("paste",v(this.Hx,this));document.addEventListener("dragover",v(this.zO,this),n);c.on("dragover",v(this.yO,this));c.get(0).addEventListener("drop",v(this.Xr,this),n);$(window).draghover().on({draghoverstart:v(this.HE,
this),draghoverend:v(this.AO,this)});c.draghover().on({draghoverstart:v(this.sO,this),draghoverend:v(this.HE,this)})}};t.zO=function(b){z.contains(b.dataTransfer.types,"Files")&&(b.dataTransfer.dropEffect="none",b.preventDefault())};t.yO=function(b){b=b.originalEvent;b.dataTransfer.dropEffect="copy";b.preventDefault();b.stopPropagation()};t.HE=function(b){b.preventDefault();b.stopPropagation();DF(this,1)};t.sO=function(b){DF(this,2);b.stopPropagation()};
t.AO=function(b){b.preventDefault();DF(this,0)};a.DF=function(b,c){var d=[{display:"none"},{display:"table",width:b.GB.width(),height:b.GB.height(),"background-color":"rgba(255, 255, 255, 0.5)"}];d[2]=$.extend({},d[1],{"background-color":"rgba(245, 245, 245, 0.5)"});b.KJ.css(d[c])};t.Hx=function(b){var c=this;b.clipboardData&&z.contains(b.clipboardData.types,"Files")&&z.forEach(b.clipboardData.items,function(d){-1<d.type.indexOf("image")&&(EF(c,d.getAsFile()),b.preventDefault())})};
t.Xr=function(b){var c=this;c.C.execCommand("clearlorem");var d=b.dataTransfer.files;document.createElement("img");b.preventDefault();var e=[];z.forEach(d,function(b){-1<b.type.indexOf("image")?(EF(c,b),e.push(j)):e.push(n)});z.every(e,function(b){return!b})&&U("文件类型不支持！");DF(c,0)};
a.EF=function(b,c){var d=new FormData;d.append("via","xhr2");d.append("upload_file",c);var e;e=$.ajaxSettings.xhr();e.withCredentials=j;var g=$.ajax({url:b.xB,data:d,processData:n,contentType:n,xhr:function(){return e},type:"POST"}).done(function(b){"string"===$.type(b)&&(b=JSON.parse(b));if(1===b.code)U(b.msg);else{var c=new Image;c.src=b.msg[0];c.setAttribute("originImgSrc",c.src.replace("_m.jpg","_r.jpg"));c.setAttribute("data-rawWidth",b.msg[1]);c.setAttribute("data-rawHeight",b.msg[2]);g.LB.after(c)}}).fail(function(){U("上传失败！>_<")}).always(function(){g.LB.remove()}),
d=g,h;h=eD(b);var l=h.o("IMG",{"class":"",style:"display:block",src:"/static/img/spinner2.gif"}),m=Zv(b.C);!m||!vD(m)||!uc(b.C.h(),m.Eb())?Ls(b.C.field)?nc(b.C.h(),l,0):b.C.h().appendChild(l):m.Ag(l);A||(as(l,n),h.Ta().focus());zv(b.C);h=$(l);d.LB=h};a.FF={},a.LF=function(b,c,d){function e(b){pc(b)}function g(c,d){for(;c!==b;){if(d(c))return c;c=c.parentNode}return k}function h(b){return b.tagName&&b.tagName===c}b||f("Missing Editable Container");c||(c="blockquote");var c=c.toUpperCase(),l=lq();if(l&&GF(b,xp(l))&&GF(b,yp(l))){var m=gD(l.W(),l.ta(),l.ka(),l.Ja()),p;if(l.isCollapsed())p=[];else{var r=l.xc(),x=l.W(),F=l.ka();p=r.childNodes;var I=function(b){return x!==r&&!GF(b,x)},G=function(b){return!(b.previousSibling&&GF(b.previousSibling,F))};
p=O.toArray(1===p.length?p:O.cB(O.mN(p,I),G))}var I=l.Eb(),G=g(I,h),Q=z.reduce(p,function(b,d){1===d.nodeType&&(h(d)?b.push(d):b.push.apply(b,z.toArray(d.getElementsByTagName(c))));return b},[]),X;if(G){if(d)return HF.Nu;pc(G)}else if(Q.length){if(d)return HF.Nu;z.forEach(Q,e)}else{if(d)return HF.VB;if(d=g(I,function(b){return z.contains(IF,b.tagName.toLowerCase())}))X=document.createElement(c),d.parentNode.insertBefore(X,d),X.appendChild(d);else if(l.W()!==l.ka())X=document.createElement(c),p[0].parentNode.insertBefore(X,
p[0]),z.forEach(p,function(b){X.appendChild(b)});else{m=c;JF.EK?document.execCommand("formatBlock",n,m):(d=lq(),l=d.xc(),ra(l)&&1==l.nodeType&&Ls(l)?(m=document.createElement(m),l===b?l.appendChild(m):oc(m,l),(C||B)&&m.appendChild(document.createElement("br")),Ks(m)):(d=d.ka(),d=Jc(d,function(b){return yD(b.parentNode)||lD(b.parentNode)},j),l=O.cB(new ks(d,j,j),qf(KF)),d=O.cB(new ks(d,n,n),qf(KF)),l=O.toArray(l).reverse().concat(O.toArray(d)),l.length&&(m=document.createElement(m),d=z.Df(l),(p=d.nextSibling)&&
(p&&"BR"===p.tagName)&&L(p),mc(m,d),jc(m,l),(C||B)&&m.appendChild(document.createElement("br")),as(m.lastChild))));return}}m&&(l=function(c,d){return c&&GF(b,c)&&Wr(c)>=d},l(m.W(),m.ta())&&l(m.ka(),m.Ja())&&m.select())}else if(d)return HF.VB},a.KF=function(b){return b&&"BR"===b.tagName||yD(b)||lD(b)},a.GF=function(b,c){return 3===b.nodeType?b===c:b.contains(3===c.nodeType?c.parentNode:c)},a.IF=["ul","ol","dl","table"],a.HF={Nu:1,VB:0},a.JF=FF;JF.EK=!A;JF.toggle=LF;
JF.be=function(b,c){return LF(b,c,j)};JF.zK=HF;a.MF=function(){wv.call(this)};y(MF,wv);t=MF.prototype;t.nd=lf("Blockquote");t.Se=function(b){return"+blockquote"===b};t.of=function(b){this.Se(b)&&FF.toggle(this.C.h())};t.queryCommandValue=function(){return FF.zK.Nu===FF.be(this.C.h())};t.Ex=function(b){if(13===b.keyCode)return this.yx(b)};t.yA=function(b,c){return NF(b,c).yA};
a.NF=function(b,c){function d(b,c){return{yA:b,NG:c}}C&&(b.normalize(),c=lq());var e,g=c;e=g.ka();var h=g.Ja(),g=g.xc(),l=g.childNodes.length;3!==e.nodeType&&l&&(e=g.childNodes[h===l?l-1:h]);if(!e)return d(n,k);if(Ls(b))return d(j,b);for(h=e;h!==b;){if(zD(h))return d(n,k);h=h.parentNode}return e&&"BR"===e.tagName&&e.previousSibling&&"BR"===e.previousSibling.tagName?d(j,e):(e=c.Eb())&&1===e.nodeType&&(!e.childNodes.length||Ls(e))?d(j,e):d(n,k)};
t.yx=function(b){var c=Zv(this.C);if(c.isCollapsed()){var d;a:{d=c.ka();for(var e=this.C.field;d!==e;){if("BLOCKQUOTE"===d.tagName)break a;d=d.parentNode}d=i}if(d&&(c=NF(d,c),c.yA)){b.preventDefault();b=document.createElement("div");mc(b,d);if(C||B)(d=(d=d.nextSibling)&&"BR"===d.tagName&&d)||(d=document.createElement("br")),b.appendChild(d);nq(b,0).select();c.NG&&L(c.NG)}}};FB["+blockquote"]={kb:j,T:"引用内容",ya:"+blockquote",Ma:"tr-icon tr-blockquote",factory:GA};a.OF=function(b,c){this.cb=b;this.zB=!c};
OF.prototype.yi=function(b,c,d){var e,g=[];if(""!=b){e=$a(b);var h=RegExp("(^|\\W+)"+e,"i");O.some(this.cb,function(b){String(b).match(h)&&g.push(b);return g.length>=c})}e=g;if(0==e.length&&this.zB){var l=[];O.forEach(this.cb,function(c,d){var e=b.toLowerCase(),g=String(c).toLowerCase(),h=0;if(-1!=g.indexOf(e))h=parseInt((g.indexOf(e)/4).toString(),10);else for(var m=e.split(""),Q=-1,X=10,ka=0,Na;Na=m[ka];ka++)Na=g.indexOf(Na),Na>Q?(Q=Na-Q-1,Q>X-5&&(Q=X-5),h+=Q,Q=Na):(h+=X,X+=5);h<6*e.length&&l.push({oV:c,
iI:h,index:d})});l.sort(function(b,c){var d=b.iI-c.iI;return 0!=d?d:b.index-c.index});e=[];for(var m=0;m<c&&m<l.length;m++)e.push(l[m].oV)}d(b,e)};a.PF=function(b){T.call(this);E.extend(this.D={},this.R,b||{});this.Ec=k};y(PF,T);
a.QF=[["ABAP",["abap"]],["ActionScript",["as","actionscript"]],["Ada",["ada","ada95ada2005"]],["ANTLR",["antlr"]],["ApacheConf",["apacheconf","aconf","apache"]],["AppleScript",["applescript"]],["AspectJ",["aspectj"]],["Asymptote",["asy","asymptote"]],["AutoHotkey",["ahk"]],["Awk",["awk","gawk","mawk","nawk"]],["BBCode",["bbcode"]],["Base Makefile",["basemake"]],["Bash",["bash","sh","ksh"]],["Batchfile",["bat"]],["Befunge",["befunge"]],["BlitzMax",["blitzmax","bmax"]],["Boo",["boo"]],["Brainfuck",
["brainfuck","bf"]],["Bro",["bro"]],["BUGS",["bugs","winbugs","openbugs"]],["C",["c"]],["CMake",["cmake"]],["c-objdump",["c-objdump"]],["aspx-cs",["aspx-cs"]],["C#",["csharp","c#"]],["Ceylon",["ceylon"]],["CFEngine3",["cfengine3","cf3"]],["Cheetah",["cheetah","spitfire"]],["Clojure",["clojure","clj"]],["CoffeeScript",["coffee-script","coffeescript"]],["Coldfusion HTML",["cfm"]],["cfstatement",["cfs"]],["Common Lisp",["common-lisp","cl"]],["Coq",["coq"]],["C++",["cpp","c++"]],["cpp-objdump",["cpp-objdump",
"c++-objdumb","cxx-objdump"]],["Croc",["croc"]],["CSS",["css"]],["CUDA",["cuda","cu"]],["Cython",["cython","pyx"]],["D",["d"]],["d-objdump",["d-objdump"]],["Darcs Patch",["dpatch"]],["Dart",["dart"]],["Delphi",["delphi","pas","pascal","objectpascal"]],["dg",["dg"]],["Diff",["diff","udiff"]],["Django/Jinja",["django","jinja"]],["DTD",["dtd"]],["Duel","duel;Duel Engine;Duel View;JBST;jbst;JsonML+BST".split(";")],["Dylan",["dylan"]],["ECL",["ecl"]],["eC",["ec"]],["Erlang",["erlang"]],["Elixir",["elixir",
"ex","exs"]],["ERB",["erb"]],["Evoque",["evoque"]],["FSharp",["fsharp"]],["Factor",["factor"]],["Fancy",["fancy","fy"]],["Fantom",["fan"]],["Felix",["felix","flx"]],["Fortran",["fortran"]],["GLSL",["glsl"]],["GAS",["gas"]],["Genshi",["genshi","kid","xml+genshi","xml+kid"]],["Gettext Catalog",["pot","po"]],["Gherkin",["Cucumber","cucumber","Gherkin","gherkin"]],["Gnuplot",["gnuplot"]],["Go",["go"]],["GoodData-CL",["gooddata-cl"]],["Gosu",["gosu"]],["Gosu Template",["gst"]],["Groff",["groff","nroff",
"man"]],["Groovy",["groovy"]],["Haml",["haml","HAML"]],["Haskell",["haskell","hs"]],["haXe",["hx","haXe"]],["HTML",["html"]],["HTTP",["http"]],["Hxml",["haxeml","hxml"]],["Hybris",["hybris","hy"]],["INI",["ini","cfg"]],["Io",["io"]],["Ioke",["ioke","ik"]],["IRC logs",["irc"]],["Jade",["jade","JADE"]],["JavaScript",["js","javascript"]],["JSON",["json"]],["Java",["java"]],["Java Server Page",["jsp"]],["Julia console",["jlcon"]],["Julia",["julia","jl"]],["Kconfig",["kconfig","menuconfig","linux-config",
"kernel-config"]],["Koka",["koka"]],["Kotlin",["kotlin"]],["Lasso",["lasso","lassoscript"]],["Lighttpd configuration file",["lighty","lighttpd"]],["Literate Haskell",["lhs","literate-haskell"]],["LiveScript",["live-script","livescript"]],["LLVM",["llvm"]],["Logtalk",["logtalk"]],["Lua",["lua"]],["MOOCode",["moocode"]],["Makefile",["make","makefile","mf","bsdmake"]],["Mako",["mako"]],["MAQL",["maql"]],["Mason",["mason"]],["Matlab",["matlab"]],["Matlab session",["matlabsession"]],["MiniD",["minid"]],
["Modelica",["modelica"]],["Modula-2",["modula2","m2"]],["MoinMoin/Trac Wiki markup",["trac-wiki","moin"]],["Monkey",["monkey"]],["MoonScript",["moon","moonscript"]],["Mscgen",["mscgen","msc"]],["MuPAD",["mupad"]],["MXML",["mxml"]],["MySQL",["mysql"]],["Myghty",["myghty"]],["NASM",["nasm"]],["Nemerle",["nemerle"]],["NewLisp",["newlisp"]],["Newspeak",["newspeak"]],["Nginx configuration file",["nginx"]],["Nimrod",["nimrod","nim"]],["NumPy",["numpy"]],["objdump",["objdump"]],["Objective-C",["objective-c",
"objectivec","obj-c","objc"]],["Objective-J",["objective-j","objectivej","obj-j","objj"]],["OCaml",["ocaml"]],["Octave",["octave"]],["Ooc",["ooc"]],["Opa",["opa"]],["OpenEdge ABL",["openedge","abl","progress"]],["Perl",["perl","pl"]],["PHP",["php","php3","php4","php5"]],["PL/pgSQL",["plpgsql"]],["PostScript",["postscript"]],["PostgreSQL console (psql)",["psql","postgresql-console","postgres-console"]],["PostgreSQL SQL dialect",["postgresql","postgres"]],["POVRay",["pov"]],["PowerShell",["powershell",
"posh","ps1"]],["Prolog",["prolog"]],["Properties",["properties"]],["Protocol Buffer",["protobuf"]],["Python",["python","py","sage"]],["Python Traceback",["pytb"]],["RConsole",["rconsole","rout"]],["Racket",["racket","rkt"]],["Embedded Ragel",["ragel-em"]],["Raw token data",["raw"]],["Rd",["rd"]],["REBOL",["rebol"]],["Redcode",["redcode"]],["RHTML",["rhtml","html+erb","html+ruby"]],["RobotFramework",["RobotFramework","robotframework"]],["reStructuredText",["rst","rest","restructuredtext"]],["Ruby",
["rb","ruby","duby"]],["Rust",["rust"]],["S",["splus","s","r"]],["Standard ML",["sml"]],["Sass",["sass","SASS"]],["Scala",["scala"]],["Scaml",["scaml","SCAML"]],["Scheme",["scheme","scm"]],["Scilab",["scilab"]],["SCSS",["scss"]],["Smali",["smali"]],["Smalltalk",["smalltalk","squeak"]],["Smarty",["smarty"]],["Snobol",["snobol"]],["SourcePawn",["sp"]],["Debian Sourcelist",["sourceslist","sources.list"]],["SQL",["sql"]],["sqlite3con",["sqlite3"]],["SquidConf",["squidconf","squid.conf","squid"]],["Scalate Server Page",
["ssp"]],["Stan",["stan"]],["systemverilog",["sv"]],["Tcl",["tcl"]],["Tcsh",["tcsh","csh"]],["Tea",["tea"]],["TeX",["tex","latex"]],["Text",["text"]],["Treetop",["treetop"]],["UrbiScript",["urbiscript"]],["VGL",["vgl"]],["Vala",["vala","vapi"]],["aspx-vb",["aspx-vb"]],["VB.net",["vb.net","vbnet"]],["Velocity",["velocity"]],["verilog",["v"]],["vhdl",["vhdl"]],["VimL",["vim"]],["XQuery",["xquery","xqy","xq","xql","xqm"]],["XML",["xml"]],["XSLT",["xslt"]],["Xtend",["xtend"]],["YAML",["yaml"]]],a.RF=
function(b){return{label:b[0],value:b[1][0],toString:lf(b[0])}},a.SF=z.map(QF,RF);t=PF.prototype;t.R={BU:"lang-select",dr:"collapsed",UQ:"lang-list",hT:"lang-option",Yk:"active",ZC:"checked"};t.p=function(){PF.m.p.call(this);this.g().G();this.ca.G();L(this.e);this.Mr=this.hu=this.e=k};t.o=function(){var b=this.D;this.e=K("div",{innerHTML:this.Ah,className:[b.BU,b.dr].join(" ")})};t.Ah='<div class="title-button">选择语言</div><i class="zg-icon zg-icon-double-arrow"></i><div class="input-wrapper"><input class="filter-input zg-form-text-input" placeholder="搜索语言"></div>';
t.B=function(){PF.m.B.call(this);this.hu=J("title-button",this.e);this.Mr=J("filter-input",this.e);tg(this.hu,j);var b=this.Mr,c=this.e,d=this.D,e=this.g(),g=this,h=g.D,l={},m=new OF(SF,n),c=new Bm(c,l),p=new om(k,k,n),r=m.yi;m.yi=function(b,c,d){La(b)?r.apply(this,arguments):d(b,SF)};l.dd=function(b,c,d){b=b.data;b.value===g.Ec&&(D.add(d,h.ZC),d.appendChild(K("i","icon "+h.ZC)));d.appendChild(document.createTextNode(b.toString()))};var x=new Zl(m,c,p);p.ca=x;p.fl(b);x.pi=20;e.c(x,"suggestionsupdate",
function(){x.Oe(x.Jc+0)}).c(x,"update",function(b){this.qz(b.xp)}).c(x,"dismiss",function(){this.Hf(j)});b=x.N;b.className=d.UQ;b.It=d.hT;b.Vu=d.Yk;this.ca=x;this.g().c(this.e,"click",this.Vr).c(this.hu,"click",this.rP)};t.X=q("Ec");t.ua=function(b){var c=b&&z.find(SF,function(c){return c.value===b});c&&(this.wk(c.label),this.dispatchEvent({type:"change",gT:c}));this.Ec=b};
t.Vr=function(b){var c=this.ca,d=c.N.h();d&&(document.activeElement!==this.Mr&&!d.contains(b.target))&&(b.preventDefault(),b.stopPropagation(),am(c))};t.rP=function(){this.isCollapsed()&&this.Hf(n)};t.isCollapsed=function(){return D.has(this.e,this.D.dr)};t.Hf=function(b){if(this.isCollapsed()!==b){var c=this.Mr,d=this.D;b?D.add(this.e,d.dr):(D.remove(this.e,d.dr),b=this.ca,d=b.N,b.Fm(SF),d.h().scrollTop=0,d.show(),c.value="",c.focus())}};t.wk=function(b){var c=this.hu;c.title=b;zc(c,b)};
t.qz=function(b){this.ua(b.value);this.ca.Ic()};a.TF=function(b){wv.call(this);E.extend(this.D={},this.R,b||{});this.Fw=this.xb=k};y(TF,wv);
a.UF=C||tb||B,a.VF=function(b){return"P"===b.tagName},a.WF=function(b){return 3===b.nodeType},a.XF=function(b){return b&&"PRE"===b.tagName},a.YF=function(b){function c(b){return z.contains(g,b)}function d(){var b=document.createTextNode("\n");g.push(b);return b}var e=document.createElement("div");e.innerHTML=b;var g=[],h=qf(c),b=Bc(e,yD);(0,z.forEach)(b,function(b){b.lastChild&&"BR"===b.lastChild.tagName&&b.removeChild(b.lastChild);b.firstChild||b.appendChild(document.createTextNode(""));b.insertBefore(d(),
b.firstChild);b.appendChild(d())});b=z.toArray(e.getElementsByTagName("br"));(0,z.forEach)(b,function(b){b!==b.parentNode.lastChild&&oc(document.createTextNode("\n"),b)});e=Bc(e,WF);e=pf(function(b){return z.filter(b,function(d,e){var g=b[e-1];return!g||!(c(g)&&c(d))})},function(b){var c=z.Kw(b,h);return-1!==c?b.slice(0,c+1):b},function(b){var c=z.Jw(b,h);return-1!==c?b.slice(c):b})(e);return(0,z.map)(e,function(b){return b.nodeValue}).join("").replace(/\xa0/g," ")};t=TF.prototype;t.nd=lf("CodePlugin");
t.Se=function(b){return"+code"===b};t.of=function(b){this.Se(b)&&this.trigger()};t.queryCommandValue=function(){var b="1"===ZF(this).state,c=this.C.vj("EnterHandler");c&&(b?c.disable(this.C):c.enable(this.C));this.xb&&this.Fw&&oh(this.xb,function(c){c instanceof Uz&&c.eb(!b||z.contains(this.Fw,c.ae()))},this);return b};t.R={YM:""};t.IU=function(b){this.xb=b;this.Fw=["toggleFullScreen"].concat("+code")};t.p=function(){TF.m.p.call(this);this.xb=k};
a.$F=function(b,c,d){for(b=b.C.field;c!==b;){if(d(c))return c;c=c.parentNode}},a.ZF=function(b){var c,d=lq();d&&b.C.field.contains(d.Eb())?(c=d.W(),b=(c=$F(b,c,XF))?"1":"2"):b="0";return{state:b,Cm:d,code:c}};
t.trigger=function(){var b=ZF(this),c=b.Cm,d=b.code;switch(b.state){case "1":var e=!La(Ic(d)),b=zD(d);e?(d.parentNode.removeChild(d),b&&as(b,j)):(c=c.W()&&c.ka()?new hD(c):k,e=Oa(d.innerHTML),ms(O.filter(new ks(d,n,j),ls))&&(e="<br>"+e),b&&"BR"!==b.tagName&&(e+="<br>"),b=hc(e),d.parentNode.replaceChild(b,d),c.restore());break;case "2":this.xs(c,La(c.Mc())?YF(c.ce()):UF?"\n":"")}};
t.ej=function(b,c){var d=document.createElement(b);d.id=ih(hh.F());return c(d,function(){d=H(d.id);d.removeAttribute("id");return d})};
t.Kg=function(){var b=this.C,c=this.C.field,d,e=new An(XF,n,k,c),g=K("div",{style:"display:none"});bs(e,new Of(4,0,0,0));e.bm=new Of(4,0,0,0)||k;e.Xt=150;e.gs=100;e.sh(g);e.className="hc-lang-select";N(e,"beforeshow",function(b){d=b.target.anchor;e.ed(new hn(d,1));if(d.lang){var b=h,c,g=d.lang;(c=(c=z.find(QF,function(b){return b[0]===g||z.contains(b[1],g)}))&&RF(c))&&b.ua(c.value);h.Hf(j)}else h.wk("选择语言")});N(e,"beforehide",function(b){d=k;h.ua(k);if((b=b.target)&&c.contains(b)&&XF(b))return n});
var h=new PF;h.Z(g);N(h,"change",function(b){d&&(d.lang=b.gT.value,e.z(n))});this.Bq={ax:lf(e),XZ:lf(h),G:function(){e.G();h.G()}};Tc(b,this.Bq);N(b,"delayedchange",this.fU,n,this);N(b.field,"paste",this.Hx,n,this)};t.fU=function(){var b=this.Bq&&this.Bq.ax();b&&(b.S()&&b.anchor)&&b.oa()};
t.Hx=function(b){var c=ZF(this),d=c.Cm,e=c.code;if("1"===c.state)if(c=b.Zb.clipboardData)c.types&&z.contains(c.types,"text/plain")&&(b.preventDefault(),c=c.getData("text/plain"),b=document.createTextNode(c),d.Ag(b),as(b));else if(window.clipboardData){if(c=window.clipboardData.getData("Text")){b.preventDefault();var g=c;this.ej("i",function(b,c){d.Ag(b);b=c();g=Ja(g);oc(document.createTextNode(g),b)})}}else{var h=d.ta(),b=d.Mc().length,l=(e.firstChild?Wr(e.firstChild):0)-h-b;setTimeout(function(){var b=
YF(e.innerHTML);zc(e,b);b=(e.firstChild?Wr(e.firstChild):0)-l;e.firstChild&&nq(e.firstChild,Math.max(h,b)).select()})}};
t.Ex=function(b){if(13===b.keyCode)return this.yx(b);if(40===b.keyCode){var c=ZF(this),d=c.Cm,b=c.code;if("1"===c.state){for(var e=c=d.ka(),g=[];e&&e!==b;)g.push([e.parentNode.childNodes.length,z.indexOf(e.parentNode.childNodes,e)]),e=e.parentNode;g=!g.length||z.every(g,function(b){return b[0]===b[1]+1});e=WF(c);if(g&&!(g=!e))e&&(c=c.nodeValue,d=d.Ja(),e=d===c.length||UF&&d===c.length-1&&"\n"===c.slice(-1)),g=e;g&&(zD(b)||mc(document.createElement("br"),b))}}};
t.yx=function(b){var c=ZF(this),d=c.Cm;if("1"===c.state)return b.preventDefault(),A?this.ej("i",function(b,c){d.Ag(b);setTimeout(function(){var d=document.createTextNode("\r");b=c();oc(d,b);as(d)})}):document.queryCommandSupported("insertLineBreak")?document.execCommand("insertLineBreak"):(b=document.createTextNode("\n"),d.insertNode(b),as(b)),this.C.kf(),j};
t.xs=function(b,c){var d=this.D,e;b.cd();var g;var h=jD(b,j),l=h.ga,m,p=this.C.field;g=$F(this,l,BD(yD,qf(VF)))||p;var r=function(b){return b.parentNode.insertBefore(document.createTextNode(""),b)};if(WF(l)){var x=l.parentNode;!l.nodeValue&&x!==p&&Ls(x)?(m=r(x),l=r(m),x.parentNode.removeChild(x)):m=A&&h.offset===l.length?mc(document.createTextNode(""),l):l.splitText(h.offset)}else"BR"===l.tagName&&(m=l,l=r(l));if(m){for(var F,h=l,l=m;h!=g&&(F=h.parentNode);){m=h;h=l;for(l=F.cloneNode(n);m.nextSibling;)l.appendChild(m.nextSibling);
h&&l.insertBefore(h,l.firstChild);h=F}F=l;m=F.firstChild;jc(g,F.childNodes);g=m}else g=k;g?(e=document.createElement("PRE"),g.parentNode.insertBefore(e,g)):this.ej("PRE",function(c,d){b.insertNode(c);e=d()});!c&&A&&(c=" ");e.lang=d.YM;zc(e,c);Ls(e)?Ks(e.firstChild):as(e.lastChild);d=e;zD(d)||mc(document.createElement("br"),d)};FB["+code"]={kb:j,T:"插入代码",ya:"+code",Ma:"tr-icon tr-code",factory:GA};a.aG=function(b){sE.call(this,b);this.Q=new me(this);this.xB="http://upload."+Dg.Im+":"+location.port+"/upload";this.$L=!A};y(aG,sE);a.bG=function(b){id.call(this,"ok");var c=b[0];this.cm=c;this.rH=c.replace("_m.jpg","_r.jpg");this.NH=b[1];this.MH=b[2]};y(bG,id);t=aG.prototype;t.Ah=Pk('<div class="zm-img-uploader"><iframe src="about:blank" name="av_up_frame" style="position: absolute; height: 0; width: 0; left: -9000px; "></iframe><div class="zg-section zm-img-uploader-tab"><a href="javascript:;" class="tab-nav selected">上传图片</a> 或 <a href="javascript:;" class="tab-nav">引用站外图片</a></div><form class="zg-clear" target="av_up_frame" method="POST" enctype="multipart/form-data" action="<%= uploadURL %>"><div class="tab-content selected <% if (canStylize) { %>inline<% } %>"><% if (canStylize) { %><input type="file" name="upload_file" style="opacity:0;height:0;width:0;font-size:0;position:absolute;"><a href="javascript:;" class="browser zg-btn-blue">选择图片</a><% } else { %><input type="file" name="upload_file"><% } %></div><div class="tab-content"><input type="text" autocomplete="off" name="upload_file_url" class="zm-editable-editor-input zg-form-text-input"><a href="javascript:;" class="insert zg-btn-blue zm-uploader-button-fix">确认</a></div><span style="display: none; " class="zm-img-uploader-loading">正在上传</span><span style="display: none; " class="zm-img-uploader-error">上传图片失败，请稍后重试</span></form><div class="zg-gray">请不要上传与回答问题无关的图片，详细请看 <a href="http://www.zhihu.com/question/20064580" target="_blank">知乎图片使用规范</a></div><div class="zm-command"><a class="cancel" href="javascript:;">取消</a></div></div>');
t.Qv=function(){var b=hc(this.Ah({uploadURL:this.xB,canStylize:this.$L}));E.forEach({form:"form",$A:".zm-img-uploader-tab",lh:".zm-img-uploader-loading",nf:".zm-img-uploader-error",XI:"input[type=text]",co:"input[type=file]",PC:".browser",ll:".cancel",pQ:".insert"},function(c,e){this[e]=$(c,b).get(0)},this);this.Q.c(Y,"iframe_data",this.cv).c(this.co,"change",this.zT).c(this.pQ,"click",this.qQ).c(this.ll,"click",function(){this.rx();this.hide()}).c(this.$A,"click",function(b){b=$(b.target);b.is("a")&&
!b.is(".selected")&&cG(this,b.index())});this.iD=b;pi||(cG(this,1),$(this.$A).replaceWith("<strong>输入站外图片地址：</strong>"));this.PC&&this.Q.c(this.PC,"click",function(){this.co.click()});var c=new tE(this);c.fb("插入图片").Oa(this.iD);c=wE(c);Ih(c,k);return c};t.zT=function(){if(this.co.value){var b=this.co.value,b=String(b).toLowerCase();(!b?0:z.some([".jpg",".jpeg",".gif",".png"],function(c){return Js(b,c)}))?(this.XI.value="",R(this.lh,j),R(this.nf,n),this.form.submit()):dG(this,"图片不是 .jpg、.png 或 .gif 格式，无法上传。")}};
t.qQ=function(){var b=xk(this.XI.value);b?Fa(b,"http://")?(this.co.value="",R(this.lh,j),R(this.nf,n),this.form.submit()):dG(this,"我们目前不支持该协议。"):dG(this,"请填写图片地址。")};a.cG=function(b,c){function d(b){b.eq(c).addClass("selected").siblings().removeClass("selected")}var e=$(".tab-nav",b.$A),g=$(".tab-content",b.form);R(b.nf,n);var h=g.eq(c);h.find("input").val("");d(e);d(g);h.find(":text").focus()},a.dG=function(b,c){R(b.lh,n);b.nf.innerHTML=c;R(b.nf,j)};t.cv=function(b){R(this.lh,n);this.xk(b.nb)};
t.xk=function(b){b&&!b.r?(this.dispatchEvent(this.Nn(b.msg)),this.hide()):dG(this,b.msg)};t.Nn=function(b){return new bG(b)};t.p=function(){this.Q.G();this.Q=k;aG.m.p.call(this)};a.eG=function(){xE.call(this,"image");this.Q=new me(this)};y(eG,xE);t=eG.prototype;t.nd=lf("ImageDialogPlugin");t.of=function(b,c){var d=this.C;return!d.Re&&(d.jg(),!d.Re)?n:eG.m.of.call(this,b,c)};
t.Dj=function(b){if(b&&"mouseup"===b.type){var c=b.target;c&&"IMG"===c.nodeName&&(b=zD(c),b||(b=document.createElement("br"),mc(b,c)),Ks(b))}};t.oo=function(b){eG.m.oo.call(this,b)};t.Pv=function(b){b=new aG(b);this.Q.c(b,"ok",this.Bj).c(b,"cancel",this.po);return b};t.p=function(){eG.m.p.call(this);this.Q.G()};
t.Bj=function(b){zE(this);var c=eD(this),d;d=b.rH?c.o("IMG",{"class":"origin_image zh-lightbox-thumb","data-original":b.rH,title:"点击查看原图",src:b.cm}):c.o("IMG",{"class":"content_image",src:b.cm});b.NH&&d.setAttribute("data-rawwidth",b.NH);b.MH&&d.setAttribute("data-rawheight",b.MH);b=Zv(this.C);if(vD(b))b.Ag(d),A||(as(d,n),c.Ta().focus()),Av(this.C),this.C.kf();else return k;this.Q.Qc()};t.po=function(){this.Q.Qc()};a.fG=function(b){sE.call(this,b);this.Q=new me(this)};y(fG,sE);a.gG=function(b,c,d,e,g){id.call(this,"ok");this.qW=b;this.oW=c;this.pW=g;this.fV=d;this.poster=e};y(gG,id);t=fG.prototype;t.show=function(){fG.m.show.call(this);this.su.focus()};t.hide=function(){fG.m.hide.call(this)};
t.Qv=function(){var b="http://upload."+Dg.Im+":"+location.port+"/upload_video",b=this.kd.o("div","zm-img-uploader zm-img-uploader-upload-tab-selected",[this.kd.o("div","zg-section",this.kd.o("strong",k,"输入视频页地址：")),this.yT=this.kd.o("iframe",{id:"video_up_frame",src:"about:_blank",name:"video_up_frame",style:"visible:hidden;position:absolute;height:0;width:0;left:-9000px"}),this.ci=this.kd.o("form",{"class":"zg-section-title",target:"video_up_frame",method:"post",enctype:"multipart/form-data",action:b},
[this.su=this.kd.o("input",{type:"text","class":"zg-form-text-input",name:"upload_file_url",autocomplete:"off"}),this.Ln=this.kd.o("a",{"class":"zg-btn-blue zm-uploader-button-fix",name:"save",href:"javascript:;"},"确定"),this.kd.o("div","zm-video-uploader-info",[this.lh=this.kd.o("span",{style:"display:none","class":"zm-img-uploader-loading"},"正在上传"),this.nf=this.kd.o("span",{style:"display:none","class":"zm-img-uploader-error"},"插入视频失败，请稍后重试")])]),this.ZP=this.kd.o("div","zg-gray"),this.bj=this.kd.o("div",
"zm-command",[this.ll=this.kd.o("a",{href:"javascript:;"},"取消")])]);this.ZP.innerHTML='我们目前支持<a class="zg-link-gray" target="_blank" href="http://youku.com">优酷</a>、<a class="zg-link-gray" target="_blank" href="http://tudou.com">土豆</a>、<a href="http://video.sina.com.cn/" class="zg-link-gray" target="_blank">新浪</a>、<a href="http://v.qq.com/" class="zg-link-gray" target="_blank">腾讯</a>、<a href="http://www.56.com/" class="zg-link-gray" target="_blank">56</a>、<a href="http://tv.sohu.com/" class="zg-link-gray" target="_blank">搜狐</a>、<a href="http://www.iqiyi.com/" class="zg-link-gray" target="_blank">爱奇艺</a>视频服务。<br />请不要上传与回答问题无关的视频，详细请看 <a href="http://www.zhihu.com/question/20118966" target="_blank">知乎视频使用规范</a>';
this.Q.c(this.ll,"click",function(){this.rx();this.hide()}).c(this.Ln,"click",this.BH).c(this.bj,"click",this.ha).c(this.ci,"submit",function(){return hG(this,this.su.value)}).c(Y,"iframe_data",this.cv);this.iD=b;var c=new tE(this);c.fb("插入视频").Oa(b);b=wE(c);Ih(b,k);return b};a.hG=function(b,c){c=xk(c);if(!c)return n;var d=c.match(/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);d||(R(b.lh,n),b.nf.innerHTML="我们无法识别你输入的视频页地址",R(b.nf,j));return d};
t.BH=function(){if(this.su.value){var b=xk(this.su.value);b&&hG(this,b)&&(R(this.lh,j),R(this.nf,n),this.ci.submit())}};t.ha=function(b){"save"===(b.target&&b.target.name)&&this.BH()};t.cv=function(b){R(this.lh,n);this.xk(b.nb)};t.xk=function(b){b&&!b.r?(this.dispatchEvent(this.Nn(b.msg[0],b.msg[1],b.msg[2],b.msg[3],b.msg[4])),this.hide()):(b=b.msg,R(this.lh,n),this.nf.innerHTML=b,R(this.nf,j))};t.Nn=function(b,c,d,e,g){return new gG(b,c,d,e,g)};t.p=function(){this.Q.G();this.Q=k;fG.m.p.call(this)};
a.iG=function(){xE.call(this,uD);this.Q=new me(this)};y(iG,xE);t=iG.prototype;t.nd=lf("VideoDialogPlugin");t.of=function(b,c){var d=this.C;return!d.Re&&(d.jg(),!d.Re)?n:iG.m.of.call(this,b,c)};t.oo=function(b){iG.m.oo.call(this,b)};t.Pv=function(b){b=new fG(b);this.Q.c(b,"ok",this.Bj).c(b,"cancel",this.po);return b};t.p=function(){iG.m.p.call(this);this.Q.G()};
t.Bj=function(b){zE(this);var c=eD(this),d=c.o("embed");E.forEach({type:"application/x-shockwave-flash",allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque","class":"video",width:"420",height:"350",src:b.qW,"data-poster":b.poster,"data-name":b.pW,"data-videoid":b.oW,"data-sourceurl":b.fV},function(b,c){d.setAttribute(c,b)});b=cD(d);Js(b,'">')&&(b+="</embed>");var b=hc(b+" "),e=b.firstChild,g=Zv(this.C);if(vD(g))g.Ag(b),A?document.selection&&(c=document.selection.createRange(),c.move("character",
-1),c.select()):(as(e),c.Ta().focus()),Av(this.C),this.C.kf();else return k;this.Q.Qc()};t.po=function(){this.Q.Qc()};a.Ms=j,a.jG=wv.prototype.execCommand,a.kG=["+insertOrderedList","+insertUnorderedList","+link"];wv.prototype.execCommand=function(b){var c=this.C;return z.contains(kG,b)&&!c.Re&&(c.jg(),!c.Re)?n:jG.apply(this,arguments)};a.lG=xE.prototype.execCommand,a.mG=["+equation"];xE.prototype.execCommand=function(b){var c=this.C;return z.contains(mG,b)&&!c.Re&&(c.jg(),!c.Re)?n:lG.apply(this,arguments)};uD="video";AD=mb?"⌘":"ctrl";FB[uD]={ya:uD,T:"插入视频",Ma:"tr-icon tr-video",factory:FA};
FB["+equation"]={ya:"+equation",T:LA.VX,Ma:"tr-icon tr-equation",factory:FA};FB["+bold"].T="粗体 ("+AD+"+b)";FB["+italic"].T="斜体 ("+AD+"+i)";FB["+underline"].T="下划线 ("+AD+"+u)";FB["+superscript"].T="引用内容";FB["+insertOrderedList"].T="有序列表";FB["+insertUnorderedList"].T="无序列表";FB["+removeFormat"].T="清除格式";FB.image.T="插入图片";FB[uD].T="插入视频";FB["+equation"].T="插入公式";a.nG=function(){};ia(nG);
nG.prototype.Sg=function(b,c){this.fD=c;var d,e,g;e=J("zm-editable-toolbar-container",b);d=J("zm-editable-editor-outer",b);g=J("zm-editable-editor-field-element",b);var h=new Aw(g.id);h.RL=89;var l=[];c.enableFullScreen&&l.push("toggleFullScreen");l.push("+bold","+italic","+underline",new bF,"+blockquote","+code","+insertOrderedList","+insertUnorderedList","+equation");c.canUploadMedia_&&l.push(new bF,"image",uD);c.useRemoveFormat_&&l.push(new bF,"+removeFormat");var m=Ub(e);g=[];for(var p=0,r;r=
l[p];p++){if(oa(r)){var x=i;if(r=FB[r]){var x=r.factory||GA,F=r.ya,I=r.T,G=r.caption,Q=r.Ma,X=m||Ub(),x=x(F,I,G,Q,k,X);r.kb&&(x.kb=j)}r=x}r&&g.push(r)}var l=Ub(e),ka=new oD(Sz.F(),Uo,l),l=eg(e);ka.Di(l);ka.$e(n);for(m=0;p=g[m];m++)uo(p,32,n),p.Di(l),ka.J(p,j);ka.Z(e);new dF(h,ka);Tc(h,ka);dD(h,new ED);dD(h,new ME);if(c.loremIpsum_&&(dD(h,new NE(c.loremIpsum_)),B))h.on("load",function(){xd(h.h(),"focus",function(){h.execCommand("clearlorem",j)})});dD(h,new YD);dD(h,new OE);dD(h,new WE);e=new TF;dD(h,
e);dD(h,new eG);dD(h,new iG);dD(h,new CF);dD(h,new yF);dD(h,new zF);dD(h,new MF);c.enableFullScreen&&(d=new JB({title:"写作模式",Lk:d}),dD(h,d));h.on("load",function(){c.useScraper_&&this.ws(h,ka)},n,this);return[h,ka]};nG.prototype.ws=function(b,c){var d=b.h(),e=new Kw;e.n(d);var g=K("div",{style:"display:none",className:"tr-spinner spinner-gray"});c.h().appendChild(g);e.on("willScrape",function(){R(g,j)}).on("didScrape",function(){R(g,n)});Tc(b,e)};
Ca("ZH.createRichTextEditor",function(b,c){return nG.F().Sg(b,c)});If("rich_text_editor");}})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/rich_text_editor.js